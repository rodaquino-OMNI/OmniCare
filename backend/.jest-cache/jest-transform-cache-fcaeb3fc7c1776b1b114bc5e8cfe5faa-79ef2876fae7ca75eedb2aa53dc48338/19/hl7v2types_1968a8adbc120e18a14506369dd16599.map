{"file":"/Users/rodrigo/claude-projects/OmniCare/backend/src/services/integration/types/hl7v2.types.ts","mappings":";AAAA;;;GAGG;;;AAoDH,uBAAuB;AACvB,IAAY,gBA6CX;AA7CD,WAAY,gBAAgB;IAC1B,iCAAiC;IACjC,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IAEnB,SAAS;IACT,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IAEnB,UAAU;IACV,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IAEnB,aAAa;IACb,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IAEnB,YAAY;IACZ,uCAAmB,CAAA;IAEnB,eAAe;IACf,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IAEnB,kBAAkB;IAClB,+BAAW,CAAA;IAEX,4BAA4B;IAC5B,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;IAEnB,iCAAiC;IACjC,uCAAmB,CAAA;IACnB,uCAAmB,CAAA;AACrB,CAAC,EA7CW,gBAAgB,gCAAhB,gBAAgB,QA6C3B;AAaD,8BAA8B;AAC9B,IAAY,YAOX;AAPD,WAAY,YAAY;IACtB,yBAAS,CAAA;IACT,yBAAS,CAAA;IACT,yBAAS,CAAA;IACT,yBAAS,CAAA;IACT,yBAAS,CAAA;IACT,yBAAS,CAAA;AACX,CAAC,EAPW,YAAY,4BAAZ,YAAY,QAOvB","names":[],"sources":["/Users/rodrigo/claude-projects/OmniCare/backend/src/services/integration/types/hl7v2.types.ts"],"sourcesContent":["/**\n * HL7 v2 Integration Types\n * Types and interfaces for HL7 v2 message handling and legacy system integration\n */\n\n// HL7 v2 Message Structure\nexport interface HL7v2Message {\n  messageType: string; // MSH.9.1\n  triggerEvent: string; // MSH.9.2\n  messageStructure: string; // MSH.9.3\n  messageControlId: string; // MSH.10\n  sendingApplication: string; // MSH.3\n  sendingFacility: string; // MSH.4\n  receivingApplication: string; // MSH.5\n  receivingFacility: string; // MSH.6\n  timestamp: Date; // MSH.7\n  processingId: string; // MSH.11\n  versionId: string; // MSH.12\n  sequenceNumber?: number; // MSH.13\n  continuationPointer?: string; // MSH.14\n  acceptAcknowledgmentType?: string; // MSH.15\n  applicationAcknowledgmentType?: string; // MSH.16\n  countryCode?: string; // MSH.17\n  characterSet?: string; // MSH.18\n  principalLanguage?: string; // MSH.19\n  segments: HL7v2Segment[];\n  rawMessage?: string;\n}\n\n// HL7 v2 Segment\nexport interface HL7v2Segment {\n  segmentType: string;\n  fields: HL7v2Field[];\n  sequenceNumber?: number;\n  setId?: string;\n}\n\n// HL7 v2 Field\nexport interface HL7v2Field {\n  value: string | HL7v2Component[] | HL7v2Field[];\n  components?: HL7v2Component[];\n  repetitions?: HL7v2Field[];\n}\n\n// HL7 v2 Component\nexport interface HL7v2Component {\n  value: string | HL7v2Subcomponent[];\n  subcomponents?: HL7v2Subcomponent[];\n}\n\n// HL7 v2 Subcomponent\nexport interface HL7v2Subcomponent {\n  value: string;\n}\n\n// HL7 v2 Message Types\nexport enum HL7v2MessageType {\n  // Admission, Discharge, Transfer\n  ADT_A01 = 'ADT^A01', // Admit/Visit Notification\n  ADT_A02 = 'ADT^A02', // Transfer a Patient\n  ADT_A03 = 'ADT^A03', // Discharge/End Visit\n  ADT_A04 = 'ADT^A04', // Register a Patient\n  ADT_A05 = 'ADT^A05', // Pre-admit a Patient\n  ADT_A08 = 'ADT^A08', // Update Patient Information\n  ADT_A11 = 'ADT^A11', // Cancel Admit/Visit Notification\n  ADT_A12 = 'ADT^A12', // Cancel Transfer\n  ADT_A13 = 'ADT^A13', // Cancel Discharge/End Visit\n  \n  // Orders\n  ORM_O01 = 'ORM^O01', // Order Message\n  ORU_R01 = 'ORU^R01', // Unsolicited Observation Message\n  ORL_O22 = 'ORL^O22', // Laboratory Order Response\n  \n  // Results\n  ORU_R30 = 'ORU^R30', // Unsolicited Point-of-Care Observation\n  ORU_R32 = 'ORU^R32', // Unsolicited Pre-Ordered Point-of-Care Observation\n  \n  // Scheduling\n  SIU_S12 = 'SIU^S12', // Notification of New Appointment Booking\n  SIU_S13 = 'SIU^S13', // Notification of Appointment Rescheduling\n  SIU_S14 = 'SIU^S14', // Notification of Appointment Modification\n  SIU_S15 = 'SIU^S15', // Notification of Appointment Cancellation\n  \n  // Financial\n  DFT_P03 = 'DFT^P03', // Post Detail Financial Transaction\n  \n  // Master Files\n  MFN_M02 = 'MFN^M02', // Master File - Staff Practitioner\n  MFN_M03 = 'MFN^M03', // Master File - Test/Observation\n  \n  // Acknowledgments\n  ACK = 'ACK', // General Acknowledgment\n  \n  // Medication Administration\n  RAS_O17 = 'RAS^O17', // Pharmacy/Treatment Administration\n  RDE_O11 = 'RDE^O11', // Pharmacy/Treatment Encoded Order\n  RDS_O13 = 'RDS^O13', // Pharmacy/Treatment Dispense\n  \n  // Clinical Document Architecture\n  MDM_T02 = 'MDM^T02', // Original Document Notification\n  MDM_T04 = 'MDM^T04', // Document Status Change Notification\n}\n\n// HL7 v2 Acknowledgment\nexport interface HL7v2Acknowledgment {\n  messageType: 'ACK';\n  messageControlId: string;\n  acknowledgmentCode: HL7v2AckCode;\n  textMessage?: string;\n  expectedSequenceNumber?: number;\n  errorCondition?: HL7v2ErrorCondition;\n  timestamp: Date;\n}\n\n// HL7 v2 Acknowledgment Codes\nexport enum HL7v2AckCode {\n  AA = 'AA', // Application Accept\n  AE = 'AE', // Application Error\n  AR = 'AR', // Application Reject\n  CA = 'CA', // Commit Accept\n  CE = 'CE', // Commit Error\n  CR = 'CR', // Commit Reject\n}\n\n// HL7 v2 Error Conditions\nexport interface HL7v2ErrorCondition {\n  errorCode: string;\n  errorLocation?: string;\n  errorDescription?: string;\n  diagnosticInformation?: string;\n  userMessage?: string;\n}\n\n// HL7 v2 Connection Configuration\nexport interface HL7v2ConnectionConfig {\n  host: string;\n  port: number;\n  protocol: 'MLLP' | 'HTTP' | 'HTTPS';\n  timeout: number;\n  keepAlive: boolean;\n  reconnectAttempts: number;\n  reconnectDelay: number;\n  encoding: 'ASCII' | 'UTF-8' | 'ISO-8859-1';\n  mllpConfig?: {\n    startBlock: string; // Default: '\\x0B'\n    endBlock: string; // Default: '\\x1C'\n    carriageReturn: string; // Default: '\\x0D'\n  };\n  tlsConfig?: {\n    enabled: boolean;\n    cert?: string;\n    key?: string;\n    ca?: string;\n    rejectUnauthorized?: boolean;\n  };\n}\n\n// HL7 v2 Message Validation\nexport interface HL7v2ValidationConfig {\n  validateStructure: boolean;\n  validateDataTypes: boolean;\n  validateTableValues: boolean;\n  validateConformance: boolean;\n  strictMode: boolean;\n  version: string; // e.g., '2.5.1'\n  messageProfile?: string;\n}\n\n// HL7 v2 Parsing Options\nexport interface HL7v2ParsingOptions {\n  fieldSeparator: string; // Default: '|'\n  componentSeparator: string; // Default: '^'\n  repetitionSeparator: string; // Default: '~'\n  escapeCharacter: string; // Default: '\\\\'\n  subcomponentSeparator: string; // Default: '&'\n  truncateExtraFields: boolean;\n  allowEmptyFields: boolean;\n  preserveWhitespace: boolean;\n}\n\n// HL7 v2 Routing Rules\nexport interface HL7v2RoutingRule {\n  id: string;\n  name: string;\n  messageType: string;\n  sendingApplication?: string;\n  sendingFacility?: string;\n  receivingApplication?: string;\n  receivingFacility?: string;\n  condition?: string; // JavaScript expression\n  destination: HL7v2Destination;\n  transformation?: string; // Transformation rule ID\n  priority: number;\n  active: boolean;\n}\n\n// HL7 v2 Destination\nexport interface HL7v2Destination {\n  type: 'endpoint' | 'queue' | 'database' | 'fhir' | 'file';\n  config: {\n    endpoint?: HL7v2ConnectionConfig;\n    queueName?: string;\n    databaseConfig?: any;\n    fhirEndpoint?: string;\n    filePath?: string;\n  };\n}\n\n// HL7 v2 Message Processing Result\nexport interface HL7v2ProcessingResult {\n  success: boolean;\n  messageId: string;\n  acknowledgment?: HL7v2Acknowledgment;\n  transformedMessage?: any; // Could be FHIR or other format\n  processingTime: number;\n  warnings: string[];\n  errors: HL7v2ErrorCondition[];\n  routingResults?: HL7v2RoutingResult[];\n}\n\n// HL7 v2 Routing Result\nexport interface HL7v2RoutingResult {\n  ruleId: string;\n  destination: string;\n  success: boolean;\n  response?: any;\n  error?: string;\n  processingTime: number;\n}\n\n// HL7 v2 Interface Statistics\nexport interface HL7v2InterfaceStatistics {\n  messagesReceived: number;\n  messagesProcessed: number;\n  messagesFailed: number;\n  averageProcessingTime: number;\n  errorRate: number;\n  lastMessageTime?: Date;\n  connectionStatus: 'connected' | 'disconnected' | 'error';\n  uptime: number;\n}\n\n// HL7 v2 Message Store\nexport interface HL7v2MessageStore {\n  id: string;\n  messageType: string;\n  messageControlId: string;\n  sendingApplication: string;\n  sendingFacility: string;\n  receivingApplication: string;\n  receivingFacility: string;\n  timestamp: Date;\n  rawMessage: string;\n  parsedMessage?: HL7v2Message;\n  processingResult?: HL7v2ProcessingResult;\n  status: 'received' | 'processing' | 'processed' | 'failed' | 'acknowledged';\n  retryCount: number;\n  lastRetry?: Date;\n  acknowledgmentSent?: boolean;\n  acknowledgmentReceived?: boolean;\n}\n\n// HL7 v2 Data Types\nexport interface HL7v2DataTypes {\n  // Patient Information\n  PID: {\n    setId: string; // PID.1\n    patientId: string; // PID.2\n    patientIdentifierList: HL7v2PatientIdentifier[]; // PID.3\n    alternatePatientId?: string; // PID.4\n    patientName: HL7v2PersonName[]; // PID.5\n    mothersMaidenName?: HL7v2PersonName[]; // PID.6\n    dateTimeOfBirth?: Date; // PID.7\n    administrativeSex?: string; // PID.8\n    patientAlias?: HL7v2PersonName[]; // PID.9\n    race?: string[]; // PID.10\n    patientAddress?: HL7v2Address[]; // PID.11\n    countryCode?: string; // PID.12\n    phoneNumberHome?: HL7v2PhoneNumber[]; // PID.13\n    phoneNumberBusiness?: HL7v2PhoneNumber[]; // PID.14\n    primaryLanguage?: string; // PID.15\n    maritalStatus?: string; // PID.16\n    religion?: string; // PID.17\n    patientAccountNumber?: string; // PID.18\n    ssnNumber?: string; // PID.19\n    driversLicenseNumber?: string; // PID.20\n  };\n  \n  // Observation Request\n  OBR: {\n    setId: string; // OBR.1\n    placerOrderNumber?: string; // OBR.2\n    fillerOrderNumber?: string; // OBR.3\n    universalServiceIdentifier: HL7v2CodedElement; // OBR.4\n    priority?: string; // OBR.5\n    requestedDateTime?: Date; // OBR.6\n    observationDateTime?: Date; // OBR.7\n    observationEndDateTime?: Date; // OBR.8\n    collectionVolume?: HL7v2Quantity; // OBR.9\n    collectorIdentifier?: HL7v2PersonName[]; // OBR.10\n    specimenActionCode?: string; // OBR.11\n    dangerCode?: string; // OBR.12\n    relevantClinicalInformation?: string; // OBR.13\n    specimenReceivedDateTime?: Date; // OBR.14\n    specimenSource?: string; // OBR.15\n    orderingProvider?: HL7v2PersonName[]; // OBR.16\n    orderCallbackPhoneNumber?: HL7v2PhoneNumber[]; // OBR.17\n    placerField1?: string; // OBR.18\n    placerField2?: string; // OBR.19\n    fillerField1?: string; // OBR.20\n    fillerField2?: string; // OBR.21\n    resultsReportedDateTime?: Date; // OBR.22\n    chargeToPractice?: string; // OBR.23\n    diagnosticServiceSectionId?: string; // OBR.24\n    resultStatus?: string; // OBR.25\n  };\n  \n  // Observation Result\n  OBX: {\n    setId: string; // OBX.1\n    valueType: string; // OBX.2\n    observationIdentifier: HL7v2CodedElement; // OBX.3\n    observationSubId?: string; // OBX.4\n    observationValue?: any; // OBX.5\n    units?: HL7v2CodedElement; // OBX.6\n    referencesRange?: string; // OBX.7\n    abnormalFlags?: string[]; // OBX.8\n    probability?: number; // OBX.9\n    natureOfAbnormalTest?: string[]; // OBX.10\n    observationResultStatus: string; // OBX.11\n    effectiveDate?: Date; // OBX.12\n    userDefinedAccessChecks?: string; // OBX.13\n    dateTimeOfObservation?: Date; // OBX.14\n    producersId?: HL7v2CodedElement; // OBX.15\n    responsibleObserver?: HL7v2PersonName[]; // OBX.16\n    observationMethod?: HL7v2CodedElement[]; // OBX.17\n    equipmentInstanceIdentifier?: HL7v2EntityIdentifier[]; // OBX.18\n    dateTimeOfAnalysis?: Date; // OBX.19\n  };\n}\n\n// HL7 v2 Common Data Types\nexport interface HL7v2PatientIdentifier {\n  idNumber: string;\n  checkDigit?: string;\n  checkDigitScheme?: string;\n  assigningAuthority?: HL7v2AssigningAuthority;\n  identifierTypeCode?: string;\n  assigningFacility?: HL7v2AssigningFacility;\n  effectiveDate?: Date;\n  expirationDate?: Date;\n  assigningJurisdiction?: HL7v2CodedElement;\n  assigningAgencyOrDepartment?: HL7v2CodedElement;\n}\n\nexport interface HL7v2PersonName {\n  familyName?: string;\n  givenName?: string;\n  secondAndFurtherGivenNames?: string;\n  suffix?: string;\n  prefix?: string;\n  degree?: string;\n  nameTypeCode?: string;\n  nameRepresentationCode?: string;\n  nameContext?: HL7v2CodedElement;\n  nameValidityRange?: HL7v2DateRange;\n  nameAssemblyOrder?: string;\n  effectiveDate?: Date;\n  expirationDate?: Date;\n  professionalSuffix?: string;\n}\n\nexport interface HL7v2Address {\n  streetAddress?: string;\n  otherDesignation?: string;\n  city?: string;\n  stateOrProvince?: string;\n  zipOrPostalCode?: string;\n  country?: string;\n  addressType?: string;\n  otherGeographicDesignation?: string;\n  countyParishCode?: string;\n  censusTract?: string;\n  addressRepresentationCode?: string;\n  addressValidityRange?: HL7v2DateRange;\n  effectiveDate?: Date;\n  expirationDate?: Date;\n}\n\nexport interface HL7v2PhoneNumber {\n  telephoneNumber?: string;\n  telecommunicationUseCode?: string;\n  telecommunicationEquipmentType?: string;\n  emailAddress?: string;\n  countryCode?: string;\n  areaCityCode?: string;\n  localNumber?: string;\n  extension?: string;\n  anyText?: string;\n  extensionPrefix?: string;\n  speedDialCode?: string;\n  unformattedTelephoneNumber?: string;\n}\n\nexport interface HL7v2CodedElement {\n  identifier?: string;\n  text?: string;\n  nameOfCodingSystem?: string;\n  alternateIdentifier?: string;\n  alternateText?: string;\n  nameOfAlternateCodingSystem?: string;\n  codingSystemVersionId?: string;\n  alternateCodingSystemVersionId?: string;\n  originalText?: string;\n}\n\nexport interface HL7v2Quantity {\n  quantity?: number;\n  units?: HL7v2CodedElement;\n}\n\nexport interface HL7v2AssigningAuthority {\n  namespaceId?: string;\n  universalId?: string;\n  universalIdType?: string;\n}\n\nexport interface HL7v2AssigningFacility {\n  namespaceId?: string;\n  universalId?: string;\n  universalIdType?: string;\n}\n\nexport interface HL7v2EntityIdentifier {\n  entityIdentifier?: string;\n  namespaceId?: string;\n  universalId?: string;\n  universalIdType?: string;\n}\n\nexport interface HL7v2DateRange {\n  rangeStartDateTime?: Date;\n  rangeEndDateTime?: Date;\n}"],"version":3}