18796e0ebbb983b2566ff9f4f40fde9e
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.fhirResourcesService = exports.FHIRResourcesService = void 0;
const medplum_service_1 = require("./medplum.service");
const logger_1 = __importDefault(require("@/utils/logger"));
/**
 * FHIR Resources Service
 * Implements FHIR R4 resource management for all clinical data types
 * used in the OmniCare EMR system
 */
class FHIRResourcesService {
    // ===============================
    // PATIENT RESOURCES
    // ===============================
    /**
     * Create a new patient record
     */
    async createPatient(patientData) {
        try {
            const patient = {
                resourceType: 'Patient',
                active: true,
                name: patientData.name || [],
                gender: patientData.gender,
                birthDate: patientData.birthDate,
                address: patientData.address || [],
                telecom: patientData.telecom || [],
                identifier: [
                    ...(patientData.identifier || []),
                    {
                        system: 'http://omnicare.com/patient-id',
                        value: patientData.omnicarePatientId || `P${Date.now()}`,
                    },
                ],
                contact: patientData.contact || [],
                communication: patientData.communication || [],
                generalPractitioner: patientData.generalPractitioner || [],
                managingOrganization: patientData.managingOrganization,
                extension: [
                    ...(patientData.extension || []),
                    // Add OmniCare-specific extensions
                    {
                        url: 'http://omnicare.com/fhir/StructureDefinition/registration-date',
                        valueDateTime: patientData.registrationDate || new Date().toISOString(),
                    },
                    {
                        url: 'http://omnicare.com/fhir/StructureDefinition/preferred-language',
                        valueString: patientData.preferredLanguage || 'en',
                    },
                ],
            };
            const result = await medplum_service_1.medplumService.createResource(patient);
            logger_1.default.fhir('Patient created successfully', { patientId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to create patient:', error);
            throw error;
        }
    }
    /**
     * Search for patients with various criteria
     */
    async searchPatients(searchParams) {
        try {
            const result = await medplum_service_1.medplumService.searchResources('Patient', searchParams);
            logger_1.default.fhir('Patient search completed', {
                resultCount: result.entry?.length || 0,
                total: result.total,
            });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to search patients:', error);
            throw error;
        }
    }
    /**
     * Get patient by ID
     */
    async getPatient(patientId) {
        try {
            const result = await medplum_service_1.medplumService.readResource('Patient', patientId);
            logger_1.default.fhir('Patient retrieved', { patientId });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to get patient:', error);
            throw error;
        }
    }
    /**
     * Update patient information
     */
    async updatePatient(patient) {
        try {
            const result = await medplum_service_1.medplumService.updateResource(patient);
            logger_1.default.fhir('Patient updated successfully', { patientId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to update patient:', error);
            throw error;
        }
    }
    // ===============================
    // PRACTITIONER RESOURCES
    // ===============================
    /**
     * Create a new practitioner record
     */
    async createPractitioner(practitionerData) {
        try {
            const practitioner = {
                resourceType: 'Practitioner',
                active: true,
                name: practitionerData.name || [],
                identifier: [
                    ...(practitionerData.identifier || []),
                    {
                        system: 'http://omnicare.com/practitioner-id',
                        value: `PR${Date.now()}`,
                    },
                ],
                telecom: practitionerData.telecom || [],
                address: practitionerData.address || [],
                gender: practitionerData.gender,
                birthDate: practitionerData.birthDate,
                qualification: practitionerData.qualification || [],
                communication: practitionerData.communication || [],
            };
            const result = await medplum_service_1.medplumService.createResource(practitioner);
            logger_1.default.fhir('Practitioner created successfully', { practitionerId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to create practitioner:', error);
            throw error;
        }
    }
    /**
     * Search for practitioners
     */
    async searchPractitioners(searchParams) {
        try {
            const result = await medplum_service_1.medplumService.searchResources('Practitioner', searchParams);
            logger_1.default.fhir('Practitioner search completed', {
                resultCount: result.entry?.length || 0
            });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to search practitioners:', error);
            throw error;
        }
    }
    // ===============================
    // ENCOUNTER RESOURCES
    // ===============================
    /**
     * Create a new encounter
     */
    async createEncounter(encounterData) {
        try {
            const encounter = {
                resourceType: 'Encounter',
                status: encounterData.status || 'planned',
                class: encounterData.class || {
                    system: 'http://terminology.hl7.org/CodeSystem/v3-ActCode',
                    code: 'AMB',
                    display: 'Ambulatory',
                },
                type: encounterData.type || [],
                subject: encounterData.subject || { reference: '' },
                participant: encounterData.participant || [],
                period: encounterData.period,
                reasonCode: encounterData.reasonCode || [],
                serviceProvider: encounterData.serviceProvider,
                identifier: [
                    ...(encounterData.identifier || []),
                    {
                        system: 'http://omnicare.com/encounter-id',
                        value: encounterData.omnicareEncounterId || `E${Date.now()}`,
                    },
                ],
                extension: [
                    ...(encounterData.extension || []),
                    {
                        url: 'http://omnicare.com/fhir/StructureDefinition/appointment-type',
                        valueString: encounterData.appointmentType || 'routine',
                    },
                    {
                        url: 'http://omnicare.com/fhir/StructureDefinition/chief-complaint',
                        valueString: encounterData.chiefComplaint || '',
                    },
                ],
            };
            const result = await medplum_service_1.medplumService.createResource(encounter);
            logger_1.default.fhir('Encounter created successfully', { encounterId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to create encounter:', error);
            throw error;
        }
    }
    /**
     * Search for encounters
     */
    async searchEncounters(searchParams) {
        try {
            const result = await medplum_service_1.medplumService.searchResources('Encounter', searchParams);
            logger_1.default.fhir('Encounter search completed', {
                resultCount: result.entry?.length || 0
            });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to search encounters:', error);
            throw error;
        }
    }
    // ===============================
    // OBSERVATION RESOURCES
    // ===============================
    /**
     * Create a new observation
     */
    async createObservation(observationData) {
        try {
            const observation = {
                resourceType: 'Observation',
                status: observationData.status || 'final',
                category: observationData.category || [{
                        coding: [{
                                system: 'http://terminology.hl7.org/CodeSystem/observation-category',
                                code: 'vital-signs',
                                display: 'Vital Signs',
                            }],
                    }],
                code: observationData.code || {
                    coding: [{
                            system: 'http://loinc.org',
                            code: '8310-5',
                            display: 'Body temperature',
                        }],
                },
                subject: observationData.subject || { reference: '' },
                encounter: observationData.encounter,
                effectiveDateTime: observationData.effectiveDateTime || new Date().toISOString(),
                performer: observationData.performer || [],
                valueQuantity: observationData.valueQuantity,
                valueCodeableConcept: observationData.valueCodeableConcept,
                valueString: observationData.valueString,
                valueBoolean: observationData.valueBoolean,
                identifier: [
                    ...(observationData.identifier || []),
                    {
                        system: 'http://omnicare.com/observation-id',
                        value: observationData.omnicareObservationId || `O${Date.now()}`,
                    },
                ],
                extension: [
                    ...(observationData.extension || []),
                    {
                        url: 'http://omnicare.com/fhir/StructureDefinition/device-used',
                        valueString: observationData.deviceUsed || '',
                    },
                ],
            };
            const result = await medplum_service_1.medplumService.createResource(observation);
            logger_1.default.fhir('Observation created successfully', { observationId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to create observation:', error);
            throw error;
        }
    }
    /**
     * Create vital signs observations
     */
    async createVitalSigns(patientId, encounterId, vitals) {
        const observations = [];
        try {
            // Temperature
            if (vitals.temperature) {
                const tempObservation = await this.createObservation({
                    status: 'final',
                    category: [{
                            coding: [{
                                    system: 'http://terminology.hl7.org/CodeSystem/observation-category',
                                    code: 'vital-signs',
                                    display: 'Vital Signs',
                                }],
                        }],
                    code: {
                        coding: [{
                                system: 'http://loinc.org',
                                code: '8310-5',
                                display: 'Body temperature',
                            }],
                    },
                    subject: { reference: `Patient/${patientId}` },
                    encounter: { reference: `Encounter/${encounterId}` },
                    valueQuantity: {
                        value: vitals.temperature,
                        unit: '°F',
                        system: 'http://unitsofmeasure.org',
                        code: '[degF]',
                    },
                });
                observations.push(tempObservation);
            }
            // Blood Pressure
            if (vitals.bloodPressureSystolic && vitals.bloodPressureDiastolic) {
                const bpObservation = await this.createObservation({
                    status: 'final',
                    category: [{
                            coding: [{
                                    system: 'http://terminology.hl7.org/CodeSystem/observation-category',
                                    code: 'vital-signs',
                                    display: 'Vital Signs',
                                }],
                        }],
                    code: {
                        coding: [{
                                system: 'http://loinc.org',
                                code: '85354-9',
                                display: 'Blood pressure panel with all children optional',
                            }],
                    },
                    subject: { reference: `Patient/${patientId}` },
                    encounter: { reference: `Encounter/${encounterId}` },
                    component: [
                        {
                            code: {
                                coding: [{
                                        system: 'http://loinc.org',
                                        code: '8480-6',
                                        display: 'Systolic blood pressure',
                                    }],
                            },
                            valueQuantity: {
                                value: vitals.bloodPressureSystolic,
                                unit: 'mmHg',
                                system: 'http://unitsofmeasure.org',
                                code: 'mm[Hg]',
                            },
                        },
                        {
                            code: {
                                coding: [{
                                        system: 'http://loinc.org',
                                        code: '8462-4',
                                        display: 'Diastolic blood pressure',
                                    }],
                            },
                            valueQuantity: {
                                value: vitals.bloodPressureDiastolic,
                                unit: 'mmHg',
                                system: 'http://unitsofmeasure.org',
                                code: 'mm[Hg]',
                            },
                        },
                    ],
                });
                observations.push(bpObservation);
            }
            // Heart Rate
            if (vitals.heartRate) {
                const hrObservation = await this.createObservation({
                    status: 'final',
                    category: [{
                            coding: [{
                                    system: 'http://terminology.hl7.org/CodeSystem/observation-category',
                                    code: 'vital-signs',
                                    display: 'Vital Signs',
                                }],
                        }],
                    code: {
                        coding: [{
                                system: 'http://loinc.org',
                                code: '8867-4',
                                display: 'Heart rate',
                            }],
                    },
                    subject: { reference: `Patient/${patientId}` },
                    encounter: { reference: `Encounter/${encounterId}` },
                    valueQuantity: {
                        value: vitals.heartRate,
                        unit: 'beats/min',
                        system: 'http://unitsofmeasure.org',
                        code: '/min',
                    },
                });
                observations.push(hrObservation);
            }
            logger_1.default.fhir('Vital signs created successfully', {
                patientId,
                encounterId,
                vitalsCount: observations.length,
            });
            return observations;
        }
        catch (error) {
            logger_1.default.error('Failed to create vital signs:', error);
            throw error;
        }
    }
    // ===============================
    // MEDICATION RESOURCES
    // ===============================
    /**
     * Create a medication request (prescription)
     */
    async createMedicationRequest(medicationRequestData) {
        try {
            const medicationRequest = {
                resourceType: 'MedicationRequest',
                status: medicationRequestData.status || 'active',
                intent: medicationRequestData.intent || 'order',
                category: medicationRequestData.category || [],
                priority: medicationRequestData.priority || 'routine',
                medicationCodeableConcept: medicationRequestData.medicationCodeableConcept,
                medicationReference: medicationRequestData.medicationReference,
                subject: medicationRequestData.subject || { reference: '' },
                encounter: medicationRequestData.encounter,
                authoredOn: medicationRequestData.authoredOn || new Date().toISOString(),
                requester: medicationRequestData.requester,
                reasonCode: medicationRequestData.reasonCode || [],
                dosageInstruction: medicationRequestData.dosageInstruction || [],
                dispenseRequest: medicationRequestData.dispenseRequest,
                identifier: [
                    ...(medicationRequestData.identifier || []),
                    {
                        system: 'http://omnicare.com/medication-request-id',
                        value: `MR${Date.now()}`,
                    },
                ],
            };
            const result = await medplum_service_1.medplumService.createResource(medicationRequest);
            logger_1.default.fhir('Medication request created successfully', { medicationRequestId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to create medication request:', error);
            throw error;
        }
    }
    // ===============================
    // SERVICE REQUEST RESOURCES
    // ===============================
    /**
     * Create a service request (order)
     */
    async createServiceRequest(serviceRequestData) {
        try {
            const serviceRequest = {
                resourceType: 'ServiceRequest',
                status: serviceRequestData.status || 'active',
                intent: serviceRequestData.intent || 'order',
                category: serviceRequestData.category || [],
                priority: serviceRequestData.priority || 'routine',
                code: serviceRequestData.code || {
                    coding: [{
                            system: 'http://snomed.info/sct',
                            code: '15220000',
                            display: 'Laboratory test',
                        }],
                },
                subject: serviceRequestData.subject || { reference: '' },
                encounter: serviceRequestData.encounter,
                occurrenceDateTime: serviceRequestData.occurrenceDateTime,
                authoredOn: serviceRequestData.authoredOn || new Date().toISOString(),
                requester: serviceRequestData.requester,
                reasonCode: serviceRequestData.reasonCode || [],
                identifier: [
                    ...(serviceRequestData.identifier || []),
                    {
                        system: 'http://omnicare.com/service-request-id',
                        value: `SR${Date.now()}`,
                    },
                ],
            };
            const result = await medplum_service_1.medplumService.createResource(serviceRequest);
            logger_1.default.fhir('Service request created successfully', { serviceRequestId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to create service request:', error);
            throw error;
        }
    }
    // ===============================
    // DIAGNOSTIC REPORT RESOURCES
    // ===============================
    /**
     * Create a diagnostic report
     */
    async createDiagnosticReport(diagnosticReportData) {
        try {
            const diagnosticReport = {
                resourceType: 'DiagnosticReport',
                status: diagnosticReportData.status || 'final',
                category: diagnosticReportData.category || [{
                        coding: [{
                                system: 'http://terminology.hl7.org/CodeSystem/v2-0074',
                                code: 'LAB',
                                display: 'Laboratory',
                            }],
                    }],
                code: diagnosticReportData.code || {
                    coding: [{
                            system: 'http://loinc.org',
                            code: '11502-2',
                            display: 'Laboratory report',
                        }],
                },
                subject: diagnosticReportData.subject || { reference: '' },
                encounter: diagnosticReportData.encounter,
                effectiveDateTime: diagnosticReportData.effectiveDateTime || new Date().toISOString(),
                issued: diagnosticReportData.issued || new Date().toISOString(),
                performer: diagnosticReportData.performer || [],
                result: diagnosticReportData.result || [],
                conclusion: diagnosticReportData.conclusion,
                identifier: [
                    ...(diagnosticReportData.identifier || []),
                    {
                        system: 'http://omnicare.com/diagnostic-report-id',
                        value: `DR${Date.now()}`,
                    },
                ],
            };
            const result = await medplum_service_1.medplumService.createResource(diagnosticReport);
            logger_1.default.fhir('Diagnostic report created successfully', { diagnosticReportId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to create diagnostic report:', error);
            throw error;
        }
    }
    // ===============================
    // CARE PLAN RESOURCES
    // ===============================
    /**
     * Create a care plan
     */
    async createCarePlan(carePlanData) {
        try {
            const carePlan = {
                resourceType: 'CarePlan',
                status: carePlanData.status || 'active',
                intent: carePlanData.intent || 'plan',
                category: carePlanData.category || [{
                        coding: [{
                                system: 'http://snomed.info/sct',
                                code: '734163000',
                                display: 'Care plan',
                            }],
                    }],
                title: carePlanData.title,
                description: carePlanData.description,
                subject: carePlanData.subject || { reference: '' },
                encounter: carePlanData.encounter,
                period: carePlanData.period,
                created: carePlanData.created || new Date().toISOString(),
                author: carePlanData.author,
                contributor: carePlanData.contributor || [],
                careTeam: carePlanData.careTeam || [],
                addresses: carePlanData.addresses || [],
                goal: carePlanData.goal || [],
                activity: carePlanData.activity || [],
                identifier: [
                    ...(carePlanData.identifier || []),
                    {
                        system: 'http://omnicare.com/care-plan-id',
                        value: `CP${Date.now()}`,
                    },
                ],
            };
            const result = await medplum_service_1.medplumService.createResource(carePlan);
            logger_1.default.fhir('Care plan created successfully', { carePlanId: result.id });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to create care plan:', error);
            throw error;
        }
    }
    // ===============================
    // UTILITY METHODS
    // ===============================
    /**
     * Validate a FHIR resource
     */
    async validateResource(resource) {
        try {
            const result = await medplum_service_1.medplumService.validateResource(resource);
            // Parse validation results
            const validationResult = {
                valid: !result.issue || result.issue.length === 0,
                errors: [],
                warnings: [],
            };
            if (result.issue) {
                result.issue.forEach((issue) => {
                    if (issue.severity === 'error' || issue.severity === 'fatal') {
                        validationResult.errors.push({
                            path: issue.expression?.[0] || issue.location?.[0] || '',
                            message: issue.diagnostics || issue.details?.text || 'Validation error',
                            code: issue.code || 'unknown',
                            severity: issue.severity,
                        });
                    }
                    else {
                        validationResult.warnings.push({
                            path: issue.expression?.[0] || issue.location?.[0] || '',
                            message: issue.diagnostics || issue.details?.text || 'Validation warning',
                            code: issue.code || 'unknown',
                            severity: issue.severity,
                        });
                    }
                });
            }
            logger_1.default.fhir('Resource validation completed', {
                valid: validationResult.valid,
                errors: validationResult.errors.length,
                warnings: validationResult.warnings.length,
            });
            return validationResult;
        }
        catch (error) {
            logger_1.default.error('Failed to validate resource:', error);
            throw error;
        }
    }
    /**
     * Get all resources for a patient
     */
    async getPatientEverything(patientId) {
        try {
            const result = await medplum_service_1.medplumService.searchResources('Patient', {
                _id: patientId,
                _include: '*',
                _revinclude: '*',
            });
            logger_1.default.fhir('Patient everything retrieved', {
                patientId,
                resourceCount: result.entry?.length || 0,
            });
            return result;
        }
        catch (error) {
            logger_1.default.error('Failed to get patient everything:', error);
            throw error;
        }
    }
}
exports.FHIRResourcesService = FHIRResourcesService;
// Export singleton instance
exports.fhirResourcesService = new FHIRResourcesService();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3JvZHJpZ28vY2xhdWRlLXByb2plY3RzL09tbmlDYXJlL2JhY2tlbmQvc3JjL3NlcnZpY2VzL2ZoaXItcmVzb3VyY2VzLnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBc0JBLHVEQUFtRDtBQVNuRCw0REFBb0M7QUFFcEM7Ozs7R0FJRztBQUNILE1BQWEsb0JBQW9CO0lBRS9CLGtDQUFrQztJQUNsQyxvQkFBb0I7SUFDcEIsa0NBQWtDO0lBRWxDOztPQUVHO0lBQ0gsS0FBSyxDQUFDLGFBQWEsQ0FBQyxXQUFxQztRQUN2RCxJQUFJLENBQUM7WUFDSCxNQUFNLE9BQU8sR0FBWTtnQkFDdkIsWUFBWSxFQUFFLFNBQVM7Z0JBQ3ZCLE1BQU0sRUFBRSxJQUFJO2dCQUNaLElBQUksRUFBRSxXQUFXLENBQUMsSUFBSSxJQUFJLEVBQUU7Z0JBQzVCLE1BQU0sRUFBRSxXQUFXLENBQUMsTUFBTTtnQkFDMUIsU0FBUyxFQUFFLFdBQVcsQ0FBQyxTQUFTO2dCQUNoQyxPQUFPLEVBQUUsV0FBVyxDQUFDLE9BQU8sSUFBSSxFQUFFO2dCQUNsQyxPQUFPLEVBQUUsV0FBVyxDQUFDLE9BQU8sSUFBSSxFQUFFO2dCQUNsQyxVQUFVLEVBQUU7b0JBQ1YsR0FBRyxDQUFDLFdBQVcsQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDO29CQUNqQzt3QkFDRSxNQUFNLEVBQUUsZ0NBQWdDO3dCQUN4QyxLQUFLLEVBQUUsV0FBVyxDQUFDLGlCQUFpQixJQUFJLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFO3FCQUN6RDtpQkFDRjtnQkFDRCxPQUFPLEVBQUUsV0FBVyxDQUFDLE9BQU8sSUFBSSxFQUFFO2dCQUNsQyxhQUFhLEVBQUUsV0FBVyxDQUFDLGFBQWEsSUFBSSxFQUFFO2dCQUM5QyxtQkFBbUIsRUFBRSxXQUFXLENBQUMsbUJBQW1CLElBQUksRUFBRTtnQkFDMUQsb0JBQW9CLEVBQUUsV0FBVyxDQUFDLG9CQUFvQjtnQkFDdEQsU0FBUyxFQUFFO29CQUNULEdBQUcsQ0FBQyxXQUFX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RSxDQUFDO1lBQ2YsZ0JBQU0sQ0FBQyxLQUFLLENBQUMsOEJBQThCLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDcEQsTUFBTSxLQUFLLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLG9CQUFvQixDQUFDLFNBQWlCO1FBQzFDLElBQUksQ0FBQztZQUNILE1BQU0sTUFBTSxHQUFHLE1BQU0sZ0NBQWMsQ0FBQyxlQUFlLENBQUMsU0FBUyxFQUFFO2dCQUM3RCxHQUFHLEVBQUUsU0FBUztnQkFDZCxRQUFRLEVBQUUsR0FBRztnQkFDYixXQUFXLEVBQUUsR0FBRzthQUNqQixDQUFDLENBQUM7WUFFSCxnQkFBTSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsRUFBRTtnQkFDMUMsU0FBUztnQkFDVCxhQUFhLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRSxNQUFNLElBQUksQ0FBQzthQUN6QyxDQUFDLENBQUM7WUFFSCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLGdCQUFNLENBQUMsS0FBSyxDQUFDLG1DQUFtQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3pELE1BQU0sS0FBSyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7Q0FDRjtBQWpyQkQsb0RBaXJCQztBQUVELDRCQUE0QjtBQUNmLFFBQUEsb0JBQW9CLEdBQUcsSUFBSSxvQkFBb0IsRUFBRSxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2RyaWdvL2NsYXVkZS1wcm9qZWN0cy9PbW5pQ2FyZS9iYWNrZW5kL3NyYy9zZXJ2aWNlcy9maGlyLXJlc291cmNlcy5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFBhdGllbnQsXG4gIFByYWN0aXRpb25lcixcbiAgT3JnYW5pemF0aW9uLFxuICBMb2NhdGlvbixcbiAgRW5jb3VudGVyLFxuICBPYnNlcnZhdGlvbixcbiAgTWVkaWNhdGlvbixcbiAgTWVkaWNhdGlvblJlcXVlc3QsXG4gIFNlcnZpY2VSZXF1ZXN0LFxuICBEaWFnbm9zdGljUmVwb3J0LFxuICBDYXJlUGxhbixcbiAgQ29tbXVuaWNhdGlvbixcbiAgVGFzayxcbiAgRG9jdW1lbnRSZWZlcmVuY2UsXG4gIENvbmRpdGlvbixcbiAgUHJvY2VkdXJlLFxuICBBbGxlcmd5SW50b2xlcmFuY2UsXG4gIEltbXVuaXphdGlvbixcbiAgQnVuZGxlLFxufSBmcm9tICdAbWVkcGx1bS9maGlydHlwZXMnO1xuXG5pbXBvcnQgeyBtZWRwbHVtU2VydmljZSB9IGZyb20gJy4vbWVkcGx1bS5zZXJ2aWNlJztcblxuaW1wb3J0IHsgXG4gIE9tbmlDYXJlUGF0aWVudCwgXG4gIE9tbmlDYXJlRW5jb3VudGVyLCBcbiAgT21uaUNhcmVPYnNlcnZhdGlvbixcbiAgRkhJUlNlYXJjaFBhcmFtcyxcbiAgVmFsaWRhdGlvblJlc3VsdCxcbn0gZnJvbSAnQC90eXBlcy9maGlyJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnQC91dGlscy9sb2dnZXInO1xuXG4vKipcbiAqIEZISVIgUmVzb3VyY2VzIFNlcnZpY2VcbiAqIEltcGxlbWVudHMgRkhJUiBSNCByZXNvdXJjZSBtYW5hZ2VtZW50IGZvciBhbGwgY2xpbmljYWwgZGF0YSB0eXBlc1xuICogdXNlZCBpbiB0aGUgT21uaUNhcmUgRU1SIHN5c3RlbVxuICovXG5leHBvcnQgY2xhc3MgRkhJUlJlc291cmNlc1NlcnZpY2Uge1xuICBcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBQQVRJRU5UIFJFU09VUkNFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBwYXRpZW50IHJlY29yZFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlUGF0aWVudChwYXRpZW50RGF0YTogUGFydGlhbDxPbW5pQ2FyZVBhdGllbnQ+KTogUHJvbWlzZTxQYXRpZW50PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGllbnQ6IFBhdGllbnQgPSB7XG4gICAgICAgIHJlc291cmNlVHlwZTogJ1BhdGllbnQnLFxuICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgIG5hbWU6IHBhdGllbnREYXRhLm5hbWUgfHwgW10sXG4gICAgICAgIGdlbmRlcjogcGF0aWVudERhdGEuZ2VuZGVyLFxuICAgICAgICBiaXJ0aERhdGU6IHBhdGllbnREYXRhLmJpcnRoRGF0ZSxcbiAgICAgICAgYWRkcmVzczogcGF0aWVudERhdGEuYWRkcmVzcyB8fCBbXSxcbiAgICAgICAgdGVsZWNvbTogcGF0aWVudERhdGEudGVsZWNvbSB8fCBbXSxcbiAgICAgICAgaWRlbnRpZmllcjogW1xuICAgICAgICAgIC4uLihwYXRpZW50RGF0YS5pZGVudGlmaWVyIHx8IFtdKSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzeXN0ZW06ICdodHRwOi8vb21uaWNhcmUuY29tL3BhdGllbnQtaWQnLFxuICAgICAgICAgICAgdmFsdWU6IHBhdGllbnREYXRhLm9tbmljYXJlUGF0aWVudElkIHx8IGBQJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgY29udGFjdDogcGF0aWVudERhdGEuY29udGFjdCB8fCBbXSxcbiAgICAgICAgY29tbXVuaWNhdGlvbjogcGF0aWVudERhdGEuY29tbXVuaWNhdGlvbiB8fCBbXSxcbiAgICAgICAgZ2VuZXJhbFByYWN0aXRpb25lcjogcGF0aWVudERhdGEuZ2VuZXJhbFByYWN0aXRpb25lciB8fCBbXSxcbiAgICAgICAgbWFuYWdpbmdPcmdhbml6YXRpb246IHBhdGllbnREYXRhLm1hbmFnaW5nT3JnYW5pemF0aW9uLFxuICAgICAgICBleHRlbnNpb246IFtcbiAgICAgICAgICAuLi4ocGF0aWVudERhdGEuZXh0ZW5zaW9uIHx8IFtdKSxcbiAgICAgICAgICAvLyBBZGQgT21uaUNhcmUtc3BlY2lmaWMgZXh0ZW5zaW9uc1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9vbW5pY2FyZS5jb20vZmhpci9TdHJ1Y3R1cmVEZWZpbml0aW9uL3JlZ2lzdHJhdGlvbi1kYXRlJyxcbiAgICAgICAgICAgIHZhbHVlRGF0ZVRpbWU6IHBhdGllbnREYXRhLnJlZ2lzdHJhdGlvbkRhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL29tbmljYXJlLmNvbS9maGlyL1N0cnVjdHVyZURlZmluaXRpb24vcHJlZmVycmVkLWxhbmd1YWdlJyxcbiAgICAgICAgICAgIHZhbHVlU3RyaW5nOiBwYXRpZW50RGF0YS5wcmVmZXJyZWRMYW5ndWFnZSB8fCAnZW4nLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtZWRwbHVtU2VydmljZS5jcmVhdGVSZXNvdXJjZShwYXRpZW50KTtcbiAgICAgIGxvZ2dlci5maGlyKCdQYXRpZW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBwYXRpZW50SWQ6IHJlc3VsdC5pZCB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBwYXRpZW50OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWFyY2ggZm9yIHBhdGllbnRzIHdpdGggdmFyaW91cyBjcml0ZXJpYVxuICAgKi9cbiAgYXN5bmMgc2VhcmNoUGF0aWVudHMoc2VhcmNoUGFyYW1zOiBGSElSU2VhcmNoUGFyYW1zKTogUHJvbWlzZTxCdW5kbGU8UGF0aWVudD4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWVkcGx1bVNlcnZpY2Uuc2VhcmNoUmVzb3VyY2VzPFBhdGllbnQ+KCdQYXRpZW50Jywgc2VhcmNoUGFyYW1zKTtcbiAgICAgIGxvZ2dlci5maGlyKCdQYXRpZW50IHNlYXJjaCBjb21wbGV0ZWQnLCB7IFxuICAgICAgICByZXN1bHRDb3VudDogcmVzdWx0LmVudHJ5Py5sZW5ndGggfHwgMCxcbiAgICAgICAgdG90YWw6IHJlc3VsdC50b3RhbCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc2VhcmNoIHBhdGllbnRzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGF0aWVudCBieSBJRFxuICAgKi9cbiAgYXN5bmMgZ2V0UGF0aWVudChwYXRpZW50SWQ6IHN0cmluZyk6IFByb21pc2U8UGF0aWVudD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtZWRwbHVtU2VydmljZS5yZWFkUmVzb3VyY2U8UGF0aWVudD4oJ1BhdGllbnQnLCBwYXRpZW50SWQpO1xuICAgICAgbG9nZ2VyLmZoaXIoJ1BhdGllbnQgcmV0cmlldmVkJywgeyBwYXRpZW50SWQgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgcGF0aWVudDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHBhdGllbnQgaW5mb3JtYXRpb25cbiAgICovXG4gIGFzeW5jIHVwZGF0ZVBhdGllbnQocGF0aWVudDogUGF0aWVudCk6IFByb21pc2U8UGF0aWVudD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtZWRwbHVtU2VydmljZS51cGRhdGVSZXNvdXJjZShwYXRpZW50KTtcbiAgICAgIGxvZ2dlci5maGlyKCdQYXRpZW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBwYXRpZW50SWQ6IHJlc3VsdC5pZCB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBwYXRpZW50OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gUFJBQ1RJVElPTkVSIFJFU09VUkNFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBwcmFjdGl0aW9uZXIgcmVjb3JkXG4gICAqL1xuICBhc3luYyBjcmVhdGVQcmFjdGl0aW9uZXIocHJhY3RpdGlvbmVyRGF0YTogUGFydGlhbDxQcmFjdGl0aW9uZXI+KTogUHJvbWlzZTxQcmFjdGl0aW9uZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJhY3RpdGlvbmVyOiBQcmFjdGl0aW9uZXIgPSB7XG4gICAgICAgIHJlc291cmNlVHlwZTogJ1ByYWN0aXRpb25lcicsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgbmFtZTogcHJhY3RpdGlvbmVyRGF0YS5uYW1lIHx8IFtdLFxuICAgICAgICBpZGVudGlmaWVyOiBbXG4gICAgICAgICAgLi4uKHByYWN0aXRpb25lckRhdGEuaWRlbnRpZmllciB8fCBbXSksXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL29tbmljYXJlLmNvbS9wcmFjdGl0aW9uZXItaWQnLFxuICAgICAgICAgICAgdmFsdWU6IGBQUiR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHRlbGVjb206IHByYWN0aXRpb25lckRhdGEudGVsZWNvbSB8fCBbXSxcbiAgICAgICAgYWRkcmVzczogcHJhY3RpdGlvbmVyRGF0YS5hZGRyZXNzIHx8IFtdLFxuICAgICAgICBnZW5kZXI6IHByYWN0aXRpb25lckRhdGEuZ2VuZGVyLFxuICAgICAgICBiaXJ0aERhdGU6IHByYWN0aXRpb25lckRhdGEuYmlydGhEYXRlLFxuICAgICAgICBxdWFsaWZpY2F0aW9uOiBwcmFjdGl0aW9uZXJEYXRhLnF1YWxpZmljYXRpb24gfHwgW10sXG4gICAgICAgIGNvbW11bmljYXRpb246IHByYWN0aXRpb25lckRhdGEuY29tbXVuaWNhdGlvbiB8fCBbXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1lZHBsdW1TZXJ2aWNlLmNyZWF0ZVJlc291cmNlKHByYWN0aXRpb25lcik7XG4gICAgICBsb2dnZXIuZmhpcignUHJhY3RpdGlvbmVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBwcmFjdGl0aW9uZXJJZDogcmVzdWx0LmlkIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHByYWN0aXRpb25lcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VhcmNoIGZvciBwcmFjdGl0aW9uZXJzXG4gICAqL1xuICBhc3luYyBzZWFyY2hQcmFjdGl0aW9uZXJzKHNlYXJjaFBhcmFtczogRkhJUlNlYXJjaFBhcmFtcyk6IFByb21pc2U8QnVuZGxlPFByYWN0aXRpb25lcj4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWVkcGx1bVNlcnZpY2Uuc2VhcmNoUmVzb3VyY2VzPFByYWN0aXRpb25lcj4oJ1ByYWN0aXRpb25lcicsIHNlYXJjaFBhcmFtcyk7XG4gICAgICBsb2dnZXIuZmhpcignUHJhY3RpdGlvbmVyIHNlYXJjaCBjb21wbGV0ZWQnLCB7IFxuICAgICAgICByZXN1bHRDb3VudDogcmVzdWx0LmVudHJ5Py5sZW5ndGggfHwgMCBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc2VhcmNoIHByYWN0aXRpb25lcnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBFTkNPVU5URVIgUkVTT1VSQ0VTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGVuY291bnRlclxuICAgKi9cbiAgYXN5bmMgY3JlYXRlRW5jb3VudGVyKGVuY291bnRlckRhdGE6IFBhcnRpYWw8T21uaUNhcmVFbmNvdW50ZXI+KTogUHJvbWlzZTxFbmNvdW50ZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZW5jb3VudGVyOiBFbmNvdW50ZXIgPSB7XG4gICAgICAgIHJlc291cmNlVHlwZTogJ0VuY291bnRlcicsXG4gICAgICAgIHN0YXR1czogZW5jb3VudGVyRGF0YS5zdGF0dXMgfHwgJ3BsYW5uZWQnLFxuICAgICAgICBjbGFzczogZW5jb3VudGVyRGF0YS5jbGFzcyB8fCB7XG4gICAgICAgICAgc3lzdGVtOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS92My1BY3RDb2RlJyxcbiAgICAgICAgICBjb2RlOiAnQU1CJyxcbiAgICAgICAgICBkaXNwbGF5OiAnQW1idWxhdG9yeScsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IGVuY291bnRlckRhdGEudHlwZSB8fCBbXSxcbiAgICAgICAgc3ViamVjdDogZW5jb3VudGVyRGF0YS5zdWJqZWN0IHx8IHsgcmVmZXJlbmNlOiAnJyB9LFxuICAgICAgICBwYXJ0aWNpcGFudDogZW5jb3VudGVyRGF0YS5wYXJ0aWNpcGFudCB8fCBbXSxcbiAgICAgICAgcGVyaW9kOiBlbmNvdW50ZXJEYXRhLnBlcmlvZCxcbiAgICAgICAgcmVhc29uQ29kZTogZW5jb3VudGVyRGF0YS5yZWFzb25Db2RlIHx8IFtdLFxuICAgICAgICBzZXJ2aWNlUHJvdmlkZXI6IGVuY291bnRlckRhdGEuc2VydmljZVByb3ZpZGVyLFxuICAgICAgICBpZGVudGlmaWVyOiBbXG4gICAgICAgICAgLi4uKGVuY291bnRlckRhdGEuaWRlbnRpZmllciB8fCBbXSksXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL29tbmljYXJlLmNvbS9lbmNvdW50ZXItaWQnLFxuICAgICAgICAgICAgdmFsdWU6IGVuY291bnRlckRhdGEub21uaWNhcmVFbmNvdW50ZXJJZCB8fCBgRSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGV4dGVuc2lvbjogW1xuICAgICAgICAgIC4uLihlbmNvdW50ZXJEYXRhLmV4dGVuc2lvbiB8fCBbXSksXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL29tbmljYXJlLmNvbS9maGlyL1N0cnVjdHVyZURlZmluaXRpb24vYXBwb2ludG1lbnQtdHlwZScsXG4gICAgICAgICAgICB2YWx1ZVN0cmluZzogZW5jb3VudGVyRGF0YS5hcHBvaW50bWVudFR5cGUgfHwgJ3JvdXRpbmUnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL29tbmljYXJlLmNvbS9maGlyL1N0cnVjdHVyZURlZmluaXRpb24vY2hpZWYtY29tcGxhaW50JyxcbiAgICAgICAgICAgIHZhbHVlU3RyaW5nOiBlbmNvdW50ZXJEYXRhLmNoaWVmQ29tcGxhaW50IHx8ICcnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtZWRwbHVtU2VydmljZS5jcmVhdGVSZXNvdXJjZShlbmNvdW50ZXIpO1xuICAgICAgbG9nZ2VyLmZoaXIoJ0VuY291bnRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHsgZW5jb3VudGVySWQ6IHJlc3VsdC5pZCB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBlbmNvdW50ZXI6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgZW5jb3VudGVyc1xuICAgKi9cbiAgYXN5bmMgc2VhcmNoRW5jb3VudGVycyhzZWFyY2hQYXJhbXM6IEZISVJTZWFyY2hQYXJhbXMpOiBQcm9taXNlPEJ1bmRsZTxFbmNvdW50ZXI+PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1lZHBsdW1TZXJ2aWNlLnNlYXJjaFJlc291cmNlczxFbmNvdW50ZXI+KCdFbmNvdW50ZXInLCBzZWFyY2hQYXJhbXMpO1xuICAgICAgbG9nZ2VyLmZoaXIoJ0VuY291bnRlciBzZWFyY2ggY29tcGxldGVkJywgeyBcbiAgICAgICAgcmVzdWx0Q291bnQ6IHJlc3VsdC5lbnRyeT8ubGVuZ3RoIHx8IDAgXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNlYXJjaCBlbmNvdW50ZXJzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gT0JTRVJWQVRJT04gUkVTT1VSQ0VTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IG9ic2VydmF0aW9uXG4gICAqL1xuICBhc3luYyBjcmVhdGVPYnNlcnZhdGlvbihvYnNlcnZhdGlvbkRhdGE6IFBhcnRpYWw8T21uaUNhcmVPYnNlcnZhdGlvbj4pOiBQcm9taXNlPE9ic2VydmF0aW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9ic2VydmF0aW9uOiBPYnNlcnZhdGlvbiA9IHtcbiAgICAgICAgcmVzb3VyY2VUeXBlOiAnT2JzZXJ2YXRpb24nLFxuICAgICAgICBzdGF0dXM6IG9ic2VydmF0aW9uRGF0YS5zdGF0dXMgfHwgJ2ZpbmFsJyxcbiAgICAgICAgY2F0ZWdvcnk6IG9ic2VydmF0aW9uRGF0YS5jYXRlZ29yeSB8fCBbe1xuICAgICAgICAgIGNvZGluZzogW3tcbiAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vb2JzZXJ2YXRpb24tY2F0ZWdvcnknLFxuICAgICAgICAgICAgY29kZTogJ3ZpdGFsLXNpZ25zJyxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdWaXRhbCBTaWducycsXG4gICAgICAgICAgfV0sXG4gICAgICAgIH1dLFxuICAgICAgICBjb2RlOiBvYnNlcnZhdGlvbkRhdGEuY29kZSB8fCB7XG4gICAgICAgICAgY29kaW5nOiBbe1xuICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL2xvaW5jLm9yZycsXG4gICAgICAgICAgICBjb2RlOiAnODMxMC01JyxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdCb2R5IHRlbXBlcmF0dXJlJyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfSxcbiAgICAgICAgc3ViamVjdDogb2JzZXJ2YXRpb25EYXRhLnN1YmplY3QgfHwgeyByZWZlcmVuY2U6ICcnIH0sXG4gICAgICAgIGVuY291bnRlcjogb2JzZXJ2YXRpb25EYXRhLmVuY291bnRlcixcbiAgICAgICAgZWZmZWN0aXZlRGF0ZVRpbWU6IG9ic2VydmF0aW9uRGF0YS5lZmZlY3RpdmVEYXRlVGltZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHBlcmZvcm1lcjogb2JzZXJ2YXRpb25EYXRhLnBlcmZvcm1lciB8fCBbXSxcbiAgICAgICAgdmFsdWVRdWFudGl0eTogb2JzZXJ2YXRpb25EYXRhLnZhbHVlUXVhbnRpdHksXG4gICAgICAgIHZhbHVlQ29kZWFibGVDb25jZXB0OiBvYnNlcnZhdGlvbkRhdGEudmFsdWVDb2RlYWJsZUNvbmNlcHQsXG4gICAgICAgIHZhbHVlU3RyaW5nOiBvYnNlcnZhdGlvbkRhdGEudmFsdWVTdHJpbmcsXG4gICAgICAgIHZhbHVlQm9vbGVhbjogb2JzZXJ2YXRpb25EYXRhLnZhbHVlQm9vbGVhbixcbiAgICAgICAgaWRlbnRpZmllcjogW1xuICAgICAgICAgIC4uLihvYnNlcnZhdGlvbkRhdGEuaWRlbnRpZmllciB8fCBbXSksXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL29tbmljYXJlLmNvbS9vYnNlcnZhdGlvbi1pZCcsXG4gICAgICAgICAgICB2YWx1ZTogb2JzZXJ2YXRpb25EYXRhLm9tbmljYXJlT2JzZXJ2YXRpb25JZCB8fCBgTyR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGV4dGVuc2lvbjogW1xuICAgICAgICAgIC4uLihvYnNlcnZhdGlvbkRhdGEuZXh0ZW5zaW9uIHx8IFtdKSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vb21uaWNhcmUuY29tL2ZoaXIvU3RydWN0dXJlRGVmaW5pdGlvbi9kZXZpY2UtdXNlZCcsXG4gICAgICAgICAgICB2YWx1ZVN0cmluZzogb2JzZXJ2YXRpb25EYXRhLmRldmljZVVzZWQgfHwgJycsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1lZHBsdW1TZXJ2aWNlLmNyZWF0ZVJlc291cmNlKG9ic2VydmF0aW9uKTtcbiAgICAgIGxvZ2dlci5maGlyKCdPYnNlcnZhdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHsgb2JzZXJ2YXRpb25JZDogcmVzdWx0LmlkIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIG9ic2VydmF0aW9uOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgdml0YWwgc2lnbnMgb2JzZXJ2YXRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVWaXRhbFNpZ25zKFxuICAgIHBhdGllbnRJZDogc3RyaW5nLFxuICAgIGVuY291bnRlcklkOiBzdHJpbmcsXG4gICAgdml0YWxzOiB7XG4gICAgICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbiAgICAgIGJsb29kUHJlc3N1cmVTeXN0b2xpYz86IG51bWJlcjtcbiAgICAgIGJsb29kUHJlc3N1cmVEaWFzdG9saWM/OiBudW1iZXI7XG4gICAgICBoZWFydFJhdGU/OiBudW1iZXI7XG4gICAgICByZXNwaXJhdG9yeVJhdGU/OiBudW1iZXI7XG4gICAgICBveHlnZW5TYXR1cmF0aW9uPzogbnVtYmVyO1xuICAgICAgd2VpZ2h0PzogbnVtYmVyO1xuICAgICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIH1cbiAgKTogUHJvbWlzZTxPYnNlcnZhdGlvbltdPiB7XG4gICAgY29uc3Qgb2JzZXJ2YXRpb25zOiBPYnNlcnZhdGlvbltdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgLy8gVGVtcGVyYXR1cmVcbiAgICAgIGlmICh2aXRhbHMudGVtcGVyYXR1cmUpIHtcbiAgICAgICAgY29uc3QgdGVtcE9ic2VydmF0aW9uID0gYXdhaXQgdGhpcy5jcmVhdGVPYnNlcnZhdGlvbih7XG4gICAgICAgICAgc3RhdHVzOiAnZmluYWwnLFxuICAgICAgICAgIGNhdGVnb3J5OiBbe1xuICAgICAgICAgICAgY29kaW5nOiBbe1xuICAgICAgICAgICAgICBzeXN0ZW06ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL29ic2VydmF0aW9uLWNhdGVnb3J5JyxcbiAgICAgICAgICAgICAgY29kZTogJ3ZpdGFsLXNpZ25zJyxcbiAgICAgICAgICAgICAgZGlzcGxheTogJ1ZpdGFsIFNpZ25zJyxcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgIH1dLFxuICAgICAgICAgIGNvZGU6IHtcbiAgICAgICAgICAgIGNvZGluZzogW3tcbiAgICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL2xvaW5jLm9yZycsXG4gICAgICAgICAgICAgIGNvZGU6ICc4MzEwLTUnLFxuICAgICAgICAgICAgICBkaXNwbGF5OiAnQm9keSB0ZW1wZXJhdHVyZScsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1YmplY3Q6IHsgcmVmZXJlbmNlOiBgUGF0aWVudC8ke3BhdGllbnRJZH1gIH0sXG4gICAgICAgICAgZW5jb3VudGVyOiB7IHJlZmVyZW5jZTogYEVuY291bnRlci8ke2VuY291bnRlcklkfWAgfSxcbiAgICAgICAgICB2YWx1ZVF1YW50aXR5OiB7XG4gICAgICAgICAgICB2YWx1ZTogdml0YWxzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgdW5pdDogJ8KwRicsXG4gICAgICAgICAgICBzeXN0ZW06ICdodHRwOi8vdW5pdHNvZm1lYXN1cmUub3JnJyxcbiAgICAgICAgICAgIGNvZGU6ICdbZGVnRl0nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBvYnNlcnZhdGlvbnMucHVzaCh0ZW1wT2JzZXJ2YXRpb24pO1xuICAgICAgfVxuXG4gICAgICAvLyBCbG9vZCBQcmVzc3VyZVxuICAgICAgaWYgKHZpdGFscy5ibG9vZFByZXNzdXJlU3lzdG9saWMgJiYgdml0YWxzLmJsb29kUHJlc3N1cmVEaWFzdG9saWMpIHtcbiAgICAgICAgY29uc3QgYnBPYnNlcnZhdGlvbiA9IGF3YWl0IHRoaXMuY3JlYXRlT2JzZXJ2YXRpb24oe1xuICAgICAgICAgIHN0YXR1czogJ2ZpbmFsJyxcbiAgICAgICAgICBjYXRlZ29yeTogW3tcbiAgICAgICAgICAgIGNvZGluZzogW3tcbiAgICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9vYnNlcnZhdGlvbi1jYXRlZ29yeScsXG4gICAgICAgICAgICAgIGNvZGU6ICd2aXRhbC1zaWducycsXG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdWaXRhbCBTaWducycsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICB9XSxcbiAgICAgICAgICBjb2RlOiB7XG4gICAgICAgICAgICBjb2Rpbmc6IFt7XG4gICAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly9sb2luYy5vcmcnLFxuICAgICAgICAgICAgICBjb2RlOiAnODUzNTQtOScsXG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdCbG9vZCBwcmVzc3VyZSBwYW5lbCB3aXRoIGFsbCBjaGlsZHJlbiBvcHRpb25hbCcsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1YmplY3Q6IHsgcmVmZXJlbmNlOiBgUGF0aWVudC8ke3BhdGllbnRJZH1gIH0sXG4gICAgICAgICAgZW5jb3VudGVyOiB7IHJlZmVyZW5jZTogYEVuY291bnRlci8ke2VuY291bnRlcklkfWAgfSxcbiAgICAgICAgICBjb21wb25lbnQ6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29kZToge1xuICAgICAgICAgICAgICAgIGNvZGluZzogW3tcbiAgICAgICAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly9sb2luYy5vcmcnLFxuICAgICAgICAgICAgICAgICAgY29kZTogJzg0ODAtNicsXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnU3lzdG9saWMgYmxvb2QgcHJlc3N1cmUnLFxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB2YWx1ZVF1YW50aXR5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZpdGFscy5ibG9vZFByZXNzdXJlU3lzdG9saWMsXG4gICAgICAgICAgICAgICAgdW5pdDogJ21tSGcnLFxuICAgICAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly91bml0c29mbWVhc3VyZS5vcmcnLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdtbVtIZ10nLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29kZToge1xuICAgICAgICAgICAgICAgIGNvZGluZzogW3tcbiAgICAgICAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly9sb2luYy5vcmcnLFxuICAgICAgICAgICAgICAgICAgY29kZTogJzg0NjItNCcsXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnRGlhc3RvbGljIGJsb29kIHByZXNzdXJlJyxcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdmFsdWVRdWFudGl0eToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2aXRhbHMuYmxvb2RQcmVzc3VyZURpYXN0b2xpYyxcbiAgICAgICAgICAgICAgICB1bml0OiAnbW1IZycsXG4gICAgICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL3VuaXRzb2ZtZWFzdXJlLm9yZycsXG4gICAgICAgICAgICAgICAgY29kZTogJ21tW0hnXScsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgICBvYnNlcnZhdGlvbnMucHVzaChicE9ic2VydmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gSGVhcnQgUmF0ZVxuICAgICAgaWYgKHZpdGFscy5oZWFydFJhdGUpIHtcbiAgICAgICAgY29uc3QgaHJPYnNlcnZhdGlvbiA9IGF3YWl0IHRoaXMuY3JlYXRlT2JzZXJ2YXRpb24oe1xuICAgICAgICAgIHN0YXR1czogJ2ZpbmFsJyxcbiAgICAgICAgICBjYXRlZ29yeTogW3tcbiAgICAgICAgICAgIGNvZGluZzogW3tcbiAgICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9vYnNlcnZhdGlvbi1jYXRlZ29yeScsXG4gICAgICAgICAgICAgIGNvZGU6ICd2aXRhbC1zaWducycsXG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdWaXRhbCBTaWducycsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICB9XSxcbiAgICAgICAgICBjb2RlOiB7XG4gICAgICAgICAgICBjb2Rpbmc6IFt7XG4gICAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly9sb2luYy5vcmcnLFxuICAgICAgICAgICAgICBjb2RlOiAnODg2Ny00JyxcbiAgICAgICAgICAgICAgZGlzcGxheTogJ0hlYXJ0IHJhdGUnLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWJqZWN0OiB7IHJlZmVyZW5jZTogYFBhdGllbnQvJHtwYXRpZW50SWR9YCB9LFxuICAgICAgICAgIGVuY291bnRlcjogeyByZWZlcmVuY2U6IGBFbmNvdW50ZXIvJHtlbmNvdW50ZXJJZH1gIH0sXG4gICAgICAgICAgdmFsdWVRdWFudGl0eToge1xuICAgICAgICAgICAgdmFsdWU6IHZpdGFscy5oZWFydFJhdGUsXG4gICAgICAgICAgICB1bml0OiAnYmVhdHMvbWluJyxcbiAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly91bml0c29mbWVhc3VyZS5vcmcnLFxuICAgICAgICAgICAgY29kZTogJy9taW4nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBvYnNlcnZhdGlvbnMucHVzaChock9ic2VydmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmZoaXIoJ1ZpdGFsIHNpZ25zIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBcbiAgICAgICAgcGF0aWVudElkLFxuICAgICAgICBlbmNvdW50ZXJJZCxcbiAgICAgICAgdml0YWxzQ291bnQ6IG9ic2VydmF0aW9ucy5sZW5ndGgsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG9ic2VydmF0aW9ucztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHZpdGFsIHNpZ25zOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gTUVESUNBVElPTiBSRVNPVVJDRVNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBtZWRpY2F0aW9uIHJlcXVlc3QgKHByZXNjcmlwdGlvbilcbiAgICovXG4gIGFzeW5jIGNyZWF0ZU1lZGljYXRpb25SZXF1ZXN0KG1lZGljYXRpb25SZXF1ZXN0RGF0YTogUGFydGlhbDxNZWRpY2F0aW9uUmVxdWVzdD4pOiBQcm9taXNlPE1lZGljYXRpb25SZXF1ZXN0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lZGljYXRpb25SZXF1ZXN0OiBNZWRpY2F0aW9uUmVxdWVzdCA9IHtcbiAgICAgICAgcmVzb3VyY2VUeXBlOiAnTWVkaWNhdGlvblJlcXVlc3QnLFxuICAgICAgICBzdGF0dXM6IG1lZGljYXRpb25SZXF1ZXN0RGF0YS5zdGF0dXMgfHwgJ2FjdGl2ZScsXG4gICAgICAgIGludGVudDogbWVkaWNhdGlvblJlcXVlc3REYXRhLmludGVudCB8fCAnb3JkZXInLFxuICAgICAgICBjYXRlZ29yeTogbWVkaWNhdGlvblJlcXVlc3REYXRhLmNhdGVnb3J5IHx8IFtdLFxuICAgICAgICBwcmlvcml0eTogbWVkaWNhdGlvblJlcXVlc3REYXRhLnByaW9yaXR5IHx8ICdyb3V0aW5lJyxcbiAgICAgICAgbWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdDogbWVkaWNhdGlvblJlcXVlc3REYXRhLm1lZGljYXRpb25Db2RlYWJsZUNvbmNlcHQsXG4gICAgICAgIG1lZGljYXRpb25SZWZlcmVuY2U6IG1lZGljYXRpb25SZXF1ZXN0RGF0YS5tZWRpY2F0aW9uUmVmZXJlbmNlLFxuICAgICAgICBzdWJqZWN0OiBtZWRpY2F0aW9uUmVxdWVzdERhdGEuc3ViamVjdCB8fCB7IHJlZmVyZW5jZTogJycgfSxcbiAgICAgICAgZW5jb3VudGVyOiBtZWRpY2F0aW9uUmVxdWVzdERhdGEuZW5jb3VudGVyLFxuICAgICAgICBhdXRob3JlZE9uOiBtZWRpY2F0aW9uUmVxdWVzdERhdGEuYXV0aG9yZWRPbiB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHJlcXVlc3RlcjogbWVkaWNhdGlvblJlcXVlc3REYXRhLnJlcXVlc3RlcixcbiAgICAgICAgcmVhc29uQ29kZTogbWVkaWNhdGlvblJlcXVlc3REYXRhLnJlYXNvbkNvZGUgfHwgW10sXG4gICAgICAgIGRvc2FnZUluc3RydWN0aW9uOiBtZWRpY2F0aW9uUmVxdWVzdERhdGEuZG9zYWdlSW5zdHJ1Y3Rpb24gfHwgW10sXG4gICAgICAgIGRpc3BlbnNlUmVxdWVzdDogbWVkaWNhdGlvblJlcXVlc3REYXRhLmRpc3BlbnNlUmVxdWVzdCxcbiAgICAgICAgaWRlbnRpZmllcjogW1xuICAgICAgICAgIC4uLihtZWRpY2F0aW9uUmVxdWVzdERhdGEuaWRlbnRpZmllciB8fCBbXSksXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3lzdGVtOiAnaHR0cDovL29tbmljYXJlLmNvbS9tZWRpY2F0aW9uLXJlcXVlc3QtaWQnLFxuICAgICAgICAgICAgdmFsdWU6IGBNUiR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtZWRwbHVtU2VydmljZS5jcmVhdGVSZXNvdXJjZShtZWRpY2F0aW9uUmVxdWVzdCk7XG4gICAgICBsb2dnZXIuZmhpcignTWVkaWNhdGlvbiByZXF1ZXN0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBtZWRpY2F0aW9uUmVxdWVzdElkOiByZXN1bHQuaWQgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgbWVkaWNhdGlvbiByZXF1ZXN0OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gU0VSVklDRSBSRVFVRVNUIFJFU09VUkNFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNlcnZpY2UgcmVxdWVzdCAob3JkZXIpXG4gICAqL1xuICBhc3luYyBjcmVhdGVTZXJ2aWNlUmVxdWVzdChzZXJ2aWNlUmVxdWVzdERhdGE6IFBhcnRpYWw8U2VydmljZVJlcXVlc3Q+KTogUHJvbWlzZTxTZXJ2aWNlUmVxdWVzdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZXJ2aWNlUmVxdWVzdDogU2VydmljZVJlcXVlc3QgPSB7XG4gICAgICAgIHJlc291cmNlVHlwZTogJ1NlcnZpY2VSZXF1ZXN0JyxcbiAgICAgICAgc3RhdHVzOiBzZXJ2aWNlUmVxdWVzdERhdGEuc3RhdHVzIHx8ICdhY3RpdmUnLFxuICAgICAgICBpbnRlbnQ6IHNlcnZpY2VSZXF1ZXN0RGF0YS5pbnRlbnQgfHwgJ29yZGVyJyxcbiAgICAgICAgY2F0ZWdvcnk6IHNlcnZpY2VSZXF1ZXN0RGF0YS5jYXRlZ29yeSB8fCBbXSxcbiAgICAgICAgcHJpb3JpdHk6IHNlcnZpY2VSZXF1ZXN0RGF0YS5wcmlvcml0eSB8fCAncm91dGluZScsXG4gICAgICAgIGNvZGU6IHNlcnZpY2VSZXF1ZXN0RGF0YS5jb2RlIHx8IHtcbiAgICAgICAgICBjb2Rpbmc6IFt7XG4gICAgICAgICAgICBzeXN0ZW06ICdodHRwOi8vc25vbWVkLmluZm8vc2N0JyxcbiAgICAgICAgICAgIGNvZGU6ICcxNTIyMDAwMCcsXG4gICAgICAgICAgICBkaXNwbGF5OiAnTGFib3JhdG9yeSB0ZXN0JyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfSxcbiAgICAgICAgc3ViamVjdDogc2VydmljZVJlcXVlc3REYXRhLnN1YmplY3QgfHwgeyByZWZlcmVuY2U6ICcnIH0sXG4gICAgICAgIGVuY291bnRlcjogc2VydmljZVJlcXVlc3REYXRhLmVuY291bnRlcixcbiAgICAgICAgb2NjdXJyZW5jZURhdGVUaW1lOiBzZXJ2aWNlUmVxdWVzdERhdGEub2NjdXJyZW5jZURhdGVUaW1lLFxuICAgICAgICBhdXRob3JlZE9uOiBzZXJ2aWNlUmVxdWVzdERhdGEuYXV0aG9yZWRPbiB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHJlcXVlc3Rlcjogc2VydmljZVJlcXVlc3REYXRhLnJlcXVlc3RlcixcbiAgICAgICAgcmVhc29uQ29kZTogc2VydmljZVJlcXVlc3REYXRhLnJlYXNvbkNvZGUgfHwgW10sXG4gICAgICAgIGlkZW50aWZpZXI6IFtcbiAgICAgICAgICAuLi4oc2VydmljZVJlcXVlc3REYXRhLmlkZW50aWZpZXIgfHwgW10pLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly9vbW5pY2FyZS5jb20vc2VydmljZS1yZXF1ZXN0LWlkJyxcbiAgICAgICAgICAgIHZhbHVlOiBgU1Ike0RhdGUubm93KCl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWVkcGx1bVNlcnZpY2UuY3JlYXRlUmVzb3VyY2Uoc2VydmljZVJlcXVlc3QpO1xuICAgICAgbG9nZ2VyLmZoaXIoJ1NlcnZpY2UgcmVxdWVzdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHsgc2VydmljZVJlcXVlc3RJZDogcmVzdWx0LmlkIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHNlcnZpY2UgcmVxdWVzdDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIERJQUdOT1NUSUMgUkVQT1JUIFJFU09VUkNFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGRpYWdub3N0aWMgcmVwb3J0XG4gICAqL1xuICBhc3luYyBjcmVhdGVEaWFnbm9zdGljUmVwb3J0KGRpYWdub3N0aWNSZXBvcnREYXRhOiBQYXJ0aWFsPERpYWdub3N0aWNSZXBvcnQ+KTogUHJvbWlzZTxEaWFnbm9zdGljUmVwb3J0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRpYWdub3N0aWNSZXBvcnQ6IERpYWdub3N0aWNSZXBvcnQgPSB7XG4gICAgICAgIHJlc291cmNlVHlwZTogJ0RpYWdub3N0aWNSZXBvcnQnLFxuICAgICAgICBzdGF0dXM6IGRpYWdub3N0aWNSZXBvcnREYXRhLnN0YXR1cyB8fCAnZmluYWwnLFxuICAgICAgICBjYXRlZ29yeTogZGlhZ25vc3RpY1JlcG9ydERhdGEuY2F0ZWdvcnkgfHwgW3tcbiAgICAgICAgICBjb2Rpbmc6IFt7XG4gICAgICAgICAgICBzeXN0ZW06ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL3YyLTAwNzQnLFxuICAgICAgICAgICAgY29kZTogJ0xBQicsXG4gICAgICAgICAgICBkaXNwbGF5OiAnTGFib3JhdG9yeScsXG4gICAgICAgICAgfV0sXG4gICAgICAgIH1dLFxuICAgICAgICBjb2RlOiBkaWFnbm9zdGljUmVwb3J0RGF0YS5jb2RlIHx8IHtcbiAgICAgICAgICBjb2Rpbmc6IFt7XG4gICAgICAgICAgICBzeXN0ZW06ICdodHRwOi8vbG9pbmMub3JnJyxcbiAgICAgICAgICAgIGNvZGU6ICcxMTUwMi0yJyxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdMYWJvcmF0b3J5IHJlcG9ydCcsXG4gICAgICAgICAgfV0sXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3Q6IGRpYWdub3N0aWNSZXBvcnREYXRhLnN1YmplY3QgfHwgeyByZWZlcmVuY2U6ICcnIH0sXG4gICAgICAgIGVuY291bnRlcjogZGlhZ25vc3RpY1JlcG9ydERhdGEuZW5jb3VudGVyLFxuICAgICAgICBlZmZlY3RpdmVEYXRlVGltZTogZGlhZ25vc3RpY1JlcG9ydERhdGEuZWZmZWN0aXZlRGF0ZVRpbWUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBpc3N1ZWQ6IGRpYWdub3N0aWNSZXBvcnREYXRhLmlzc3VlZCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHBlcmZvcm1lcjogZGlhZ25vc3RpY1JlcG9ydERhdGEucGVyZm9ybWVyIHx8IFtdLFxuICAgICAgICByZXN1bHQ6IGRpYWdub3N0aWNSZXBvcnREYXRhLnJlc3VsdCB8fCBbXSxcbiAgICAgICAgY29uY2x1c2lvbjogZGlhZ25vc3RpY1JlcG9ydERhdGEuY29uY2x1c2lvbixcbiAgICAgICAgaWRlbnRpZmllcjogW1xuICAgICAgICAgIC4uLihkaWFnbm9zdGljUmVwb3J0RGF0YS5pZGVudGlmaWVyIHx8IFtdKSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzeXN0ZW06ICdodHRwOi8vb21uaWNhcmUuY29tL2RpYWdub3N0aWMtcmVwb3J0LWlkJyxcbiAgICAgICAgICAgIHZhbHVlOiBgRFIke0RhdGUubm93KCl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWVkcGx1bVNlcnZpY2UuY3JlYXRlUmVzb3VyY2UoZGlhZ25vc3RpY1JlcG9ydCk7XG4gICAgICBsb2dnZXIuZmhpcignRGlhZ25vc3RpYyByZXBvcnQgY3JlYXRlZCBzdWNjZXNzZnVsbHknLCB7IGRpYWdub3N0aWNSZXBvcnRJZDogcmVzdWx0LmlkIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGRpYWdub3N0aWMgcmVwb3J0OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQ0FSRSBQTEFOIFJFU09VUkNFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNhcmUgcGxhblxuICAgKi9cbiAgYXN5bmMgY3JlYXRlQ2FyZVBsYW4oY2FyZVBsYW5EYXRhOiBQYXJ0aWFsPENhcmVQbGFuPik6IFByb21pc2U8Q2FyZVBsYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FyZVBsYW46IENhcmVQbGFuID0ge1xuICAgICAgICByZXNvdXJjZVR5cGU6ICdDYXJlUGxhbicsXG4gICAgICAgIHN0YXR1czogY2FyZVBsYW5EYXRhLnN0YXR1cyB8fCAnYWN0aXZlJyxcbiAgICAgICAgaW50ZW50OiBjYXJlUGxhbkRhdGEuaW50ZW50IHx8ICdwbGFuJyxcbiAgICAgICAgY2F0ZWdvcnk6IGNhcmVQbGFuRGF0YS5jYXRlZ29yeSB8fCBbe1xuICAgICAgICAgIGNvZGluZzogW3tcbiAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly9zbm9tZWQuaW5mby9zY3QnLFxuICAgICAgICAgICAgY29kZTogJzczNDE2MzAwMCcsXG4gICAgICAgICAgICBkaXNwbGF5OiAnQ2FyZSBwbGFuJyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0sXG4gICAgICAgIHRpdGxlOiBjYXJlUGxhbkRhdGEudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBjYXJlUGxhbkRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIHN1YmplY3Q6IGNhcmVQbGFuRGF0YS5zdWJqZWN0IHx8IHsgcmVmZXJlbmNlOiAnJyB9LFxuICAgICAgICBlbmNvdW50ZXI6IGNhcmVQbGFuRGF0YS5lbmNvdW50ZXIsXG4gICAgICAgIHBlcmlvZDogY2FyZVBsYW5EYXRhLnBlcmlvZCxcbiAgICAgICAgY3JlYXRlZDogY2FyZVBsYW5EYXRhLmNyZWF0ZWQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBhdXRob3I6IGNhcmVQbGFuRGF0YS5hdXRob3IsXG4gICAgICAgIGNvbnRyaWJ1dG9yOiBjYXJlUGxhbkRhdGEuY29udHJpYnV0b3IgfHwgW10sXG4gICAgICAgIGNhcmVUZWFtOiBjYXJlUGxhbkRhdGEuY2FyZVRlYW0gfHwgW10sXG4gICAgICAgIGFkZHJlc3NlczogY2FyZVBsYW5EYXRhLmFkZHJlc3NlcyB8fCBbXSxcbiAgICAgICAgZ29hbDogY2FyZVBsYW5EYXRhLmdvYWwgfHwgW10sXG4gICAgICAgIGFjdGl2aXR5OiBjYXJlUGxhbkRhdGEuYWN0aXZpdHkgfHwgW10sXG4gICAgICAgIGlkZW50aWZpZXI6IFtcbiAgICAgICAgICAuLi4oY2FyZVBsYW5EYXRhLmlkZW50aWZpZXIgfHwgW10pLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN5c3RlbTogJ2h0dHA6Ly9vbW5pY2FyZS5jb20vY2FyZS1wbGFuLWlkJyxcbiAgICAgICAgICAgIHZhbHVlOiBgQ1Ake0RhdGUubm93KCl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWVkcGx1bVNlcnZpY2UuY3JlYXRlUmVzb3VyY2UoY2FyZVBsYW4pO1xuICAgICAgbG9nZ2VyLmZoaXIoJ0NhcmUgcGxhbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHsgY2FyZVBsYW5JZDogcmVzdWx0LmlkIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGNhcmUgcGxhbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFVUSUxJVFkgTUVUSE9EU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGEgRkhJUiByZXNvdXJjZVxuICAgKi9cbiAgYXN5bmMgdmFsaWRhdGVSZXNvdXJjZTxUPihyZXNvdXJjZTogVCk6IFByb21pc2U8VmFsaWRhdGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtZWRwbHVtU2VydmljZS52YWxpZGF0ZVJlc291cmNlKHJlc291cmNlKTtcbiAgICAgIFxuICAgICAgLy8gUGFyc2UgdmFsaWRhdGlvbiByZXN1bHRzXG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0OiBWYWxpZGF0aW9uUmVzdWx0ID0ge1xuICAgICAgICB2YWxpZDogIXJlc3VsdC5pc3N1ZSB8fCByZXN1bHQuaXNzdWUubGVuZ3RoID09PSAwLFxuICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICB3YXJuaW5nczogW10sXG4gICAgICB9O1xuXG4gICAgICBpZiAocmVzdWx0Lmlzc3VlKSB7XG4gICAgICAgIHJlc3VsdC5pc3N1ZS5mb3JFYWNoKChpc3N1ZTogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKGlzc3VlLnNldmVyaXR5ID09PSAnZXJyb3InIHx8IGlzc3VlLnNldmVyaXR5ID09PSAnZmF0YWwnKSB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uUmVzdWx0LmVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgcGF0aDogaXNzdWUuZXhwcmVzc2lvbj8uWzBdIHx8IGlzc3VlLmxvY2F0aW9uPy5bMF0gfHwgJycsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGlzc3VlLmRpYWdub3N0aWNzIHx8IGlzc3VlLmRldGFpbHM/LnRleHQgfHwgJ1ZhbGlkYXRpb24gZXJyb3InLFxuICAgICAgICAgICAgICBjb2RlOiBpc3N1ZS5jb2RlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6IGlzc3VlLnNldmVyaXR5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb25SZXN1bHQud2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgIHBhdGg6IGlzc3VlLmV4cHJlc3Npb24/LlswXSB8fCBpc3N1ZS5sb2NhdGlvbj8uWzBdIHx8ICcnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZS5kaWFnbm9zdGljcyB8fCBpc3N1ZS5kZXRhaWxzPy50ZXh0IHx8ICdWYWxpZGF0aW9uIHdhcm5pbmcnLFxuICAgICAgICAgICAgICBjb2RlOiBpc3N1ZS5jb2RlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6IGlzc3VlLnNldmVyaXR5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmZoaXIoJ1Jlc291cmNlIHZhbGlkYXRpb24gY29tcGxldGVkJywge1xuICAgICAgICB2YWxpZDogdmFsaWRhdGlvblJlc3VsdC52YWxpZCxcbiAgICAgICAgZXJyb3JzOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9ycy5sZW5ndGgsXG4gICAgICAgIHdhcm5pbmdzOiB2YWxpZGF0aW9uUmVzdWx0Lndhcm5pbmdzLmxlbmd0aCxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gdmFsaWRhdGUgcmVzb3VyY2U6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgcmVzb3VyY2VzIGZvciBhIHBhdGllbnRcbiAgICovXG4gIGFzeW5jIGdldFBhdGllbnRFdmVyeXRoaW5nKHBhdGllbnRJZDogc3RyaW5nKTogUHJvbWlzZTxCdW5kbGU+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWVkcGx1bVNlcnZpY2Uuc2VhcmNoUmVzb3VyY2VzKCdQYXRpZW50Jywge1xuICAgICAgICBfaWQ6IHBhdGllbnRJZCxcbiAgICAgICAgX2luY2x1ZGU6ICcqJyxcbiAgICAgICAgX3JldmluY2x1ZGU6ICcqJyxcbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuZmhpcignUGF0aWVudCBldmVyeXRoaW5nIHJldHJpZXZlZCcsIHtcbiAgICAgICAgcGF0aWVudElkLFxuICAgICAgICByZXNvdXJjZUNvdW50OiByZXN1bHQuZW50cnk/Lmxlbmd0aCB8fCAwLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCBwYXRpZW50IGV2ZXJ5dGhpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBmaGlyUmVzb3VyY2VzU2VydmljZSA9IG5ldyBGSElSUmVzb3VyY2VzU2VydmljZSgpOyJdLCJ2ZXJzaW9uIjozfQ==