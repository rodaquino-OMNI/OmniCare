9c629af92656df714a2ba2fe6d74fae5
"use strict";
/**
 * Operational Metrics Analytics Service
 *
 * Comprehensive operational analytics including patient flow,
 * staff utilization, appointment analytics, and operational KPIs
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.OperationalMetricsService = void 0;
const events_1 = require("events");
class OperationalMetricsService extends events_1.EventEmitter {
    realTimeData = new Map();
    historicalMetrics = new Map();
    benchmarks = new Map();
    constructor() {
        super();
        this.initializeBenchmarks();
        this.startRealTimeMonitoring();
    }
    /**
     * Get comprehensive patient flow analytics
     */
    async getPatientFlowAnalytics(facilityId, period) {
        const currentFlow = await this.calculateCurrentPatientFlow(facilityId);
        const bottlenecks = await this.identifyBottlenecks(facilityId);
        const hourlyFlow = await this.getHourlyFlowData(facilityId, period);
        return {
            totalPatients: currentFlow.totalPatients,
            averageWaitTime: currentFlow.averageWaitTime,
            averageVisitDuration: currentFlow.averageVisitDuration,
            patientThroughput: currentFlow.patientThroughput,
            bottlenecks,
            hourlyFlow
        };
    }
    /**
     * Analyze staff utilization and productivity
     */
    async getStaffUtilizationAnalytics(facilityId, period, departmentId) {
        const staffMetrics = await this.calculateStaffUtilization(facilityId, period, departmentId);
        const overtimeMetrics = await this.calculateOvertimeMetrics(facilityId, period, departmentId);
        const recommendations = await this.generateStaffingRecommendations(staffMetrics, overtimeMetrics);
        const totalStaff = staffMetrics.length;
        const averageUtilization = staffMetrics.reduce((sum, s) => sum + s.utilizationRate, 0) / totalStaff;
        return {
            departmentId,
            departmentName: departmentId ? await this.getDepartmentName(departmentId) : 'All Departments',
            totalStaff,
            averageUtilization,
            staffMetrics,
            overtimeMetrics,
            recommendations
        };
    }
    /**
     * Get appointment analytics and scheduling insights
     */
    async getAppointmentAnalytics(facilityId, period) {
        const appointmentData = await this.calculateAppointmentMetrics(facilityId, period);
        const appointmentTypes = await this.analyzeAppointmentTypes(facilityId, period);
        const providerUtilization = await this.calculateProviderUtilization(facilityId, period);
        return {
            ...appointmentData,
            appointmentTypes,
            providerUtilization
        };
    }
    /**
     * Get quality and safety metrics
     */
    async getQualityMetrics(facilityId, period) {
        const patientSatisfaction = await this.calculatePatientSatisfaction(facilityId, period);
        const clinicalMetrics = await this.calculateClinicalMetrics(facilityId, period);
        const safetyMetrics = await this.calculateSafetyMetrics(facilityId, period);
        return {
            patientSatisfaction,
            clinicalMetrics,
            safetyMetrics
        };
    }
    /**
     * Get real-time operational dashboard
     */
    async getOperationalDashboard(facilityId) {
        const realTimeMetrics = await this.getRealTimeMetrics(facilityId);
        const todaysPerformance = await this.getTodaysPerformance(facilityId);
        const alerts = await this.getActiveAlerts(facilityId);
        const trends = await this.calculateTrends(facilityId);
        // Emit real-time update
        this.emit('dashboard-update', {
            facilityId,
            timestamp: new Date(),
            data: { realTimeMetrics, todaysPerformance, alerts, trends }
        });
        return {
            realTimeMetrics,
            todaysPerformance,
            alerts,
            trends
        };
    }
    /**
     * Analyze resource utilization (rooms, equipment)
     */
    async getResourceUtilization(facilityId, period) {
        const roomUtilization = await this.calculateRoomUtilization(facilityId, period);
        const equipmentUtilization = await this.calculateEquipmentUtilization(facilityId, period);
        const recommendations = await this.generateResourceRecommendations(roomUtilization, equipmentUtilization);
        return {
            roomUtilization,
            equipmentUtilization,
            recommendations
        };
    }
    /**
     * Generate operational insights and predictions
     */
    async generateOperationalInsights(facilityId) {
        const patientFlow = await this.getPatientFlowAnalytics(facilityId);
        const quality = await this.getQualityMetrics(facilityId, {
            start: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),
            end: new Date()
        });
        const insights = [
            {
                category: 'Patient Flow',
                insight: patientFlow.averageWaitTime > 30 ?
                    'Patient wait times exceed benchmark - workflow optimization needed' :
                    'Patient flow performing within acceptable ranges',
                impact: patientFlow.averageWaitTime > 30 ? 'High' : 'Low',
                confidence: 0.85,
                recommendations: patientFlow.averageWaitTime > 30 ? [
                    'Analyze bottlenecks in check-in process',
                    'Consider additional staffing during peak hours',
                    'Implement patient flow management system'
                ] : ['Continue monitoring current performance']
            },
            {
                category: 'Quality',
                insight: quality.patientSatisfaction.overallScore < 4.0 ?
                    'Patient satisfaction below target - service improvements needed' :
                    'Patient satisfaction meeting performance targets',
                impact: quality.patientSatisfaction.overallScore < 4.0 ? 'Medium' : 'Low',
                confidence: 0.78,
                recommendations: quality.patientSatisfaction.overallScore < 4.0 ? [
                    'Focus on communication and bedside manner training',
                    'Reduce wait times and improve scheduling',
                    'Implement patient feedback system'
                ] : ['Maintain current quality initiatives']
            }
        ];
        const predictions = [
            {
                metric: 'Average Wait Time',
                currentValue: patientFlow.averageWaitTime,
                predictedValue: patientFlow.averageWaitTime * 1.05, // 5% increase predicted
                timeframe: 'Next 30 days',
                confidence: 0.72,
                factors: ['Seasonal volume increase', 'Staff vacation schedules']
            },
            {
                metric: 'Patient Satisfaction',
                currentValue: quality.patientSatisfaction.overallScore,
                predictedValue: quality.patientSatisfaction.overallScore + 0.1,
                timeframe: 'Next quarter',
                confidence: 0.68,
                factors: ['Recent process improvements', 'Staff training initiatives']
            }
        ];
        return { insights, predictions };
    }
    async calculateCurrentPatientFlow(facilityId) {
        // Mock implementation - would integrate with real-time EHR data
        return {
            totalPatients: 127,
            averageWaitTime: 18, // minutes
            averageVisitDuration: 45, // minutes
            patientThroughput: 85 // patients per day
        };
    }
    async identifyBottlenecks(facilityId) {
        return [
            {
                location: 'Check-in Desk',
                averageWaitTime: 12,
                impactedPatients: 45,
                severity: 'Medium'
            },
            {
                location: 'Lab Draw Station',
                averageWaitTime: 25,
                impactedPatients: 28,
                severity: 'High'
            },
            {
                location: 'Exam Room 3',
                averageWaitTime: 8,
                impactedPatients: 15,
                severity: 'Low'
            }
        ];
    }
    async getHourlyFlowData(facilityId, period) {
        const hourlyData = [];
        for (let hour = 8; hour <= 18; hour++) {
            hourlyData.push({
                hour,
                checkedIn: Math.floor(Math.random() * 15) + 5,
                inProgress: Math.floor(Math.random() * 12) + 3,
                completed: Math.floor(Math.random() * 18) + 8,
                averageWaitTime: Math.floor(Math.random() * 20) + 10
            });
        }
        return hourlyData;
    }
    async calculateStaffUtilization(facilityId, period, departmentId) {
        return [
            {
                staffId: 'STAFF001',
                staffName: 'Sarah Johnson, RN',
                role: 'Registered Nurse',
                scheduledHours: 160,
                actualHours: 164,
                utilizationRate: 102.5,
                patientsSeen: 180,
                avgTimePerPatient: 35,
                productivityScore: 92
            },
            {
                staffId: 'STAFF002',
                staffName: 'Mike Chen, MA',
                role: 'Medical Assistant',
                scheduledHours: 160,
                actualHours: 155,
                utilizationRate: 96.9,
                patientsSeen: 220,
                avgTimePerPatient: 28,
                productivityScore: 88
            },
            {
                staffId: 'STAFF003',
                staffName: 'Lisa Rodriguez, RN',
                role: 'Registered Nurse',
                scheduledHours: 120,
                actualHours: 118,
                utilizationRate: 98.3,
                patientsSeen: 145,
                avgTimePerPatient: 32,
                productivityScore: 85
            }
        ];
    }
    async calculateOvertimeMetrics(facilityId, period, departmentId) {
        return {
            totalOvertimeHours: 48,
            overtimeCost: 2880, // $60/hour average
            staffWithOvertime: 3
        };
    }
    async generateStaffingRecommendations(staffMetrics, overtimeMetrics) {
        const recommendations = [];
        const avgUtilization = staffMetrics.reduce((sum, s) => sum + s.utilizationRate, 0) / staffMetrics.length;
        if (avgUtilization > 100) {
            recommendations.push({
                type: 'Staffing',
                recommendation: 'Consider adding additional staff to reduce overtime and improve work-life balance',
                expectedImpact: 'Reduce overtime costs by 30%, improve staff satisfaction',
                priority: 'High'
            });
        }
        if (overtimeMetrics.totalOvertimeHours > 40) {
            recommendations.push({
                type: 'Scheduling',
                recommendation: 'Optimize scheduling to better distribute workload and minimize overtime',
                expectedImpact: 'Reduce overtime hours by 25%',
                priority: 'Medium'
            });
        }
        return recommendations;
    }
    async calculateAppointmentMetrics(facilityId, period) {
        const totalAppointments = 1250;
        const scheduledAppointments = 1200;
        const completedAppointments = 1050;
        const cancelledAppointments = 120;
        const noShowAppointments = 80;
        return {
            totalAppointments,
            scheduledAppointments,
            completedAppointments,
            cancelledAppointments,
            noShowAppointments,
            completionRate: (completedAppointments / scheduledAppointments) * 100,
            cancellationRate: (cancelledAppointments / scheduledAppointments) * 100,
            noShowRate: (noShowAppointments / scheduledAppointments) * 100,
            averageLeadTime: 14 // days
        };
    }
    async analyzeAppointmentTypes(facilityId, period) {
        return [
            {
                type: 'Follow-up',
                count: 450,
                percentage: 42.9,
                averageDuration: 30,
                noShowRate: 6.2
            },
            {
                type: 'New Patient',
                count: 280,
                percentage: 26.7,
                averageDuration: 60,
                noShowRate: 8.5
            },
            {
                type: 'Annual Physical',
                count: 180,
                percentage: 17.1,
                averageDuration: 45,
                noShowRate: 4.8
            },
            {
                type: 'Urgent Care',
                count: 90,
                percentage: 8.6,
                averageDuration: 25,
                noShowRate: 12.1
            },
            {
                type: 'Procedure',
                count: 50,
                percentage: 4.8,
                averageDuration: 90,
                noShowRate: 3.2
            }
        ];
    }
    async calculateProviderUtilization(facilityId, period) {
        return [
            {
                providerId: 'PROV001',
                providerName: 'Dr. Smith',
                scheduledSlots: 200,
                filledSlots: 185,
                utilizationRate: 92.5,
                averageAppointmentDuration: 35
            },
            {
                providerId: 'PROV002',
                providerName: 'Dr. Johnson',
                scheduledSlots: 180,
                filledSlots: 165,
                utilizationRate: 91.7,
                averageAppointmentDuration: 42
            },
            {
                providerId: 'PROV003',
                providerName: 'Dr. Williams',
                scheduledSlots: 160,
                filledSlots: 142,
                utilizationRate: 88.8,
                averageAppointmentDuration: 38
            }
        ];
    }
    async calculatePatientSatisfaction(facilityId, period) {
        return {
            overallScore: 4.2,
            responseRate: 65,
            npsScore: 32,
            categories: [
                {
                    category: 'Communication',
                    score: 4.3,
                    benchmark: 4.5,
                    trend: 'Improving'
                },
                {
                    category: 'Wait Time',
                    score: 3.8,
                    benchmark: 4.0,
                    trend: 'Stable'
                },
                {
                    category: 'Staff Courtesy',
                    score: 4.5,
                    benchmark: 4.3,
                    trend: 'Stable'
                },
                {
                    category: 'Facility Cleanliness',
                    score: 4.6,
                    benchmark: 4.4,
                    trend: 'Improving'
                }
            ]
        };
    }
    async calculateClinicalMetrics(facilityId, period) {
        return {
            readmissionRate: 8.5, // percentage
            complicationRate: 2.1,
            infectionRate: 0.8,
            mortalityRate: 0.2,
            lengthOfStay: 3.2 // days
        };
    }
    async calculateSafetyMetrics(facilityId, period) {
        return {
            adverseEvents: 12,
            nearMisses: 45,
            safetyScore: 92,
            incidentsByType: [
                {
                    type: 'Medication Error',
                    count: 8,
                    severity: 'Medium'
                },
                {
                    type: 'Fall',
                    count: 3,
                    severity: 'High'
                },
                {
                    type: 'Equipment Malfunction',
                    count: 2,
                    severity: 'Low'
                }
            ]
        };
    }
    async getRealTimeMetrics(facilityId) {
        return {
            currentlyInFacility: 43,
            waitingPatients: 12,
            inProgressEncounters: 18,
            completedToday: 67,
            averageWaitTime: 15,
            staffOnDuty: 15,
            availableRooms: 8
        };
    }
    async getTodaysPerformance(facilityId) {
        return {
            appointmentsScheduled: 85,
            appointmentsCompleted: 67,
            walkInsProcessed: 12,
            patientSatisfactionToday: 4.3,
            revenueToday: 18500
        };
    }
    async getActiveAlerts(facilityId) {
        return [
            {
                id: 'ALERT001',
                type: 'Warning',
                title: 'High Wait Times',
                message: 'Average wait time in Lab Draw Station exceeds 20 minutes',
                timestamp: new Date(),
                acknowledged: false
            },
            {
                id: 'ALERT002',
                type: 'Info',
                title: 'Room Utilization',
                message: 'Exam Room 5 has been available for over 2 hours',
                timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000),
                acknowledged: true
            }
        ];
    }
    async calculateTrends(facilityId) {
        return {
            patientVolumeTrend: 'Up',
            waitTimeTrend: 'Stable',
            satisfactionTrend: 'Up'
        };
    }
    async calculateRoomUtilization(facilityId, period) {
        return [
            {
                roomId: 'ROOM001',
                roomName: 'Exam Room 1',
                roomType: 'Exam',
                utilizationRate: 85.2,
                totalBookedHours: 136,
                availableHours: 160,
                turnaroundTime: 12 // minutes
            },
            {
                roomId: 'ROOM002',
                roomName: 'Procedure Room A',
                roomType: 'Procedure',
                utilizationRate: 92.5,
                totalBookedHours: 148,
                availableHours: 160,
                turnaroundTime: 20
            }
        ];
    }
    async calculateEquipmentUtilization(facilityId, period) {
        return [
            {
                equipmentId: 'EQ001',
                equipmentName: 'X-Ray Machine',
                utilizationRate: 78.5,
                maintenanceHours: 8,
                downtime: 2.5,
                efficiency: 92.3
            },
            {
                equipmentId: 'EQ002',
                equipmentName: 'EKG Machine',
                utilizationRate: 65.2,
                maintenanceHours: 4,
                downtime: 1.0,
                efficiency: 95.8
            }
        ];
    }
    async generateResourceRecommendations(roomUtil, equipUtil) {
        const recommendations = [];
        for (const room of roomUtil) {
            if (room.utilizationRate > 90) {
                recommendations.push({
                    resourceType: 'Room',
                    resourceId: room.roomId,
                    recommendation: 'Consider adding capacity or optimizing scheduling',
                    expectedImpact: 'Reduce wait times and improve patient flow',
                    priority: 'High'
                });
            }
        }
        for (const equipment of equipUtil) {
            if (equipment.utilizationRate < 50) {
                recommendations.push({
                    resourceType: 'Equipment',
                    resourceId: equipment.equipmentId,
                    recommendation: 'Evaluate need for this equipment or find additional uses',
                    expectedImpact: 'Optimize resource allocation and reduce costs',
                    priority: 'Medium'
                });
            }
        }
        return recommendations;
    }
    async getDepartmentName(departmentId) {
        const departments = {
            'DEPT001': 'Emergency Department',
            'DEPT002': 'Internal Medicine',
            'DEPT003': 'Cardiology',
            'DEPT004': 'Orthopedics'
        };
        return departments[departmentId] || 'Unknown Department';
    }
    startRealTimeMonitoring() {
        // Simulate real-time data updates
        setInterval(() => {
            this.emit('real-time-update', {
                timestamp: new Date(),
                metrics: {
                    currentPatients: Math.floor(Math.random() * 50) + 20,
                    waitingPatients: Math.floor(Math.random() * 15) + 5,
                    averageWaitTime: Math.floor(Math.random() * 20) + 10
                }
            });
        }, 30000); // Update every 30 seconds
    }
    initializeBenchmarks() {
        this.benchmarks.set('average-wait-time', 15);
        this.benchmarks.set('patient-satisfaction', 4.5);
        this.benchmarks.set('staff-utilization', 85);
        this.benchmarks.set('room-utilization', 80);
        this.benchmarks.set('no-show-rate', 10);
        this.benchmarks.set('cancellation-rate', 8);
    }
}
exports.OperationalMetricsService = OperationalMetricsService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3JvZHJpZ28vY2xhdWRlLXByb2plY3RzL09tbmlDYXJlL2JhY2tlbmQvc3JjL3NlcnZpY2VzL2FuYWx5dGljcy9vcGVyYXRpb25hbC1tZXRyaWNzLnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7OztHQUtHOzs7QUFFSCxtQ0FBc0M7QUE2SXRDLE1BQWEseUJBQTBCLFNBQVEscUJBQVk7SUFDakQsWUFBWSxHQUFxQixJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQzNDLGlCQUFpQixHQUF1QixJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ2xELFVBQVUsR0FBd0IsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUVwRDtRQUNFLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLHVCQUF1QixDQUMzQixVQUFrQixFQUNsQixNQUFtQztRQUVuQyxNQUFNLFdBQVcsR0FBRyxNQUFNLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2RSxNQUFNLFdBQVcsR0FBRyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUMvRCxNQUFNLFVBQVUsR0FBRyxNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFcEUsT0FBTztZQUNMLGFBQWEsRUFBRSxXQUFXLENBQUMsYUFBYTtZQUN4QyxlQUFlLEVBQUUsV0FBVyxDQUFDLGVBQWU7WUFDNUMsb0JBQW9CLEVBQUUsV0FBVyxDQUFDLG9CQUFvQjtZQUN0RCxpQkFBaUIsRUFBRSxXQUFXLENBQUMsaUJBQWlCO1lBQ2hELFdBQVc7WUFDWCxVQUFVO1NBQ1gsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyw0QkFBNEIsQ0FDaEMsVUFBa0IsRUFDbEIsTUFBa0MsRUFDbEMs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QUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM5QyxDQUFDO0NBQ0Y7QUE3cUJELDhEQTZxQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3JvZHJpZ28vY2xhdWRlLXByb2plY3RzL09tbmlDYXJlL2JhY2tlbmQvc3JjL3NlcnZpY2VzL2FuYWx5dGljcy9vcGVyYXRpb25hbC1tZXRyaWNzLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBPcGVyYXRpb25hbCBNZXRyaWNzIEFuYWx5dGljcyBTZXJ2aWNlXG4gKiBcbiAqIENvbXByZWhlbnNpdmUgb3BlcmF0aW9uYWwgYW5hbHl0aWNzIGluY2x1ZGluZyBwYXRpZW50IGZsb3csXG4gKiBzdGFmZiB1dGlsaXphdGlvbiwgYXBwb2ludG1lbnQgYW5hbHl0aWNzLCBhbmQgb3BlcmF0aW9uYWwgS1BJc1xuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aWVudEZsb3dNZXRyaWNzIHtcbiAgdG90YWxQYXRpZW50czogbnVtYmVyO1xuICBhdmVyYWdlV2FpdFRpbWU6IG51bWJlcjtcbiAgYXZlcmFnZVZpc2l0RHVyYXRpb246IG51bWJlcjtcbiAgcGF0aWVudFRocm91Z2hwdXQ6IG51bWJlcjtcbiAgYm90dGxlbmVja3M6IEFycmF5PHtcbiAgICBsb2NhdGlvbjogc3RyaW5nO1xuICAgIGF2ZXJhZ2VXYWl0VGltZTogbnVtYmVyO1xuICAgIGltcGFjdGVkUGF0aWVudHM6IG51bWJlcjtcbiAgICBzZXZlcml0eTogJ0hpZ2gnIHwgJ01lZGl1bScgfCAnTG93JztcbiAgfT47XG4gIGhvdXJseUZsb3c6IEFycmF5PHtcbiAgICBob3VyOiBudW1iZXI7XG4gICAgY2hlY2tlZEluOiBudW1iZXI7XG4gICAgaW5Qcm9ncmVzczogbnVtYmVyO1xuICAgIGNvbXBsZXRlZDogbnVtYmVyO1xuICAgIGF2ZXJhZ2VXYWl0VGltZTogbnVtYmVyO1xuICB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGFmZlV0aWxpemF0aW9uTWV0cmljcyB7XG4gIGRlcGFydG1lbnRJZD86IHN0cmluZztcbiAgZGVwYXJ0bWVudE5hbWU/OiBzdHJpbmc7XG4gIHRvdGFsU3RhZmY6IG51bWJlcjtcbiAgYXZlcmFnZVV0aWxpemF0aW9uOiBudW1iZXI7XG4gIHN0YWZmTWV0cmljczogQXJyYXk8e1xuICAgIHN0YWZmSWQ6IHN0cmluZztcbiAgICBzdGFmZk5hbWU6IHN0cmluZztcbiAgICByb2xlOiBzdHJpbmc7XG4gICAgc2NoZWR1bGVkSG91cnM6IG51bWJlcjtcbiAgICBhY3R1YWxIb3VyczogbnVtYmVyO1xuICAgIHV0aWxpemF0aW9uUmF0ZTogbnVtYmVyO1xuICAgIHBhdGllbnRzU2VlbjogbnVtYmVyO1xuICAgIGF2Z1RpbWVQZXJQYXRpZW50OiBudW1iZXI7XG4gICAgcHJvZHVjdGl2aXR5U2NvcmU6IG51bWJlcjtcbiAgfT47XG4gIG92ZXJ0aW1lTWV0cmljczoge1xuICAgIHRvdGFsT3ZlcnRpbWVIb3VyczogbnVtYmVyO1xuICAgIG92ZXJ0aW1lQ29zdDogbnVtYmVyO1xuICAgIHN0YWZmV2l0aE92ZXJ0aW1lOiBudW1iZXI7XG4gIH07XG4gIHJlY29tbWVuZGF0aW9uczogQXJyYXk8e1xuICAgIHR5cGU6ICdTdGFmZmluZycgfCAnU2NoZWR1bGluZycgfCAnV29ya2Zsb3cnO1xuICAgIHJlY29tbWVuZGF0aW9uOiBzdHJpbmc7XG4gICAgZXhwZWN0ZWRJbXBhY3Q6IHN0cmluZztcbiAgICBwcmlvcml0eTogJ0hpZ2gnIHwgJ01lZGl1bScgfCAnTG93JztcbiAgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwb2ludG1lbnRBbmFseXRpY3Mge1xuICB0b3RhbEFwcG9pbnRtZW50czogbnVtYmVyO1xuICBzY2hlZHVsZWRBcHBvaW50bWVudHM6IG51bWJlcjtcbiAgY29tcGxldGVkQXBwb2ludG1lbnRzOiBudW1iZXI7XG4gIGNhbmNlbGxlZEFwcG9pbnRtZW50czogbnVtYmVyO1xuICBub1Nob3dBcHBvaW50bWVudHM6IG51bWJlcjtcbiAgY29tcGxldGlvblJhdGU6IG51bWJlcjtcbiAgY2FuY2VsbGF0aW9uUmF0ZTogbnVtYmVyO1xuICBub1Nob3dSYXRlOiBudW1iZXI7XG4gIGF2ZXJhZ2VMZWFkVGltZTogbnVtYmVyO1xuICBhcHBvaW50bWVudFR5cGVzOiBBcnJheTx7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIGNvdW50OiBudW1iZXI7XG4gICAgcGVyY2VudGFnZTogbnVtYmVyO1xuICAgIGF2ZXJhZ2VEdXJhdGlvbjogbnVtYmVyO1xuICAgIG5vU2hvd1JhdGU6IG51bWJlcjtcbiAgfT47XG4gIHByb3ZpZGVyVXRpbGl6YXRpb246IEFycmF5PHtcbiAgICBwcm92aWRlcklkOiBzdHJpbmc7XG4gICAgcHJvdmlkZXJOYW1lOiBzdHJpbmc7XG4gICAgc2NoZWR1bGVkU2xvdHM6IG51bWJlcjtcbiAgICBmaWxsZWRTbG90czogbnVtYmVyO1xuICAgIHV0aWxpemF0aW9uUmF0ZTogbnVtYmVyO1xuICAgIGF2ZXJhZ2VBcHBvaW50bWVudER1cmF0aW9uOiBudW1iZXI7XG4gIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1YWxpdHlNZXRyaWNzIHtcbiAgcGF0aWVudFNhdGlzZmFjdGlvbjoge1xuICAgIG92ZXJhbGxTY29yZTogbnVtYmVyO1xuICAgIHJlc3BvbnNlUmF0ZTogbnVtYmVyO1xuICAgIG5wc1Njb3JlOiBudW1iZXI7XG4gICAgY2F0ZWdvcmllczogQXJyYXk8e1xuICAgICAgY2F0ZWdvcnk6IHN0cmluZztcbiAgICAgIHNjb3JlOiBudW1iZXI7XG4gICAgICBiZW5jaG1hcms6IG51bWJlcjtcbiAgICAgIHRyZW5kOiAnSW1wcm92aW5nJyB8ICdTdGFibGUnIHwgJ0RlY2xpbmluZyc7XG4gICAgfT47XG4gIH07XG4gIGNsaW5pY2FsTWV0cmljczoge1xuICAgIHJlYWRtaXNzaW9uUmF0ZTogbnVtYmVyO1xuICAgIGNvbXBsaWNhdGlvblJhdGU6IG51bWJlcjtcbiAgICBpbmZlY3Rpb25SYXRlOiBudW1iZXI7XG4gICAgbW9ydGFsaXR5UmF0ZTogbnVtYmVyO1xuICAgIGxlbmd0aE9mU3RheTogbnVtYmVyO1xuICB9O1xuICBzYWZldHlNZXRyaWNzOiB7XG4gICAgYWR2ZXJzZUV2ZW50czogbnVtYmVyO1xuICAgIG5lYXJNaXNzZXM6IG51bWJlcjtcbiAgICBzYWZldHlTY29yZTogbnVtYmVyO1xuICAgIGluY2lkZW50c0J5VHlwZTogQXJyYXk8e1xuICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgY291bnQ6IG51bWJlcjtcbiAgICAgIHNldmVyaXR5OiAnQ3JpdGljYWwnIHwgJ0hpZ2gnIHwgJ01lZGl1bScgfCAnTG93JztcbiAgICB9PjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRpb25hbERhc2hib2FyZCB7XG4gIHJlYWxUaW1lTWV0cmljczoge1xuICAgIGN1cnJlbnRseUluRmFjaWxpdHk6IG51bWJlcjtcbiAgICB3YWl0aW5nUGF0aWVudHM6IG51bWJlcjtcbiAgICBpblByb2dyZXNzRW5jb3VudGVyczogbnVtYmVyO1xuICAgIGNvbXBsZXRlZFRvZGF5OiBudW1iZXI7XG4gICAgYXZlcmFnZVdhaXRUaW1lOiBudW1iZXI7XG4gICAgc3RhZmZPbkR1dHk6IG51bWJlcjtcbiAgICBhdmFpbGFibGVSb29tczogbnVtYmVyO1xuICB9O1xuICB0b2RheXNQZXJmb3JtYW5jZToge1xuICAgIGFwcG9pbnRtZW50c1NjaGVkdWxlZDogbnVtYmVyO1xuICAgIGFwcG9pbnRtZW50c0NvbXBsZXRlZDogbnVtYmVyO1xuICAgIHdhbGtJbnNQcm9jZXNzZWQ6IG51bWJlcjtcbiAgICBwYXRpZW50U2F0aXNmYWN0aW9uVG9kYXk6IG51bWJlcjtcbiAgICByZXZlbnVlVG9kYXk6IG51bWJlcjtcbiAgfTtcbiAgYWxlcnRzOiBBcnJheTx7XG4gICAgaWQ6IHN0cmluZztcbiAgICB0eXBlOiAnQ3JpdGljYWwnIHwgJ1dhcm5pbmcnIHwgJ0luZm8nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIHRpbWVzdGFtcDogRGF0ZTtcbiAgICBhY2tub3dsZWRnZWQ6IGJvb2xlYW47XG4gIH0+O1xuICB0cmVuZHM6IHtcbiAgICBwYXRpZW50Vm9sdW1lVHJlbmQ6ICdVcCcgfCAnRG93bicgfCAnU3RhYmxlJztcbiAgICB3YWl0VGltZVRyZW5kOiAnVXAnIHwgJ0Rvd24nIHwgJ1N0YWJsZSc7XG4gICAgc2F0aXNmYWN0aW9uVHJlbmQ6ICdVcCcgfCAnRG93bicgfCAnU3RhYmxlJztcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIE9wZXJhdGlvbmFsTWV0cmljc1NlcnZpY2UgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIHJlYWxUaW1lRGF0YTogTWFwPHN0cmluZywgYW55PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBoaXN0b3JpY2FsTWV0cmljczogTWFwPHN0cmluZywgYW55W10+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGJlbmNobWFya3M6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmluaXRpYWxpemVCZW5jaG1hcmtzKCk7XG4gICAgdGhpcy5zdGFydFJlYWxUaW1lTW9uaXRvcmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb21wcmVoZW5zaXZlIHBhdGllbnQgZmxvdyBhbmFseXRpY3NcbiAgICovXG4gIGFzeW5jIGdldFBhdGllbnRGbG93QW5hbHl0aWNzKFxuICAgIGZhY2lsaXR5SWQ6IHN0cmluZyxcbiAgICBwZXJpb2Q/OiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfVxuICApOiBQcm9taXNlPFBhdGllbnRGbG93TWV0cmljcz4ge1xuICAgIGNvbnN0IGN1cnJlbnRGbG93ID0gYXdhaXQgdGhpcy5jYWxjdWxhdGVDdXJyZW50UGF0aWVudEZsb3coZmFjaWxpdHlJZCk7XG4gICAgY29uc3QgYm90dGxlbmVja3MgPSBhd2FpdCB0aGlzLmlkZW50aWZ5Qm90dGxlbmVja3MoZmFjaWxpdHlJZCk7XG4gICAgY29uc3QgaG91cmx5RmxvdyA9IGF3YWl0IHRoaXMuZ2V0SG91cmx5Rmxvd0RhdGEoZmFjaWxpdHlJZCwgcGVyaW9kKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFBhdGllbnRzOiBjdXJyZW50Rmxvdy50b3RhbFBhdGllbnRzLFxuICAgICAgYXZlcmFnZVdhaXRUaW1lOiBjdXJyZW50Rmxvdy5hdmVyYWdlV2FpdFRpbWUsXG4gICAgICBhdmVyYWdlVmlzaXREdXJhdGlvbjogY3VycmVudEZsb3cuYXZlcmFnZVZpc2l0RHVyYXRpb24sXG4gICAgICBwYXRpZW50VGhyb3VnaHB1dDogY3VycmVudEZsb3cucGF0aWVudFRocm91Z2hwdXQsXG4gICAgICBib3R0bGVuZWNrcyxcbiAgICAgIGhvdXJseUZsb3dcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgc3RhZmYgdXRpbGl6YXRpb24gYW5kIHByb2R1Y3Rpdml0eVxuICAgKi9cbiAgYXN5bmMgZ2V0U3RhZmZVdGlsaXphdGlvbkFuYWx5dGljcyhcbiAgICBmYWNpbGl0eUlkOiBzdHJpbmcsXG4gICAgcGVyaW9kOiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfSxcbiAgICBkZXBhcnRtZW50SWQ/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxTdGFmZlV0aWxpemF0aW9uTWV0cmljcz4ge1xuICAgIGNvbnN0IHN0YWZmTWV0cmljcyA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlU3RhZmZVdGlsaXphdGlvbihmYWNpbGl0eUlkLCBwZXJpb2QsIGRlcGFydG1lbnRJZCk7XG4gICAgY29uc3Qgb3ZlcnRpbWVNZXRyaWNzID0gYXdhaXQgdGhpcy5jYWxjdWxhdGVPdmVydGltZU1ldHJpY3MoZmFjaWxpdHlJZCwgcGVyaW9kLCBkZXBhcnRtZW50SWQpO1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVTdGFmZmluZ1JlY29tbWVuZGF0aW9ucyhzdGFmZk1ldHJpY3MsIG92ZXJ0aW1lTWV0cmljcyk7XG5cbiAgICBjb25zdCB0b3RhbFN0YWZmID0gc3RhZmZNZXRyaWNzLmxlbmd0aDtcbiAgICBjb25zdCBhdmVyYWdlVXRpbGl6YXRpb24gPSBzdGFmZk1ldHJpY3MucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMudXRpbGl6YXRpb25SYXRlLCAwKSAvIHRvdGFsU3RhZmY7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGVwYXJ0bWVudElkLFxuICAgICAgZGVwYXJ0bWVudE5hbWU6IGRlcGFydG1lbnRJZCA/IGF3YWl0IHRoaXMuZ2V0RGVwYXJ0bWVudE5hbWUoZGVwYXJ0bWVudElkKSA6ICdBbGwgRGVwYXJ0bWVudHMnLFxuICAgICAgdG90YWxTdGFmZixcbiAgICAgIGF2ZXJhZ2VVdGlsaXphdGlvbixcbiAgICAgIHN0YWZmTWV0cmljcyxcbiAgICAgIG92ZXJ0aW1lTWV0cmljcyxcbiAgICAgIHJlY29tbWVuZGF0aW9uc1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFwcG9pbnRtZW50IGFuYWx5dGljcyBhbmQgc2NoZWR1bGluZyBpbnNpZ2h0c1xuICAgKi9cbiAgYXN5bmMgZ2V0QXBwb2ludG1lbnRBbmFseXRpY3MoXG4gICAgZmFjaWxpdHlJZDogc3RyaW5nLFxuICAgIHBlcmlvZDogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH1cbiAgKTogUHJvbWlzZTxBcHBvaW50bWVudEFuYWx5dGljcz4ge1xuICAgIGNvbnN0IGFwcG9pbnRtZW50RGF0YSA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlQXBwb2ludG1lbnRNZXRyaWNzKGZhY2lsaXR5SWQsIHBlcmlvZCk7XG4gICAgY29uc3QgYXBwb2ludG1lbnRUeXBlcyA9IGF3YWl0IHRoaXMuYW5hbHl6ZUFwcG9pbnRtZW50VHlwZXMoZmFjaWxpdHlJZCwgcGVyaW9kKTtcbiAgICBjb25zdCBwcm92aWRlclV0aWxpemF0aW9uID0gYXdhaXQgdGhpcy5jYWxjdWxhdGVQcm92aWRlclV0aWxpemF0aW9uKGZhY2lsaXR5SWQsIHBlcmlvZCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uYXBwb2ludG1lbnREYXRhLFxuICAgICAgYXBwb2ludG1lbnRUeXBlcyxcbiAgICAgIHByb3ZpZGVyVXRpbGl6YXRpb25cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBxdWFsaXR5IGFuZCBzYWZldHkgbWV0cmljc1xuICAgKi9cbiAgYXN5bmMgZ2V0UXVhbGl0eU1ldHJpY3MoXG4gICAgZmFjaWxpdHlJZDogc3RyaW5nLFxuICAgIHBlcmlvZDogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH1cbiAgKTogUHJvbWlzZTxRdWFsaXR5TWV0cmljcz4ge1xuICAgIGNvbnN0IHBhdGllbnRTYXRpc2ZhY3Rpb24gPSBhd2FpdCB0aGlzLmNhbGN1bGF0ZVBhdGllbnRTYXRpc2ZhY3Rpb24oZmFjaWxpdHlJZCwgcGVyaW9kKTtcbiAgICBjb25zdCBjbGluaWNhbE1ldHJpY3MgPSBhd2FpdCB0aGlzLmNhbGN1bGF0ZUNsaW5pY2FsTWV0cmljcyhmYWNpbGl0eUlkLCBwZXJpb2QpO1xuICAgIGNvbnN0IHNhZmV0eU1ldHJpY3MgPSBhd2FpdCB0aGlzLmNhbGN1bGF0ZVNhZmV0eU1ldHJpY3MoZmFjaWxpdHlJZCwgcGVyaW9kKTtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXRpZW50U2F0aXNmYWN0aW9uLFxuICAgICAgY2xpbmljYWxNZXRyaWNzLFxuICAgICAgc2FmZXR5TWV0cmljc1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlYWwtdGltZSBvcGVyYXRpb25hbCBkYXNoYm9hcmRcbiAgICovXG4gIGFzeW5jIGdldE9wZXJhdGlvbmFsRGFzaGJvYXJkKGZhY2lsaXR5SWQ6IHN0cmluZyk6IFByb21pc2U8T3BlcmF0aW9uYWxEYXNoYm9hcmQ+IHtcbiAgICBjb25zdCByZWFsVGltZU1ldHJpY3MgPSBhd2FpdCB0aGlzLmdldFJlYWxUaW1lTWV0cmljcyhmYWNpbGl0eUlkKTtcbiAgICBjb25zdCB0b2RheXNQZXJmb3JtYW5jZSA9IGF3YWl0IHRoaXMuZ2V0VG9kYXlzUGVyZm9ybWFuY2UoZmFjaWxpdHlJZCk7XG4gICAgY29uc3QgYWxlcnRzID0gYXdhaXQgdGhpcy5nZXRBY3RpdmVBbGVydHMoZmFjaWxpdHlJZCk7XG4gICAgY29uc3QgdHJlbmRzID0gYXdhaXQgdGhpcy5jYWxjdWxhdGVUcmVuZHMoZmFjaWxpdHlJZCk7XG5cbiAgICAvLyBFbWl0IHJlYWwtdGltZSB1cGRhdGVcbiAgICB0aGlzLmVtaXQoJ2Rhc2hib2FyZC11cGRhdGUnLCB7XG4gICAgICBmYWNpbGl0eUlkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgZGF0YTogeyByZWFsVGltZU1ldHJpY3MsIHRvZGF5c1BlcmZvcm1hbmNlLCBhbGVydHMsIHRyZW5kcyB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVhbFRpbWVNZXRyaWNzLFxuICAgICAgdG9kYXlzUGVyZm9ybWFuY2UsXG4gICAgICBhbGVydHMsXG4gICAgICB0cmVuZHNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgcmVzb3VyY2UgdXRpbGl6YXRpb24gKHJvb21zLCBlcXVpcG1lbnQpXG4gICAqL1xuICBhc3luYyBnZXRSZXNvdXJjZVV0aWxpemF0aW9uKFxuICAgIGZhY2lsaXR5SWQ6IHN0cmluZyxcbiAgICBwZXJpb2Q6IHsgc3RhcnQ6IERhdGU7IGVuZDogRGF0ZSB9XG4gICk6IFByb21pc2U8e1xuICAgIHJvb21VdGlsaXphdGlvbjogQXJyYXk8e1xuICAgICAgcm9vbUlkOiBzdHJpbmc7XG4gICAgICByb29tTmFtZTogc3RyaW5nO1xuICAgICAgcm9vbVR5cGU6IHN0cmluZztcbiAgICAgIHV0aWxpemF0aW9uUmF0ZTogbnVtYmVyO1xuICAgICAgdG90YWxCb29rZWRIb3VyczogbnVtYmVyO1xuICAgICAgYXZhaWxhYmxlSG91cnM6IG51bWJlcjtcbiAgICAgIHR1cm5hcm91bmRUaW1lOiBudW1iZXI7XG4gICAgfT47XG4gICAgZXF1aXBtZW50VXRpbGl6YXRpb246IEFycmF5PHtcbiAgICAgIGVxdWlwbWVudElkOiBzdHJpbmc7XG4gICAgICBlcXVpcG1lbnROYW1lOiBzdHJpbmc7XG4gICAgICB1dGlsaXphdGlvblJhdGU6IG51bWJlcjtcbiAgICAgIG1haW50ZW5hbmNlSG91cnM6IG51bWJlcjtcbiAgICAgIGRvd250aW1lOiBudW1iZXI7XG4gICAgICBlZmZpY2llbmN5OiBudW1iZXI7XG4gICAgfT47XG4gICAgcmVjb21tZW5kYXRpb25zOiBBcnJheTx7XG4gICAgICByZXNvdXJjZVR5cGU6ICdSb29tJyB8ICdFcXVpcG1lbnQnO1xuICAgICAgcmVzb3VyY2VJZDogc3RyaW5nO1xuICAgICAgcmVjb21tZW5kYXRpb246IHN0cmluZztcbiAgICAgIGV4cGVjdGVkSW1wYWN0OiBzdHJpbmc7XG4gICAgICBwcmlvcml0eTogJ0hpZ2gnIHwgJ01lZGl1bScgfCAnTG93JztcbiAgICB9PjtcbiAgfT4ge1xuICAgIGNvbnN0IHJvb21VdGlsaXphdGlvbiA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlUm9vbVV0aWxpemF0aW9uKGZhY2lsaXR5SWQsIHBlcmlvZCk7XG4gICAgY29uc3QgZXF1aXBtZW50VXRpbGl6YXRpb24gPSBhd2FpdCB0aGlzLmNhbGN1bGF0ZUVxdWlwbWVudFV0aWxpemF0aW9uKGZhY2lsaXR5SWQsIHBlcmlvZCk7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVJlc291cmNlUmVjb21tZW5kYXRpb25zKHJvb21VdGlsaXphdGlvbiwgZXF1aXBtZW50VXRpbGl6YXRpb24pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJvb21VdGlsaXphdGlvbixcbiAgICAgIGVxdWlwbWVudFV0aWxpemF0aW9uLFxuICAgICAgcmVjb21tZW5kYXRpb25zXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBvcGVyYXRpb25hbCBpbnNpZ2h0cyBhbmQgcHJlZGljdGlvbnNcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlT3BlcmF0aW9uYWxJbnNpZ2h0cyhcbiAgICBmYWNpbGl0eUlkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx7XG4gICAgaW5zaWdodHM6IEFycmF5PHtcbiAgICAgIGNhdGVnb3J5OiAnUGF0aWVudCBGbG93JyB8ICdTdGFmZmluZycgfCAnUXVhbGl0eScgfCAnRWZmaWNpZW5jeSc7XG4gICAgICBpbnNpZ2h0OiBzdHJpbmc7XG4gICAgICBpbXBhY3Q6ICdIaWdoJyB8ICdNZWRpdW0nIHwgJ0xvdyc7XG4gICAgICBjb25maWRlbmNlOiBudW1iZXI7XG4gICAgICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICAgIH0+O1xuICAgIHByZWRpY3Rpb25zOiBBcnJheTx7XG4gICAgICBtZXRyaWM6IHN0cmluZztcbiAgICAgIGN1cnJlbnRWYWx1ZTogbnVtYmVyO1xuICAgICAgcHJlZGljdGVkVmFsdWU6IG51bWJlcjtcbiAgICAgIHRpbWVmcmFtZTogc3RyaW5nO1xuICAgICAgY29uZmlkZW5jZTogbnVtYmVyO1xuICAgICAgZmFjdG9yczogc3RyaW5nW107XG4gICAgfT47XG4gIH0+IHtcbiAgICBjb25zdCBwYXRpZW50RmxvdyA9IGF3YWl0IHRoaXMuZ2V0UGF0aWVudEZsb3dBbmFseXRpY3MoZmFjaWxpdHlJZCk7XG4gICAgY29uc3QgcXVhbGl0eSA9IGF3YWl0IHRoaXMuZ2V0UXVhbGl0eU1ldHJpY3MoZmFjaWxpdHlJZCwge1xuICAgICAgc3RhcnQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgZW5kOiBuZXcgRGF0ZSgpXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbnNpZ2h0cyA9IFtcbiAgICAgIHtcbiAgICAgICAgY2F0ZWdvcnk6ICdQYXRpZW50IEZsb3cnIGFzIGNvbnN0LFxuICAgICAgICBpbnNpZ2h0OiBwYXRpZW50Rmxvdy5hdmVyYWdlV2FpdFRpbWUgPiAzMCA/IFxuICAgICAgICAgICdQYXRpZW50IHdhaXQgdGltZXMgZXhjZWVkIGJlbmNobWFyayAtIHdvcmtmbG93IG9wdGltaXphdGlvbiBuZWVkZWQnIDpcbiAgICAgICAgICAnUGF0aWVudCBmbG93IHBlcmZvcm1pbmcgd2l0aGluIGFjY2VwdGFibGUgcmFuZ2VzJyxcbiAgICAgICAgaW1wYWN0OiBwYXRpZW50Rmxvdy5hdmVyYWdlV2FpdFRpbWUgPiAzMCA/ICdIaWdoJyBhcyBjb25zdCA6ICdMb3cnIGFzIGNvbnN0LFxuICAgICAgICBjb25maWRlbmNlOiAwLjg1LFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHBhdGllbnRGbG93LmF2ZXJhZ2VXYWl0VGltZSA+IDMwID8gW1xuICAgICAgICAgICdBbmFseXplIGJvdHRsZW5lY2tzIGluIGNoZWNrLWluIHByb2Nlc3MnLFxuICAgICAgICAgICdDb25zaWRlciBhZGRpdGlvbmFsIHN0YWZmaW5nIGR1cmluZyBwZWFrIGhvdXJzJyxcbiAgICAgICAgICAnSW1wbGVtZW50IHBhdGllbnQgZmxvdyBtYW5hZ2VtZW50IHN5c3RlbSdcbiAgICAgICAgXSA6IFsnQ29udGludWUgbW9uaXRvcmluZyBjdXJyZW50IHBlcmZvcm1hbmNlJ11cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNhdGVnb3J5OiAnUXVhbGl0eScgYXMgY29uc3QsXG4gICAgICAgIGluc2lnaHQ6IHF1YWxpdHkucGF0aWVudFNhdGlzZmFjdGlvbi5vdmVyYWxsU2NvcmUgPCA0LjAgP1xuICAgICAgICAgICdQYXRpZW50IHNhdGlzZmFjdGlvbiBiZWxvdyB0YXJnZXQgLSBzZXJ2aWNlIGltcHJvdmVtZW50cyBuZWVkZWQnIDpcbiAgICAgICAgICAnUGF0aWVudCBzYXRpc2ZhY3Rpb24gbWVldGluZyBwZXJmb3JtYW5jZSB0YXJnZXRzJyxcbiAgICAgICAgaW1wYWN0OiBxdWFsaXR5LnBhdGllbnRTYXRpc2ZhY3Rpb24ub3ZlcmFsbFNjb3JlIDwgNC4wID8gJ01lZGl1bScgYXMgY29uc3QgOiAnTG93JyBhcyBjb25zdCxcbiAgICAgICAgY29uZmlkZW5jZTogMC43OCxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBxdWFsaXR5LnBhdGllbnRTYXRpc2ZhY3Rpb24ub3ZlcmFsbFNjb3JlIDwgNC4wID8gW1xuICAgICAgICAgICdGb2N1cyBvbiBjb21tdW5pY2F0aW9uIGFuZCBiZWRzaWRlIG1hbm5lciB0cmFpbmluZycsXG4gICAgICAgICAgJ1JlZHVjZSB3YWl0IHRpbWVzIGFuZCBpbXByb3ZlIHNjaGVkdWxpbmcnLFxuICAgICAgICAgICdJbXBsZW1lbnQgcGF0aWVudCBmZWVkYmFjayBzeXN0ZW0nXG4gICAgICAgIF0gOiBbJ01haW50YWluIGN1cnJlbnQgcXVhbGl0eSBpbml0aWF0aXZlcyddXG4gICAgICB9XG4gICAgXTtcblxuICAgIGNvbnN0IHByZWRpY3Rpb25zID0gW1xuICAgICAge1xuICAgICAgICBtZXRyaWM6ICdBdmVyYWdlIFdhaXQgVGltZScsXG4gICAgICAgIGN1cnJlbnRWYWx1ZTogcGF0aWVudEZsb3cuYXZlcmFnZVdhaXRUaW1lLFxuICAgICAgICBwcmVkaWN0ZWRWYWx1ZTogcGF0aWVudEZsb3cuYXZlcmFnZVdhaXRUaW1lICogMS4wNSwgLy8gNSUgaW5jcmVhc2UgcHJlZGljdGVkXG4gICAgICAgIHRpbWVmcmFtZTogJ05leHQgMzAgZGF5cycsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNzIsXG4gICAgICAgIGZhY3RvcnM6IFsnU2Vhc29uYWwgdm9sdW1lIGluY3JlYXNlJywgJ1N0YWZmIHZhY2F0aW9uIHNjaGVkdWxlcyddXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBtZXRyaWM6ICdQYXRpZW50IFNhdGlzZmFjdGlvbicsXG4gICAgICAgIGN1cnJlbnRWYWx1ZTogcXVhbGl0eS5wYXRpZW50U2F0aXNmYWN0aW9uLm92ZXJhbGxTY29yZSxcbiAgICAgICAgcHJlZGljdGVkVmFsdWU6IHF1YWxpdHkucGF0aWVudFNhdGlzZmFjdGlvbi5vdmVyYWxsU2NvcmUgKyAwLjEsXG4gICAgICAgIHRpbWVmcmFtZTogJ05leHQgcXVhcnRlcicsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNjgsXG4gICAgICAgIGZhY3RvcnM6IFsnUmVjZW50IHByb2Nlc3MgaW1wcm92ZW1lbnRzJywgJ1N0YWZmIHRyYWluaW5nIGluaXRpYXRpdmVzJ11cbiAgICAgIH1cbiAgICBdO1xuXG4gICAgcmV0dXJuIHsgaW5zaWdodHMsIHByZWRpY3Rpb25zIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNhbGN1bGF0ZUN1cnJlbnRQYXRpZW50RmxvdyhmYWNpbGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIE1vY2sgaW1wbGVtZW50YXRpb24gLSB3b3VsZCBpbnRlZ3JhdGUgd2l0aCByZWFsLXRpbWUgRUhSIGRhdGFcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxQYXRpZW50czogMTI3LFxuICAgICAgYXZlcmFnZVdhaXRUaW1lOiAxOCwgLy8gbWludXRlc1xuICAgICAgYXZlcmFnZVZpc2l0RHVyYXRpb246IDQ1LCAvLyBtaW51dGVzXG4gICAgICBwYXRpZW50VGhyb3VnaHB1dDogODUgLy8gcGF0aWVudHMgcGVyIGRheVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGlkZW50aWZ5Qm90dGxlbmVja3MoZmFjaWxpdHlJZDogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGxvY2F0aW9uOiAnQ2hlY2staW4gRGVzaycsXG4gICAgICAgIGF2ZXJhZ2VXYWl0VGltZTogMTIsXG4gICAgICAgIGltcGFjdGVkUGF0aWVudHM6IDQ1LFxuICAgICAgICBzZXZlcml0eTogJ01lZGl1bScgYXMgY29uc3RcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGxvY2F0aW9uOiAnTGFiIERyYXcgU3RhdGlvbicsXG4gICAgICAgIGF2ZXJhZ2VXYWl0VGltZTogMjUsXG4gICAgICAgIGltcGFjdGVkUGF0aWVudHM6IDI4LFxuICAgICAgICBzZXZlcml0eTogJ0hpZ2gnIGFzIGNvbnN0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsb2NhdGlvbjogJ0V4YW0gUm9vbSAzJyxcbiAgICAgICAgYXZlcmFnZVdhaXRUaW1lOiA4LFxuICAgICAgICBpbXBhY3RlZFBhdGllbnRzOiAxNSxcbiAgICAgICAgc2V2ZXJpdHk6ICdMb3cnIGFzIGNvbnN0XG4gICAgICB9XG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0SG91cmx5Rmxvd0RhdGEoZmFjaWxpdHlJZDogc3RyaW5nLCBwZXJpb2Q/OiBhbnkpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc3QgaG91cmx5RGF0YSA9IFtdO1xuICAgIFxuICAgIGZvciAobGV0IGhvdXIgPSA4OyBob3VyIDw9IDE4OyBob3VyKyspIHtcbiAgICAgIGhvdXJseURhdGEucHVzaCh7XG4gICAgICAgIGhvdXIsXG4gICAgICAgIGNoZWNrZWRJbjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTUpICsgNSxcbiAgICAgICAgaW5Qcm9ncmVzczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTIpICsgMyxcbiAgICAgICAgY29tcGxldGVkOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxOCkgKyA4LFxuICAgICAgICBhdmVyYWdlV2FpdFRpbWU6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwKSArIDEwXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGhvdXJseURhdGE7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNhbGN1bGF0ZVN0YWZmVXRpbGl6YXRpb24oXG4gICAgZmFjaWxpdHlJZDogc3RyaW5nLFxuICAgIHBlcmlvZDogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0sXG4gICAgZGVwYXJ0bWVudElkPzogc3RyaW5nXG4gICk6IFByb21pc2U8YW55W10+IHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBzdGFmZklkOiAnU1RBRkYwMDEnLFxuICAgICAgICBzdGFmZk5hbWU6ICdTYXJhaCBKb2huc29uLCBSTicsXG4gICAgICAgIHJvbGU6ICdSZWdpc3RlcmVkIE51cnNlJyxcbiAgICAgICAgc2NoZWR1bGVkSG91cnM6IDE2MCxcbiAgICAgICAgYWN0dWFsSG91cnM6IDE2NCxcbiAgICAgICAgdXRpbGl6YXRpb25SYXRlOiAxMDIuNSxcbiAgICAgICAgcGF0aWVudHNTZWVuOiAxODAsXG4gICAgICAgIGF2Z1RpbWVQZXJQYXRpZW50OiAzNSxcbiAgICAgICAgcHJvZHVjdGl2aXR5U2NvcmU6IDkyXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBzdGFmZklkOiAnU1RBRkYwMDInLFxuICAgICAgICBzdGFmZk5hbWU6ICdNaWtlIENoZW4sIE1BJyxcbiAgICAgICAgcm9sZTogJ01lZGljYWwgQXNzaXN0YW50JyxcbiAgICAgICAgc2NoZWR1bGVkSG91cnM6IDE2MCxcbiAgICAgICAgYWN0dWFsSG91cnM6IDE1NSxcbiAgICAgICAgdXRpbGl6YXRpb25SYXRlOiA5Ni45LFxuICAgICAgICBwYXRpZW50c1NlZW46IDIyMCxcbiAgICAgICAgYXZnVGltZVBlclBhdGllbnQ6IDI4LFxuICAgICAgICBwcm9kdWN0aXZpdHlTY29yZTogODhcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHN0YWZmSWQ6ICdTVEFGRjAwMycsXG4gICAgICAgIHN0YWZmTmFtZTogJ0xpc2EgUm9kcmlndWV6LCBSTicsXG4gICAgICAgIHJvbGU6ICdSZWdpc3RlcmVkIE51cnNlJyxcbiAgICAgICAgc2NoZWR1bGVkSG91cnM6IDEyMCxcbiAgICAgICAgYWN0dWFsSG91cnM6IDExOCxcbiAgICAgICAgdXRpbGl6YXRpb25SYXRlOiA5OC4zLFxuICAgICAgICBwYXRpZW50c1NlZW46IDE0NSxcbiAgICAgICAgYXZnVGltZVBlclBhdGllbnQ6IDMyLFxuICAgICAgICBwcm9kdWN0aXZpdHlTY29yZTogODVcbiAgICAgIH1cbiAgICBdO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjYWxjdWxhdGVPdmVydGltZU1ldHJpY3MoXG4gICAgZmFjaWxpdHlJZDogc3RyaW5nLFxuICAgIHBlcmlvZDogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0sXG4gICAgZGVwYXJ0bWVudElkPzogc3RyaW5nXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsT3ZlcnRpbWVIb3VyczogNDgsXG4gICAgICBvdmVydGltZUNvc3Q6IDI4ODAsIC8vICQ2MC9ob3VyIGF2ZXJhZ2VcbiAgICAgIHN0YWZmV2l0aE92ZXJ0aW1lOiAzXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVTdGFmZmluZ1JlY29tbWVuZGF0aW9ucyhzdGFmZk1ldHJpY3M6IGFueVtdLCBvdmVydGltZU1ldHJpY3M6IGFueSk6IFByb21pc2U8YW55W10+IHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBbXTtcblxuICAgIGNvbnN0IGF2Z1V0aWxpemF0aW9uID0gc3RhZmZNZXRyaWNzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLnV0aWxpemF0aW9uUmF0ZSwgMCkgLyBzdGFmZk1ldHJpY3MubGVuZ3RoO1xuICAgIFxuICAgIGlmIChhdmdVdGlsaXphdGlvbiA+IDEwMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiAnU3RhZmZpbmcnLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjogJ0NvbnNpZGVyIGFkZGluZyBhZGRpdGlvbmFsIHN0YWZmIHRvIHJlZHVjZSBvdmVydGltZSBhbmQgaW1wcm92ZSB3b3JrLWxpZmUgYmFsYW5jZScsXG4gICAgICAgIGV4cGVjdGVkSW1wYWN0OiAnUmVkdWNlIG92ZXJ0aW1lIGNvc3RzIGJ5IDMwJSwgaW1wcm92ZSBzdGFmZiBzYXRpc2ZhY3Rpb24nLFxuICAgICAgICBwcmlvcml0eTogJ0hpZ2gnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAob3ZlcnRpbWVNZXRyaWNzLnRvdGFsT3ZlcnRpbWVIb3VycyA+IDQwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdTY2hlZHVsaW5nJyxcbiAgICAgICAgcmVjb21tZW5kYXRpb246ICdPcHRpbWl6ZSBzY2hlZHVsaW5nIHRvIGJldHRlciBkaXN0cmlidXRlIHdvcmtsb2FkIGFuZCBtaW5pbWl6ZSBvdmVydGltZScsXG4gICAgICAgIGV4cGVjdGVkSW1wYWN0OiAnUmVkdWNlIG92ZXJ0aW1lIGhvdXJzIGJ5IDI1JScsXG4gICAgICAgIHByaW9yaXR5OiAnTWVkaXVtJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsY3VsYXRlQXBwb2ludG1lbnRNZXRyaWNzKGZhY2lsaXR5SWQ6IHN0cmluZywgcGVyaW9kOiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgdG90YWxBcHBvaW50bWVudHMgPSAxMjUwO1xuICAgIGNvbnN0IHNjaGVkdWxlZEFwcG9pbnRtZW50cyA9IDEyMDA7XG4gICAgY29uc3QgY29tcGxldGVkQXBwb2ludG1lbnRzID0gMTA1MDtcbiAgICBjb25zdCBjYW5jZWxsZWRBcHBvaW50bWVudHMgPSAxMjA7XG4gICAgY29uc3Qgbm9TaG93QXBwb2ludG1lbnRzID0gODA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxBcHBvaW50bWVudHMsXG4gICAgICBzY2hlZHVsZWRBcHBvaW50bWVudHMsXG4gICAgICBjb21wbGV0ZWRBcHBvaW50bWVudHMsXG4gICAgICBjYW5jZWxsZWRBcHBvaW50bWVudHMsXG4gICAgICBub1Nob3dBcHBvaW50bWVudHMsXG4gICAgICBjb21wbGV0aW9uUmF0ZTogKGNvbXBsZXRlZEFwcG9pbnRtZW50cyAvIHNjaGVkdWxlZEFwcG9pbnRtZW50cykgKiAxMDAsXG4gICAgICBjYW5jZWxsYXRpb25SYXRlOiAoY2FuY2VsbGVkQXBwb2ludG1lbnRzIC8gc2NoZWR1bGVkQXBwb2ludG1lbnRzKSAqIDEwMCxcbiAgICAgIG5vU2hvd1JhdGU6IChub1Nob3dBcHBvaW50bWVudHMgLyBzY2hlZHVsZWRBcHBvaW50bWVudHMpICogMTAwLFxuICAgICAgYXZlcmFnZUxlYWRUaW1lOiAxNCAvLyBkYXlzXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZUFwcG9pbnRtZW50VHlwZXMoZmFjaWxpdHlJZDogc3RyaW5nLCBwZXJpb2Q6IHsgc3RhcnQ6IERhdGU7IGVuZDogRGF0ZSB9KTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdGb2xsb3ctdXAnLFxuICAgICAgICBjb3VudDogNDUwLFxuICAgICAgICBwZXJjZW50YWdlOiA0Mi45LFxuICAgICAgICBhdmVyYWdlRHVyYXRpb246IDMwLFxuICAgICAgICBub1Nob3dSYXRlOiA2LjJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdOZXcgUGF0aWVudCcsXG4gICAgICAgIGNvdW50OiAyODAsXG4gICAgICAgIHBlcmNlbnRhZ2U6IDI2LjcsXG4gICAgICAgIGF2ZXJhZ2VEdXJhdGlvbjogNjAsXG4gICAgICAgIG5vU2hvd1JhdGU6IDguNVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdHlwZTogJ0FubnVhbCBQaHlzaWNhbCcsXG4gICAgICAgIGNvdW50OiAxODAsXG4gICAgICAgIHBlcmNlbnRhZ2U6IDE3LjEsXG4gICAgICAgIGF2ZXJhZ2VEdXJhdGlvbjogNDUsXG4gICAgICAgIG5vU2hvd1JhdGU6IDQuOFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdHlwZTogJ1VyZ2VudCBDYXJlJyxcbiAgICAgICAgY291bnQ6IDkwLFxuICAgICAgICBwZXJjZW50YWdlOiA4LjYsXG4gICAgICAgIGF2ZXJhZ2VEdXJhdGlvbjogMjUsXG4gICAgICAgIG5vU2hvd1JhdGU6IDEyLjFcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdQcm9jZWR1cmUnLFxuICAgICAgICBjb3VudDogNTAsXG4gICAgICAgIHBlcmNlbnRhZ2U6IDQuOCxcbiAgICAgICAgYXZlcmFnZUR1cmF0aW9uOiA5MCxcbiAgICAgICAgbm9TaG93UmF0ZTogMy4yXG4gICAgICB9XG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsY3VsYXRlUHJvdmlkZXJVdGlsaXphdGlvbihmYWNpbGl0eUlkOiBzdHJpbmcsIHBlcmlvZDogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0pOiBQcm9taXNlPGFueVtdPiB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgcHJvdmlkZXJJZDogJ1BST1YwMDEnLFxuICAgICAgICBwcm92aWRlck5hbWU6ICdEci4gU21pdGgnLFxuICAgICAgICBzY2hlZHVsZWRTbG90czogMjAwLFxuICAgICAgICBmaWxsZWRTbG90czogMTg1LFxuICAgICAgICB1dGlsaXphdGlvblJhdGU6IDkyLjUsXG4gICAgICAgIGF2ZXJhZ2VBcHBvaW50bWVudER1cmF0aW9uOiAzNVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcHJvdmlkZXJJZDogJ1BST1YwMDInLFxuICAgICAgICBwcm92aWRlck5hbWU6ICdEci4gSm9obnNvbicsXG4gICAgICAgIHNjaGVkdWxlZFNsb3RzOiAxODAsXG4gICAgICAgIGZpbGxlZFNsb3RzOiAxNjUsXG4gICAgICAgIHV0aWxpemF0aW9uUmF0ZTogOTEuNyxcbiAgICAgICAgYXZlcmFnZUFwcG9pbnRtZW50RHVyYXRpb246IDQyXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwcm92aWRlcklkOiAnUFJPVjAwMycsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogJ0RyLiBXaWxsaWFtcycsXG4gICAgICAgIHNjaGVkdWxlZFNsb3RzOiAxNjAsXG4gICAgICAgIGZpbGxlZFNsb3RzOiAxNDIsXG4gICAgICAgIHV0aWxpemF0aW9uUmF0ZTogODguOCxcbiAgICAgICAgYXZlcmFnZUFwcG9pbnRtZW50RHVyYXRpb246IDM4XG4gICAgICB9XG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsY3VsYXRlUGF0aWVudFNhdGlzZmFjdGlvbihmYWNpbGl0eUlkOiBzdHJpbmcsIHBlcmlvZDogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB7XG4gICAgICBvdmVyYWxsU2NvcmU6IDQuMixcbiAgICAgIHJlc3BvbnNlUmF0ZTogNjUsXG4gICAgICBucHNTY29yZTogMzIsXG4gICAgICBjYXRlZ29yaWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBjYXRlZ29yeTogJ0NvbW11bmljYXRpb24nLFxuICAgICAgICAgIHNjb3JlOiA0LjMsXG4gICAgICAgICAgYmVuY2htYXJrOiA0LjUsXG4gICAgICAgICAgdHJlbmQ6ICdJbXByb3ZpbmcnIGFzIGNvbnN0XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBjYXRlZ29yeTogJ1dhaXQgVGltZScsXG4gICAgICAgICAgc2NvcmU6IDMuOCxcbiAgICAgICAgICBiZW5jaG1hcms6IDQuMCxcbiAgICAgICAgICB0cmVuZDogJ1N0YWJsZScgYXMgY29uc3RcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNhdGVnb3J5OiAnU3RhZmYgQ291cnRlc3knLFxuICAgICAgICAgIHNjb3JlOiA0LjUsXG4gICAgICAgICAgYmVuY2htYXJrOiA0LjMsXG4gICAgICAgICAgdHJlbmQ6ICdTdGFibGUnIGFzIGNvbnN0XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBjYXRlZ29yeTogJ0ZhY2lsaXR5IENsZWFubGluZXNzJyxcbiAgICAgICAgICBzY29yZTogNC42LFxuICAgICAgICAgIGJlbmNobWFyazogNC40LFxuICAgICAgICAgIHRyZW5kOiAnSW1wcm92aW5nJyBhcyBjb25zdFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsY3VsYXRlQ2xpbmljYWxNZXRyaWNzKGZhY2lsaXR5SWQ6IHN0cmluZywgcGVyaW9kOiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlYWRtaXNzaW9uUmF0ZTogOC41LCAvLyBwZXJjZW50YWdlXG4gICAgICBjb21wbGljYXRpb25SYXRlOiAyLjEsXG4gICAgICBpbmZlY3Rpb25SYXRlOiAwLjgsXG4gICAgICBtb3J0YWxpdHlSYXRlOiAwLjIsXG4gICAgICBsZW5ndGhPZlN0YXk6IDMuMiAvLyBkYXlzXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsY3VsYXRlU2FmZXR5TWV0cmljcyhmYWNpbGl0eUlkOiBzdHJpbmcsIHBlcmlvZDogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB7XG4gICAgICBhZHZlcnNlRXZlbnRzOiAxMixcbiAgICAgIG5lYXJNaXNzZXM6IDQ1LFxuICAgICAgc2FmZXR5U2NvcmU6IDkyLFxuICAgICAgaW5jaWRlbnRzQnlUeXBlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnTWVkaWNhdGlvbiBFcnJvcicsXG4gICAgICAgICAgY291bnQ6IDgsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdNZWRpdW0nIGFzIGNvbnN0XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnRmFsbCcsXG4gICAgICAgICAgY291bnQ6IDMsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdIaWdoJyBhcyBjb25zdFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ0VxdWlwbWVudCBNYWxmdW5jdGlvbicsXG4gICAgICAgICAgY291bnQ6IDIsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdMb3cnIGFzIGNvbnN0XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRSZWFsVGltZU1ldHJpY3MoZmFjaWxpdHlJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudGx5SW5GYWNpbGl0eTogNDMsXG4gICAgICB3YWl0aW5nUGF0aWVudHM6IDEyLFxuICAgICAgaW5Qcm9ncmVzc0VuY291bnRlcnM6IDE4LFxuICAgICAgY29tcGxldGVkVG9kYXk6IDY3LFxuICAgICAgYXZlcmFnZVdhaXRUaW1lOiAxNSxcbiAgICAgIHN0YWZmT25EdXR5OiAxNSxcbiAgICAgIGF2YWlsYWJsZVJvb21zOiA4XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0VG9kYXlzUGVyZm9ybWFuY2UoZmFjaWxpdHlJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBwb2ludG1lbnRzU2NoZWR1bGVkOiA4NSxcbiAgICAgIGFwcG9pbnRtZW50c0NvbXBsZXRlZDogNjcsXG4gICAgICB3YWxrSW5zUHJvY2Vzc2VkOiAxMixcbiAgICAgIHBhdGllbnRTYXRpc2ZhY3Rpb25Ub2RheTogNC4zLFxuICAgICAgcmV2ZW51ZVRvZGF5OiAxODUwMFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldEFjdGl2ZUFsZXJ0cyhmYWNpbGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdBTEVSVDAwMScsXG4gICAgICAgIHR5cGU6ICdXYXJuaW5nJyBhcyBjb25zdCxcbiAgICAgICAgdGl0bGU6ICdIaWdoIFdhaXQgVGltZXMnLFxuICAgICAgICBtZXNzYWdlOiAnQXZlcmFnZSB3YWl0IHRpbWUgaW4gTGFiIERyYXcgU3RhdGlvbiBleGNlZWRzIDIwIG1pbnV0ZXMnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIGFja25vd2xlZGdlZDogZmFsc2VcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnQUxFUlQwMDInLFxuICAgICAgICB0eXBlOiAnSW5mbycgYXMgY29uc3QsXG4gICAgICAgIHRpdGxlOiAnUm9vbSBVdGlsaXphdGlvbicsXG4gICAgICAgIG1lc3NhZ2U6ICdFeGFtIFJvb20gNSBoYXMgYmVlbiBhdmFpbGFibGUgZm9yIG92ZXIgMiBob3VycycsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDIgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgIGFja25vd2xlZGdlZDogdHJ1ZVxuICAgICAgfVxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNhbGN1bGF0ZVRyZW5kcyhmYWNpbGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB7XG4gICAgICBwYXRpZW50Vm9sdW1lVHJlbmQ6ICdVcCcgYXMgY29uc3QsXG4gICAgICB3YWl0VGltZVRyZW5kOiAnU3RhYmxlJyBhcyBjb25zdCxcbiAgICAgIHNhdGlzZmFjdGlvblRyZW5kOiAnVXAnIGFzIGNvbnN0XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsY3VsYXRlUm9vbVV0aWxpemF0aW9uKGZhY2lsaXR5SWQ6IHN0cmluZywgcGVyaW9kOiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfSk6IFByb21pc2U8YW55W10+IHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICByb29tSWQ6ICdST09NMDAxJyxcbiAgICAgICAgcm9vbU5hbWU6ICdFeGFtIFJvb20gMScsXG4gICAgICAgIHJvb21UeXBlOiAnRXhhbScsXG4gICAgICAgIHV0aWxpemF0aW9uUmF0ZTogODUuMixcbiAgICAgICAgdG90YWxCb29rZWRIb3VyczogMTM2LFxuICAgICAgICBhdmFpbGFibGVIb3VyczogMTYwLFxuICAgICAgICB0dXJuYXJvdW5kVGltZTogMTIgLy8gbWludXRlc1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcm9vbUlkOiAnUk9PTTAwMicsXG4gICAgICAgIHJvb21OYW1lOiAnUHJvY2VkdXJlIFJvb20gQScsXG4gICAgICAgIHJvb21UeXBlOiAnUHJvY2VkdXJlJyxcbiAgICAgICAgdXRpbGl6YXRpb25SYXRlOiA5Mi41LFxuICAgICAgICB0b3RhbEJvb2tlZEhvdXJzOiAxNDgsXG4gICAgICAgIGF2YWlsYWJsZUhvdXJzOiAxNjAsXG4gICAgICAgIHR1cm5hcm91bmRUaW1lOiAyMFxuICAgICAgfVxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNhbGN1bGF0ZUVxdWlwbWVudFV0aWxpemF0aW9uKGZhY2lsaXR5SWQ6IHN0cmluZywgcGVyaW9kOiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfSk6IFByb21pc2U8YW55W10+IHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBlcXVpcG1lbnRJZDogJ0VRMDAxJyxcbiAgICAgICAgZXF1aXBtZW50TmFtZTogJ1gtUmF5IE1hY2hpbmUnLFxuICAgICAgICB1dGlsaXphdGlvblJhdGU6IDc4LjUsXG4gICAgICAgIG1haW50ZW5hbmNlSG91cnM6IDgsXG4gICAgICAgIGRvd250aW1lOiAyLjUsXG4gICAgICAgIGVmZmljaWVuY3k6IDkyLjNcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGVxdWlwbWVudElkOiAnRVEwMDInLFxuICAgICAgICBlcXVpcG1lbnROYW1lOiAnRUtHIE1hY2hpbmUnLFxuICAgICAgICB1dGlsaXphdGlvblJhdGU6IDY1LjIsXG4gICAgICAgIG1haW50ZW5hbmNlSG91cnM6IDQsXG4gICAgICAgIGRvd250aW1lOiAxLjAsXG4gICAgICAgIGVmZmljaWVuY3k6IDk1LjhcbiAgICAgIH1cbiAgICBdO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVJlc291cmNlUmVjb21tZW5kYXRpb25zKHJvb21VdGlsOiBhbnlbXSwgZXF1aXBVdGlsOiBhbnlbXSk6IFByb21pc2U8YW55W10+IHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBbXTtcblxuICAgIGZvciAoY29uc3Qgcm9vbSBvZiByb29tVXRpbCkge1xuICAgICAgaWYgKHJvb20udXRpbGl6YXRpb25SYXRlID4gOTApIHtcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICAgIHJlc291cmNlVHlwZTogJ1Jvb20nLFxuICAgICAgICAgIHJlc291cmNlSWQ6IHJvb20ucm9vbUlkLFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uOiAnQ29uc2lkZXIgYWRkaW5nIGNhcGFjaXR5IG9yIG9wdGltaXppbmcgc2NoZWR1bGluZycsXG4gICAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6ICdSZWR1Y2Ugd2FpdCB0aW1lcyBhbmQgaW1wcm92ZSBwYXRpZW50IGZsb3cnLFxuICAgICAgICAgIHByaW9yaXR5OiAnSGlnaCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlcXVpcG1lbnQgb2YgZXF1aXBVdGlsKSB7XG4gICAgICBpZiAoZXF1aXBtZW50LnV0aWxpemF0aW9uUmF0ZSA8IDUwKSB7XG4gICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgICAgICByZXNvdXJjZVR5cGU6ICdFcXVpcG1lbnQnLFxuICAgICAgICAgIHJlc291cmNlSWQ6IGVxdWlwbWVudC5lcXVpcG1lbnRJZCxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbjogJ0V2YWx1YXRlIG5lZWQgZm9yIHRoaXMgZXF1aXBtZW50IG9yIGZpbmQgYWRkaXRpb25hbCB1c2VzJyxcbiAgICAgICAgICBleHBlY3RlZEltcGFjdDogJ09wdGltaXplIHJlc291cmNlIGFsbG9jYXRpb24gYW5kIHJlZHVjZSBjb3N0cycsXG4gICAgICAgICAgcHJpb3JpdHk6ICdNZWRpdW0nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldERlcGFydG1lbnROYW1lKGRlcGFydG1lbnRJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBkZXBhcnRtZW50czogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdERVBUMDAxJzogJ0VtZXJnZW5jeSBEZXBhcnRtZW50JyxcbiAgICAgICdERVBUMDAyJzogJ0ludGVybmFsIE1lZGljaW5lJyxcbiAgICAgICdERVBUMDAzJzogJ0NhcmRpb2xvZ3knLFxuICAgICAgJ0RFUFQwMDQnOiAnT3J0aG9wZWRpY3MnXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gZGVwYXJ0bWVudHNbZGVwYXJ0bWVudElkXSB8fCAnVW5rbm93biBEZXBhcnRtZW50JztcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRSZWFsVGltZU1vbml0b3JpbmcoKTogdm9pZCB7XG4gICAgLy8gU2ltdWxhdGUgcmVhbC10aW1lIGRhdGEgdXBkYXRlc1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuZW1pdCgncmVhbC10aW1lLXVwZGF0ZScsIHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBtZXRyaWNzOiB7XG4gICAgICAgICAgY3VycmVudFBhdGllbnRzOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1MCkgKyAyMCxcbiAgICAgICAgICB3YWl0aW5nUGF0aWVudHM6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE1KSArIDUsXG4gICAgICAgICAgYXZlcmFnZVdhaXRUaW1lOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMCkgKyAxMFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCAzMDAwMCk7IC8vIFVwZGF0ZSBldmVyeSAzMCBzZWNvbmRzXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVCZW5jaG1hcmtzKCk6IHZvaWQge1xuICAgIHRoaXMuYmVuY2htYXJrcy5zZXQoJ2F2ZXJhZ2Utd2FpdC10aW1lJywgMTUpO1xuICAgIHRoaXMuYmVuY2htYXJrcy5zZXQoJ3BhdGllbnQtc2F0aXNmYWN0aW9uJywgNC41KTtcbiAgICB0aGlzLmJlbmNobWFya3Muc2V0KCdzdGFmZi11dGlsaXphdGlvbicsIDg1KTtcbiAgICB0aGlzLmJlbmNobWFya3Muc2V0KCdyb29tLXV0aWxpemF0aW9uJywgODApO1xuICAgIHRoaXMuYmVuY2htYXJrcy5zZXQoJ25vLXNob3ctcmF0ZScsIDEwKTtcbiAgICB0aGlzLmJlbmNobWFya3Muc2V0KCdjYW5jZWxsYXRpb24tcmF0ZScsIDgpO1xuICB9XG59Il0sInZlcnNpb24iOjN9