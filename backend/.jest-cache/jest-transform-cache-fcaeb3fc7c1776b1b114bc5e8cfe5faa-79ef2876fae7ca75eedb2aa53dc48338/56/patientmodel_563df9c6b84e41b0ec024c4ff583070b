91e628fa6188229493159742b302c333
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateOmniCarePatient = validateOmniCarePatient;
exports.validateEmergencyContact = validateEmergencyContact;
exports.validateInsurance = validateInsurance;
exports.validatePatientAlert = validatePatientAlert;
exports.formatPatientName = formatPatientName;
exports.calculateAge = calculateAge;
exports.getActiveInsurance = getActiveInsurance;
exports.hasActiveAlerts = hasActiveAlerts;
/**
 * Validation Functions
 */
function validateOmniCarePatient(patient) {
    const errors = [];
    if (!patient.resourceType || patient.resourceType !== 'Patient') {
        errors.push('resourceType must be "Patient"');
    }
    if (!patient.name || patient.name.length === 0) {
        errors.push('Patient name is required');
    }
    if (!patient.omnicarePatientId) {
        errors.push('omnicarePatientId is required');
    }
    if (patient.birthDate) {
        const birthDate = new Date(patient.birthDate);
        if (birthDate > new Date()) {
            errors.push('Birth date cannot be in the future');
        }
    }
    return {
        valid: errors.length === 0,
        errors
    };
}
function validateEmergencyContact(contact) {
    const errors = [];
    if (!contact.name) {
        errors.push('Emergency contact name is required');
    }
    if (!contact.relationship) {
        errors.push('Emergency contact relationship is required');
    }
    return {
        valid: errors.length === 0,
        errors
    };
}
function validateInsurance(insurance) {
    const errors = [];
    if (!insurance.payorName) {
        errors.push('Insurance payor name is required');
    }
    if (!insurance.planName) {
        errors.push('Insurance plan name is required');
    }
    return {
        valid: errors.length === 0,
        errors
    };
}
function validatePatientAlert(alert) {
    const errors = [];
    if (!alert.type) {
        errors.push('Alert type is required');
    }
    if (!alert.severity) {
        errors.push('Alert severity is required');
    }
    if (!alert.title) {
        errors.push('Alert title is required');
    }
    return {
        valid: errors.length === 0,
        errors
    };
}
/**
 * Utility Functions
 */
function formatPatientName(nameOrPatient) {
    // If it's a patient object, get the first name
    if ('resourceType' in nameOrPatient && nameOrPatient.resourceType === 'Patient') {
        const patient = nameOrPatient;
        if (!patient.name || patient.name.length === 0) {
            return '';
        }
        const name = patient.name[0];
        if (!name)
            return '';
        const given = name.given?.join(' ') || '';
        const family = name.family || '';
        return `${given} ${family}`.trim();
    }
    // If it's a HumanName object
    const name = nameOrPatient;
    const given = name.given?.join(' ') || '';
    const family = name.family || '';
    return `${given} ${family}`.trim();
}
function calculateAge(birthDate) {
    const birth = new Date(birthDate);
    const today = new Date();
    let age = today.getFullYear() - birth.getFullYear();
    const monthDiff = today.getMonth() - birth.getMonth();
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
        age--;
    }
    return age;
}
function getActiveInsurance(insurance) {
    return insurance.find(ins => ins.active && ins.priority === 1);
}
function hasActiveAlerts(alerts) {
    return alerts.some(alert => alert.active);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3JvZHJpZ28vY2xhdWRlLXByb2plY3RzL09tbmlDYXJlL2JhY2tlbmQvc3JjL21vZGVscy9wYXRpZW50Lm1vZGVsLnRzIiwibWFwcGluZ3MiOiI7O0FBeVZBLDBEQTBCQztBQUVELDREQWVDO0FBRUQsOENBZUM7QUFFRCxvREFtQkM7QUFLRCw4Q0FtQkM7QUFFRCxvQ0FTQztBQUVELGdEQUVDO0FBRUQsMENBRUM7QUEvSEQ7O0dBRUc7QUFDSCxTQUFnQix1QkFBdUIsQ0FBQyxPQUFpQztJQUN2RSxNQUFNLE1BQU0sR0FBYSxFQUFFLENBQUM7SUFFNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLElBQUksT0FBTyxDQUFDLFlBQVksS0FBSyxTQUFTLEVBQUUsQ0FBQztRQUNoRSxNQUFNLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUVELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQy9DLE1BQU0sQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQsSUFBSSxDQUFFLE9BQWUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQsSUFBSSxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDdEIsTUFBTSxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlDLElBQUksU0FBUyxHQUFHLElBQUksSUFBSSxFQUFFLEVBQUUsQ0FBQztZQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxDQUFDLENBQUM7UUFDcEQsQ0FBQztJQUNILENBQUM7SUFFRCxPQUFPO1FBQ0wsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQztRQUMxQixNQUFNO0tBQ1AsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFnQix3QkFBd0IsQ0FBQyxPQUF5QztJQUNoRixNQUFNLE1BQU0sR0FBYSxFQUFFLENBQUM7SUFFNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNsQixNQUFNLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUVELElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxPQUFPO1FBQ0wsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQztRQUMxQixNQUFNO0tBQ1AsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFnQixpQkFBaUIsQ0FBQyxTQUF3QztJQUN4RSxNQUFNLE1BQU0sR0FBYSxFQUFFLENBQUM7SUFFNUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUN6QixNQUFNLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVELElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDeEIsTUFBTSxDQUFDLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFRCxPQUFPO1FBQ0wsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQztRQUMxQixNQUFNO0tBQ1AsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFnQixvQkFBb0IsQ0FBQyxLQUE0QjtJQUMvRCxNQUFNLE1BQU0sR0FBYSxFQUFFLENBQUM7SUFFNUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNoQixNQUFNLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVELElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDcEIsTUFBTSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFRCxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2pCLE1BQU0sQ0FBQyxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQsT0FBTztRQUNMLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUM7UUFDMUIsTUFBTTtLQUNQLENBQUM7QUFDSixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixpQkFBaUIsQ0FBQyxhQUEwQztJQUMxRSwrQ0FBK0M7SUFDL0MsSUFBSSxjQUFjLElBQUksYUFBYSxJQUFJLGFBQWEsQ0FBQyxZQUFZLEtBQUssU0FBUyxFQUFFLENBQUM7UUFDaEYsTUFBTSxPQUFPLEdBQUcsYUFBZ0MsQ0FBQztRQUNqRCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUMvQyxPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUM7UUFDRCxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTyxFQUFFLENBQUM7UUFDckIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDO1FBQ2pDLE9BQU8sR0FBRyxLQUFLLElBQUksTUFBTSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDckMsQ0FBQztJQUVELDZCQUE2QjtJQUM3QixNQUFNLElBQUksR0FBRyxhQUEwQixDQUFDO0lBQ3hDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMxQyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztJQUNqQyxPQUFPLEdBQUcsS0FBSyxJQUFJLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3JDLENBQUM7QUFFRCxTQUFnQixZQUFZLENBQUMsU0FBaUI7SUFDNUMsTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDbEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUN6QixJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsV0FBVyxFQUFFLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3BELE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDdEQsSUFBSSxTQUFTLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFLEdBQUcsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUM1RSxHQUFHLEVBQUUsQ0FBQztJQUNSLENBQUM7SUFDRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxTQUFnQixrQkFBa0IsQ0FBQyxTQUFpQztJQUNsRSxPQUFPLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxJQUFJLEdBQUcsQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDakUsQ0FBQztBQUVELFNBQWdCLGVBQWUsQ0FBQyxNQUFzQjtJQUNwRCxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDNUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvcm9kcmlnby9jbGF1ZGUtcHJvamVjdHMvT21uaUNhcmUvYmFja2VuZC9zcmMvbW9kZWxzL3BhdGllbnQubW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGF0aWVudCBhcyBGSElSUGF0aWVudCB9IGZyb20gJ0BtZWRwbHVtL2ZoaXJ0eXBlcyc7XG5cbmltcG9ydCB7IFxuICBGSElSUmVzb3VyY2UsIFxuICBJZGVudGlmaWVyLCBcbiAgSHVtYW5OYW1lLCBcbiAgQWRkcmVzcywgXG4gIENvbnRhY3RQb2ludCwgXG4gIFJlZmVyZW5jZSwgXG4gIENvZGVhYmxlQ29uY2VwdCxcbiAgQXR0YWNobWVudCxcbiAgVmFsaWRhdGlvblJlc3VsdFxufSBmcm9tICcuL2Jhc2UubW9kZWwnO1xuXG4vKipcbiAqIEV4dGVuZGVkIFBhdGllbnQgTW9kZWwgZm9yIE9tbmlDYXJlIEVNUlxuICogQ29tYmluZXMgRkhJUiBSNCBQYXRpZW50IHJlc291cmNlIHdpdGggT21uaUNhcmUtc3BlY2lmaWMgZXh0ZW5zaW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIE9tbmlDYXJlUGF0aWVudCBleHRlbmRzIEZISVJSZXNvdXJjZSB7XG4gIHJlc291cmNlVHlwZTogJ1BhdGllbnQnO1xuICBcbiAgLy8gQ29yZSBGSElSIFBhdGllbnQgZmllbGRzXG4gIGlkZW50aWZpZXI/OiBJZGVudGlmaWVyW107XG4gIGFjdGl2ZT86IGJvb2xlYW47XG4gIG5hbWU/OiBIdW1hbk5hbWVbXTtcbiAgdGVsZWNvbT86IENvbnRhY3RQb2ludFtdO1xuICBnZW5kZXI/OiAnbWFsZScgfCAnZmVtYWxlJyB8ICdvdGhlcicgfCAndW5rbm93bic7XG4gIGJpcnRoRGF0ZT86IHN0cmluZztcbiAgZGVjZWFzZWRCb29sZWFuPzogYm9vbGVhbjtcbiAgZGVjZWFzZWREYXRlVGltZT86IHN0cmluZztcbiAgYWRkcmVzcz86IEFkZHJlc3NbXTtcbiAgbWFyaXRhbFN0YXR1cz86IENvZGVhYmxlQ29uY2VwdDtcbiAgbXVsdGlwbGVCaXJ0aEJvb2xlYW4/OiBib29sZWFuO1xuICBtdWx0aXBsZUJpcnRoSW50ZWdlcj86IG51bWJlcjtcbiAgcGhvdG8/OiBBdHRhY2htZW50W107XG4gIGNvbnRhY3Q/OiBQYXRpZW50Q29udGFjdFtdO1xuICBjb21tdW5pY2F0aW9uPzogUGF0aWVudENvbW11bmljYXRpb25bXTtcbiAgZ2VuZXJhbFByYWN0aXRpb25lcj86IFJlZmVyZW5jZVtdO1xuICBtYW5hZ2luZ09yZ2FuaXphdGlvbj86IFJlZmVyZW5jZTtcbiAgbGluaz86IFBhdGllbnRMaW5rW107XG5cbiAgLy8gT21uaUNhcmUtc3BlY2lmaWMgZXh0ZW5zaW9uc1xuICBvbW5pY2FyZVBhdGllbnRJZD86IHN0cmluZztcbiAgcmVnaXN0cmF0aW9uRGF0ZT86IHN0cmluZztcbiAgcHJlZmVycmVkTGFuZ3VhZ2U/OiBzdHJpbmc7XG4gIGVtZXJnZW5jeUNvbnRhY3Q/OiBQYXRpZW50RW1lcmdlbmN5Q29udGFjdFtdO1xuICBpbnN1cmFuY2U/OiBJbnN1cmFuY2VJbmZvcm1hdGlvbltdO1xuICBkZW1vZ3JhcGhpY3M/OiBQYXRpZW50RGVtb2dyYXBoaWNzO1xuICBwcmVmZXJlbmNlcz86IFBhdGllbnRQcmVmZXJlbmNlcztcbiAgYWNjZXNzaWJpbGl0eU5lZWRzPzogQWNjZXNzaWJpbGl0eU5lZWRzO1xuICBzb2NpYWxIaXN0b3J5PzogU29jaWFsSGlzdG9yeTtcbiAgZmFtaWx5SGlzdG9yeT86IEZhbWlseUhpc3RvcnlSZWNvcmRbXTtcbiAgYWxlcnRzPzogUGF0aWVudEFsZXJ0W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aWVudENvbnRhY3Qge1xuICByZWxhdGlvbnNoaXA/OiBDb2RlYWJsZUNvbmNlcHRbXTtcbiAgbmFtZT86IEh1bWFuTmFtZTtcbiAgdGVsZWNvbT86IENvbnRhY3RQb2ludFtdO1xuICBhZGRyZXNzPzogQWRkcmVzcztcbiAgZ2VuZGVyPzogJ21hbGUnIHwgJ2ZlbWFsZScgfCAnb3RoZXInIHwgJ3Vua25vd24nO1xuICBvcmdhbml6YXRpb24/OiBSZWZlcmVuY2U7XG4gIHBlcmlvZD86IHtcbiAgICBzdGFydD86IHN0cmluZztcbiAgICBlbmQ/OiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aWVudENvbW11bmljYXRpb24ge1xuICBsYW5ndWFnZTogQ29kZWFibGVDb25jZXB0O1xuICBwcmVmZXJyZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhdGllbnRMaW5rIHtcbiAgb3RoZXI6IFJlZmVyZW5jZTtcbiAgdHlwZTogJ3JlcGxhY2VkLWJ5JyB8ICdyZXBsYWNlcycgfCAncmVmZXInIHwgJ3NlZWFsc28nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhdGllbnRFbWVyZ2VuY3lDb250YWN0IHtcbiAgaWQ/OiBzdHJpbmc7XG4gIHJlbGF0aW9uc2hpcDogc3RyaW5nO1xuICBuYW1lOiBIdW1hbk5hbWU7XG4gIHRlbGVjb206IENvbnRhY3RQb2ludFtdO1xuICBhZGRyZXNzPzogQWRkcmVzcztcbiAgcHJpb3JpdHk6IG51bWJlcjtcbiAgYWN0aXZlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3VyYW5jZUluZm9ybWF0aW9uIHtcbiAgaWQ/OiBzdHJpbmc7XG4gIHN1YnNjcmliZXJJZDogc3RyaW5nO1xuICBwYXlvck5hbWU6IHN0cmluZztcbiAgcGF5b3JJZD86IHN0cmluZztcbiAgcGxhbk5hbWU/OiBzdHJpbmc7XG4gIGdyb3VwTnVtYmVyPzogc3RyaW5nO1xuICBwb2xpY3lOdW1iZXI/OiBzdHJpbmc7XG4gIHJlbGF0aW9uc2hpcFRvU3Vic2NyaWJlcjogJ3NlbGYnIHwgJ3Nwb3VzZScgfCAnY2hpbGQnIHwgJ290aGVyJztcbiAgZWZmZWN0aXZlRGF0ZTogc3RyaW5nO1xuICB0ZXJtaW5hdGlvbkRhdGU/OiBzdHJpbmc7XG4gIGNvcGF5QW1vdW50PzogbnVtYmVyO1xuICBkZWR1Y3RpYmxlQW1vdW50PzogbnVtYmVyO1xuICBhY3RpdmU6IGJvb2xlYW47XG4gIHByaW9yaXR5OiBudW1iZXI7IC8vIDEgPSBwcmltYXJ5LCAyID0gc2Vjb25kYXJ5LCBldGMuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aWVudERlbW9ncmFwaGljcyB7XG4gIHJhY2U/OiBDb2RlYWJsZUNvbmNlcHRbXTtcbiAgZXRobmljaXR5PzogQ29kZWFibGVDb25jZXB0W107XG4gIHJlbGlnaW9uPzogQ29kZWFibGVDb25jZXB0O1xuICBuYXRpb25hbGl0eT86IHN0cmluZztcbiAgYmlydGhQbGFjZT86IEFkZHJlc3M7XG4gIG9jY3VwYXRpb24/OiBzdHJpbmc7XG4gIGVkdWNhdGlvbkxldmVsPzogQ29kZWFibGVDb25jZXB0O1xuICBkaXNhYmlsaXR5PzogQ29kZWFibGVDb25jZXB0W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aWVudFByZWZlcmVuY2VzIHtcbiAgY29tbXVuaWNhdGlvblByZWZlcmVuY2VzPzoge1xuICAgIHByZWZlcnJlZExhbmd1YWdlPzogc3RyaW5nO1xuICAgIGludGVycHJldGVyUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIGNvbW11bmljYXRpb25NZXRob2Q/OiAncGhvbmUnIHwgJ2VtYWlsJyB8ICdzbXMnIHwgJ3BvcnRhbCcgfCAnbWFpbCc7XG4gICAgYXBwb2ludG1lbnRSZW1pbmRlcnM/OiBib29sZWFuO1xuICAgIGxhYlJlc3VsdHNEZWxpdmVyeT86ICdwaG9uZScgfCAnZW1haWwnIHwgJ3BvcnRhbCcgfCAnbWFpbCc7XG4gIH07XG4gIHRyZWF0bWVudFByZWZlcmVuY2VzPzoge1xuICAgIGFkdmFuY2VEaXJlY3RpdmVzPzogUmVmZXJlbmNlW107XG4gICAgb3JnYW5Eb25vcj86IGJvb2xlYW47XG4gICAgcmVzdXNjaXRhdGlvblN0YXR1cz86ICdmdWxsLWNvZGUnIHwgJ2RucicgfCAnZG5hcicgfCAnY29tZm9ydC1jYXJlJztcbiAgICBlbWVyZ2VuY3lUcmVhdG1lbnRDb25zZW50PzogYm9vbGVhbjtcbiAgfTtcbiAgcHJpdmFjeVByZWZlcmVuY2VzPzoge1xuICAgIHNoYXJlV2l0aEZhbWlseT86IGJvb2xlYW47XG4gICAgc2hhcmVXaXRoRW1lcmdlbmN5Q29udGFjdD86IGJvb2xlYW47XG4gICAgbWFya2V0aW5nT3B0T3V0PzogYm9vbGVhbjtcbiAgICByZXNlYXJjaFBhcnRpY2lwYXRpb24/OiBib29sZWFuO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFjY2Vzc2liaWxpdHlOZWVkcyB7XG4gIHBoeXNpY2FsRGlzYWJpbGl0eT86IHN0cmluZ1tdO1xuICBjb2duaXRpdmVOZWVkcz86IHN0cmluZ1tdO1xuICBzZW5zb3J5SW1wYWlybWVudHM/OiBzdHJpbmdbXTtcbiAgYXNzaXN0aXZlRGV2aWNlcz86IHN0cmluZ1tdO1xuICBhY2NvbW1vZGF0aW9uUmVxdWVzdHM/OiBzdHJpbmdbXTtcbiAgdHJhbnNwb3J0YXRpb25OZWVkcz86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTb2NpYWxIaXN0b3J5IHtcbiAgc21va2luZ1N0YXR1cz86IENvZGVhYmxlQ29uY2VwdDtcbiAgYWxjb2hvbFVzZT86IHtcbiAgICBzdGF0dXM6IENvZGVhYmxlQ29uY2VwdDtcbiAgICBmcmVxdWVuY3k/OiBzdHJpbmc7XG4gICAgcXVhbnRpdHk/OiBzdHJpbmc7XG4gIH07XG4gIHN1YnN0YW5jZVVzZT86IHtcbiAgICBzdWJzdGFuY2U6IENvZGVhYmxlQ29uY2VwdDtcbiAgICBzdGF0dXM6IENvZGVhYmxlQ29uY2VwdDtcbiAgICBmcmVxdWVuY3k/OiBzdHJpbmc7XG4gIH1bXTtcbiAgc2V4dWFsSGlzdG9yeT86IHtcbiAgICBzZXh1YWxseUFjdGl2ZT86IGJvb2xlYW47XG4gICAgcGFydG5lcnM/OiBudW1iZXI7XG4gICAgb3JpZW50YXRpb24/OiBDb2RlYWJsZUNvbmNlcHQ7XG4gIH07XG4gIGRpZXRhcnlSZXN0cmljdGlvbnM/OiBDb2RlYWJsZUNvbmNlcHRbXTtcbiAgZXhlcmNpc2VIYWJpdHM/OiB7XG4gICAgZnJlcXVlbmN5Pzogc3RyaW5nO1xuICAgIHR5cGU/OiBzdHJpbmdbXTtcbiAgICBpbnRlbnNpdHk/OiAnbG93JyB8ICdtb2RlcmF0ZScgfCAnaGlnaCc7XG4gIH07XG4gIGxpdmluZ0FycmFuZ2VtZW50Pzoge1xuICAgIHR5cGU6IENvZGVhYmxlQ29uY2VwdDtcbiAgICBzdXBwb3J0U3lzdGVtPzogc3RyaW5nW107XG4gICAgbGl2aW5nQWxvbmU/OiBib29sZWFuO1xuICB9O1xuICBlbXBsb3ltZW50U3RhdHVzPzogQ29kZWFibGVDb25jZXB0O1xuICB2ZXRlcmFuU3RhdHVzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYW1pbHlIaXN0b3J5UmVjb3JkIHtcbiAgaWQ/OiBzdHJpbmc7XG4gIHJlbGF0aW9uc2hpcDogQ29kZWFibGVDb25jZXB0O1xuICBuYW1lPzogc3RyaW5nO1xuICBnZW5kZXI/OiAnbWFsZScgfCAnZmVtYWxlJyB8ICdvdGhlcicgfCAndW5rbm93bic7XG4gIGJvcm5EYXRlPzogc3RyaW5nO1xuICBhZ2VBdERlYXRoPzogbnVtYmVyO1xuICBjYXVzZU9mRGVhdGg/OiBDb2RlYWJsZUNvbmNlcHQ7XG4gIGNvbmRpdGlvbnM/OiBGYW1pbHlDb25kaXRpb25bXTtcbiAgZGVjZWFzZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZhbWlseUNvbmRpdGlvbiB7XG4gIGNvbmRpdGlvbjogQ29kZWFibGVDb25jZXB0O1xuICBvbnNldD86IHtcbiAgICBhZ2VBdE9uc2V0PzogbnVtYmVyO1xuICAgIG9uc2V0RGF0ZVRpbWU/OiBzdHJpbmc7XG4gIH07XG4gIG5vdGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aWVudEFsZXJ0IHtcbiAgaWQ/OiBzdHJpbmc7XG4gIHR5cGU6ICdhbGxlcmd5JyB8ICdtZWRpY2FsJyB8ICdiZWhhdmlvcmFsJyB8ICdpbmZlY3Rpb24tY29udHJvbCcgfCAnc2FmZXR5JyB8ICdvdGhlcic7XG4gIHNldmVyaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnIHwgJ2NyaXRpY2FsJztcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZWZmZWN0aXZlRGF0ZTogc3RyaW5nO1xuICBleHBpcmF0aW9uRGF0ZT86IHN0cmluZztcbiAgYWN0aXZlOiBib29sZWFuO1xuICBjcmVhdGVkQnk6IFJlZmVyZW5jZTtcbiAgbGFzdFVwZGF0ZWRCeTogUmVmZXJlbmNlO1xufVxuXG4vKipcbiAqIFBhdGllbnQgU2VhcmNoIFBhcmFtZXRlcnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXRpZW50U2VhcmNoUGFyYW1zIHtcbiAgX2lkPzogc3RyaW5nO1xuICBhY3RpdmU/OiBib29sZWFuO1xuICBhZGRyZXNzPzogc3RyaW5nO1xuICAnYWRkcmVzcy1jaXR5Jz86IHN0cmluZztcbiAgJ2FkZHJlc3MtY291bnRyeSc/OiBzdHJpbmc7XG4gICdhZGRyZXNzLXBvc3RhbGNvZGUnPzogc3RyaW5nO1xuICAnYWRkcmVzcy1zdGF0ZSc/OiBzdHJpbmc7XG4gICdhZGRyZXNzLXVzZSc/OiBzdHJpbmc7XG4gIGJpcnRoZGF0ZT86IHN0cmluZztcbiAgZGVhdGhfZGF0ZT86IHN0cmluZztcbiAgZGVjZWFzZWQ/OiBib29sZWFuO1xuICBlbWFpbD86IHN0cmluZztcbiAgZmFtaWx5Pzogc3RyaW5nO1xuICBnZW5kZXI/OiBzdHJpbmc7XG4gIGdpdmVuPzogc3RyaW5nO1xuICBpZGVudGlmaWVyPzogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgbmFtZT86IHN0cmluZztcbiAgcGhvbmU/OiBzdHJpbmc7XG4gIHBob25ldGljPzogc3RyaW5nO1xuICB0ZWxlY29tPzogc3RyaW5nO1xuICBcbiAgLy8gT21uaUNhcmUtc3BlY2lmaWMgc2VhcmNoIHBhcmFtZXRlcnNcbiAgJ29tbmljYXJlLWlkJz86IHN0cmluZztcbiAgJ3JlZ2lzdHJhdGlvbi1kYXRlJz86IHN0cmluZztcbiAgJ2luc3VyYW5jZS1pZCc/OiBzdHJpbmc7XG4gICdlbWVyZ2VuY3ktY29udGFjdCc/OiBzdHJpbmc7XG4gICdwcmltYXJ5LWNhcmUtcHJvdmlkZXInPzogc3RyaW5nO1xuICBcbiAgLy8gQ29tbW9uIHNlYXJjaCBtb2RpZmllcnNcbiAgX2NvdW50PzogbnVtYmVyO1xuICBfb2Zmc2V0PzogbnVtYmVyO1xuICBfc29ydD86IHN0cmluZztcbiAgX2luY2x1ZGU/OiBzdHJpbmdbXTtcbiAgX3JldmluY2x1ZGU/OiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiBQYXRpZW50IFN0YXRpc3RpY3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXRpZW50U3RhdGlzdGljcyB7XG4gIHRvdGFsUGF0aWVudHM6IG51bWJlcjtcbiAgYWN0aXZlUGF0aWVudHM6IG51bWJlcjtcbiAgbmV3UGF0aWVudHNUaGlzTW9udGg6IG51bWJlcjtcbiAgYXZlcmFnZUFnZTogbnVtYmVyO1xuICBnZW5kZXJEaXN0cmlidXRpb246IHtcbiAgICBtYWxlOiBudW1iZXI7XG4gICAgZmVtYWxlOiBudW1iZXI7XG4gICAgb3RoZXI6IG51bWJlcjtcbiAgICB1bmtub3duOiBudW1iZXI7XG4gIH07XG4gIHRvcEluc3VyYW5jZVByb3ZpZGVyczogQXJyYXk8e1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBjb3VudDogbnVtYmVyO1xuICB9PjtcbiAgZGVtb2dyYXBoaWNCcmVha2Rvd246IHtcbiAgICBhZ2VHcm91cHM6IEFycmF5PHtcbiAgICAgIHJhbmdlOiBzdHJpbmc7XG4gICAgICBjb3VudDogbnVtYmVyO1xuICAgIH0+O1xuICAgIGxvY2F0aW9uRGlzdHJpYnV0aW9uOiBBcnJheTx7XG4gICAgICBjaXR5OiBzdHJpbmc7XG4gICAgICBzdGF0ZTogc3RyaW5nO1xuICAgICAgY291bnQ6IG51bWJlcjtcbiAgICB9PjtcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXRpZW50IFJlZ2lzdHJhdGlvbiBSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aWVudFJlZ2lzdHJhdGlvblJlcXVlc3Qge1xuICBkZW1vZ3JhcGhpY0luZm86IHtcbiAgICBuYW1lOiBIdW1hbk5hbWVbXTtcbiAgICBnZW5kZXI/OiAnbWFsZScgfCAnZmVtYWxlJyB8ICdvdGhlcicgfCAndW5rbm93bic7XG4gICAgYmlydGhEYXRlOiBzdHJpbmc7XG4gICAgYWRkcmVzczogQWRkcmVzc1tdO1xuICAgIHRlbGVjb206IENvbnRhY3RQb2ludFtdO1xuICAgIG1hcml0YWxTdGF0dXM/OiBDb2RlYWJsZUNvbmNlcHQ7XG4gIH07XG4gIGlkZW50aWZpZXJzPzogSWRlbnRpZmllcltdO1xuICBlbWVyZ2VuY3lDb250YWN0cz86IFBhdGllbnRFbWVyZ2VuY3lDb250YWN0W107XG4gIGluc3VyYW5jZT86IEluc3VyYW5jZUluZm9ybWF0aW9uW107XG4gIHByZWZlcmVuY2VzPzogUGF0aWVudFByZWZlcmVuY2VzO1xuICBwcmltYXJ5Q2FyZVByb3ZpZGVyPzogUmVmZXJlbmNlO1xuICByZWZlcnJpbmdQcm92aWRlcj86IFJlZmVyZW5jZTtcbiAgY29uc2VudEZvcm1zPzoge1xuICAgIHRyZWF0bWVudENvbnNlbnQ6IGJvb2xlYW47XG4gICAgcHJpdmFjeU5vdGljZUFja25vd2xlZGdlZDogYm9vbGVhbjtcbiAgICBjb21tdW5pY2F0aW9uQ29uc2VudDogYm9vbGVhbjtcbiAgICByZXNlYXJjaENvbnNlbnQ/OiBib29sZWFuO1xuICB9O1xufVxuXG4vKipcbiAqIFBhdGllbnQgVXBkYXRlIFJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXRpZW50VXBkYXRlUmVxdWVzdCB7XG4gIGRlbW9ncmFwaGljSW5mbz86IFBhcnRpYWw8e1xuICAgIG5hbWU6IEh1bWFuTmFtZVtdO1xuICAgIGFkZHJlc3M6IEFkZHJlc3NbXTtcbiAgICB0ZWxlY29tOiBDb250YWN0UG9pbnRbXTtcbiAgICBtYXJpdGFsU3RhdHVzOiBDb2RlYWJsZUNvbmNlcHQ7XG4gIH0+O1xuICBlbWVyZ2VuY3lDb250YWN0cz86IFBhdGllbnRFbWVyZ2VuY3lDb250YWN0W107XG4gIGluc3VyYW5jZT86IEluc3VyYW5jZUluZm9ybWF0aW9uW107XG4gIHByZWZlcmVuY2VzPzogUGFydGlhbDxQYXRpZW50UHJlZmVyZW5jZXM+O1xuICBhY2Nlc3NpYmlsaXR5TmVlZHM/OiBQYXJ0aWFsPEFjY2Vzc2liaWxpdHlOZWVkcz47XG4gIGFsZXJ0cz86IFBhdGllbnRBbGVydFtdO1xufVxuXG4vKipcbiAqIFBhdGllbnQgU29jaWFsIEhpc3RvcnkgSW50ZXJmYWNlICBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXRpZW50U29jaWFsSGlzdG9yeSB7XG4gIHNtb2tpbmdTdGF0dXM/OiAnbmV2ZXInIHwgJ2Zvcm1lcicgfCAnY3VycmVudCcgfCAndW5rbm93bic7XG4gIGFsY29ob2xVc2U/OiAnbmV2ZXInIHwgJ2xpZ2h0JyB8ICdtb2RlcmF0ZScgfCAnaGVhdnknIHwgJ3Vua25vd24nO1xuICBzdWJzdGFuY2VVc2U/OiBzdHJpbmdbXTtcbiAgb2NjdXBhdGlvbj86IHN0cmluZztcbiAgc29jaWFsU3VwcG9ydFN5c3RlbT86IHN0cmluZztcbiAgbGl2aW5nQXJyYW5nZW1lbnQ/OiBzdHJpbmc7XG4gIGV4ZXJjaXNlSGFiaXRzPzogc3RyaW5nO1xuICBkaWV0YXJ5SGFiaXRzPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFZhbGlkYXRpb24gRnVuY3Rpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU9tbmlDYXJlUGF0aWVudChwYXRpZW50OiBQYXJ0aWFsPE9tbmlDYXJlUGF0aWVudD4pOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKCFwYXRpZW50LnJlc291cmNlVHlwZSB8fCBwYXRpZW50LnJlc291cmNlVHlwZSAhPT0gJ1BhdGllbnQnKSB7XG4gICAgZXJyb3JzLnB1c2goJ3Jlc291cmNlVHlwZSBtdXN0IGJlIFwiUGF0aWVudFwiJyk7XG4gIH1cbiAgXG4gIGlmICghcGF0aWVudC5uYW1lIHx8IHBhdGllbnQubmFtZS5sZW5ndGggPT09IDApIHtcbiAgICBlcnJvcnMucHVzaCgnUGF0aWVudCBuYW1lIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmICghKHBhdGllbnQgYXMgYW55KS5vbW5pY2FyZVBhdGllbnRJZCkge1xuICAgIGVycm9ycy5wdXNoKCdvbW5pY2FyZVBhdGllbnRJZCBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAocGF0aWVudC5iaXJ0aERhdGUpIHtcbiAgICBjb25zdCBiaXJ0aERhdGUgPSBuZXcgRGF0ZShwYXRpZW50LmJpcnRoRGF0ZSk7XG4gICAgaWYgKGJpcnRoRGF0ZSA+IG5ldyBEYXRlKCkpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdCaXJ0aCBkYXRlIGNhbm5vdCBiZSBpbiB0aGUgZnV0dXJlJyk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9yc1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFbWVyZ2VuY3lDb250YWN0KGNvbnRhY3Q6IFBhcnRpYWw8UGF0aWVudEVtZXJnZW5jeUNvbnRhY3Q+KTogVmFsaWRhdGlvblJlc3VsdCB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgXG4gIGlmICghY29udGFjdC5uYW1lKSB7XG4gICAgZXJyb3JzLnB1c2goJ0VtZXJnZW5jeSBjb250YWN0IG5hbWUgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgaWYgKCFjb250YWN0LnJlbGF0aW9uc2hpcCkge1xuICAgIGVycm9ycy5wdXNoKCdFbWVyZ2VuY3kgY29udGFjdCByZWxhdGlvbnNoaXAgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnNcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5zdXJhbmNlKGluc3VyYW5jZTogUGFydGlhbDxJbnN1cmFuY2VJbmZvcm1hdGlvbj4pOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKCFpbnN1cmFuY2UucGF5b3JOYW1lKSB7XG4gICAgZXJyb3JzLnB1c2goJ0luc3VyYW5jZSBwYXlvciBuYW1lIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmICghaW5zdXJhbmNlLnBsYW5OYW1lKSB7XG4gICAgZXJyb3JzLnB1c2goJ0luc3VyYW5jZSBwbGFuIG5hbWUgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnNcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGF0aWVudEFsZXJ0KGFsZXJ0OiBQYXJ0aWFsPFBhdGllbnRBbGVydD4pOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKCFhbGVydC50eXBlKSB7XG4gICAgZXJyb3JzLnB1c2goJ0FsZXJ0IHR5cGUgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgaWYgKCFhbGVydC5zZXZlcml0eSkge1xuICAgIGVycm9ycy5wdXNoKCdBbGVydCBzZXZlcml0eSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAoIWFsZXJ0LnRpdGxlKSB7XG4gICAgZXJyb3JzLnB1c2goJ0FsZXJ0IHRpdGxlIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgdmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzXG4gIH07XG59XG5cbi8qKlxuICogVXRpbGl0eSBGdW5jdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFBhdGllbnROYW1lKG5hbWVPclBhdGllbnQ6IEh1bWFuTmFtZSB8IE9tbmlDYXJlUGF0aWVudCk6IHN0cmluZyB7XG4gIC8vIElmIGl0J3MgYSBwYXRpZW50IG9iamVjdCwgZ2V0IHRoZSBmaXJzdCBuYW1lXG4gIGlmICgncmVzb3VyY2VUeXBlJyBpbiBuYW1lT3JQYXRpZW50ICYmIG5hbWVPclBhdGllbnQucmVzb3VyY2VUeXBlID09PSAnUGF0aWVudCcpIHtcbiAgICBjb25zdCBwYXRpZW50ID0gbmFtZU9yUGF0aWVudCBhcyBPbW5pQ2FyZVBhdGllbnQ7XG4gICAgaWYgKCFwYXRpZW50Lm5hbWUgfHwgcGF0aWVudC5uYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBjb25zdCBuYW1lID0gcGF0aWVudC5uYW1lWzBdO1xuICAgIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICAgIGNvbnN0IGdpdmVuID0gbmFtZS5naXZlbj8uam9pbignICcpIHx8ICcnO1xuICAgIGNvbnN0IGZhbWlseSA9IG5hbWUuZmFtaWx5IHx8ICcnO1xuICAgIHJldHVybiBgJHtnaXZlbn0gJHtmYW1pbHl9YC50cmltKCk7XG4gIH1cbiAgXG4gIC8vIElmIGl0J3MgYSBIdW1hbk5hbWUgb2JqZWN0XG4gIGNvbnN0IG5hbWUgPSBuYW1lT3JQYXRpZW50IGFzIEh1bWFuTmFtZTtcbiAgY29uc3QgZ2l2ZW4gPSBuYW1lLmdpdmVuPy5qb2luKCcgJykgfHwgJyc7XG4gIGNvbnN0IGZhbWlseSA9IG5hbWUuZmFtaWx5IHx8ICcnO1xuICByZXR1cm4gYCR7Z2l2ZW59ICR7ZmFtaWx5fWAudHJpbSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlQWdlKGJpcnRoRGF0ZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3QgYmlydGggPSBuZXcgRGF0ZShiaXJ0aERhdGUpO1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gIGxldCBhZ2UgPSB0b2RheS5nZXRGdWxsWWVhcigpIC0gYmlydGguZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgbW9udGhEaWZmID0gdG9kYXkuZ2V0TW9udGgoKSAtIGJpcnRoLmdldE1vbnRoKCk7XG4gIGlmIChtb250aERpZmYgPCAwIHx8IChtb250aERpZmYgPT09IDAgJiYgdG9kYXkuZ2V0RGF0ZSgpIDwgYmlydGguZ2V0RGF0ZSgpKSkge1xuICAgIGFnZS0tO1xuICB9XG4gIHJldHVybiBhZ2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY3RpdmVJbnN1cmFuY2UoaW5zdXJhbmNlOiBJbnN1cmFuY2VJbmZvcm1hdGlvbltdKTogSW5zdXJhbmNlSW5mb3JtYXRpb24gfCB1bmRlZmluZWQge1xuICByZXR1cm4gaW5zdXJhbmNlLmZpbmQoaW5zID0+IGlucy5hY3RpdmUgJiYgaW5zLnByaW9yaXR5ID09PSAxKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FjdGl2ZUFsZXJ0cyhhbGVydHM6IFBhdGllbnRBbGVydFtdKTogYm9vbGVhbiB7XG4gIHJldHVybiBhbGVydHMuc29tZShhbGVydCA9PiBhbGVydC5hY3RpdmUpO1xufSJdLCJ2ZXJzaW9uIjozfQ==