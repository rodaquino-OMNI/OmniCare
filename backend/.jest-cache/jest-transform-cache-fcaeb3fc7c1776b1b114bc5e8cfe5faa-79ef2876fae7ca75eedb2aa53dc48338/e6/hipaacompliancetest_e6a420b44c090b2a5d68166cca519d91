f5a0ef57f2777dd60824b125264b8eda
"use strict";
/**
 * HIPAA Compliance Test Suite
 * Tests for Health Insurance Portability and Accountability Act compliance
 * Includes PHI protection, audit logging, access controls, and data encryption
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock dependencies
jest.mock('../../src/utils/logger', () => ({
    info: jest.fn(),
    error: jest.fn(),
    debug: jest.fn(),
    warn: jest.fn()
}));
const audit_service_1 = require("../../src/services/audit.service");
const compliance_service_1 = require("../../src/services/compliance.service");
const validation_service_1 = require("../../src/services/validation.service");
const auth_types_1 = require("../../src/types/auth.types");
describe('HIPAA Compliance Test Suite', () => {
    let auditService;
    let complianceService;
    let validationService;
    beforeEach(() => {
        auditService = new audit_service_1.AuditService();
        complianceService = new compliance_service_1.ComplianceService(auditService);
        validationService = new validation_service_1.ValidationService();
        jest.clearAllMocks();
    });
    afterEach(() => {
        auditService.shutdown();
    });
    describe('PHI (Protected Health Information) Protection', () => {
        it('should encrypt sensitive data in audit logs', async () => {
            const sensitiveData = {
                ssn: '123-45-6789',
                dob: '1980-01-01',
                phone: '555-123-4567',
                email: 'patient@example.com',
                medicalRecord: 'Diabetes diagnosis',
                notes: 'Confidential medical notes'
            };
            await auditService.logUserAction('user123', 'view_patient_record', 'Patient', 'pat456', '192.168.1.1', 'Mozilla/5.0', true, undefined, sensitiveData);
            const auditLogs = await auditService.searchAuditLogs('');
            const logEntry = auditLogs[0];
            // Verify sensitive data is encrypted
            expect(logEntry.additionalData?.ssn).toMatch(/^encrypted:/);
            expect(logEntry.additionalData?.medicalRecord).toMatch(/^encrypted:/);
            expect(logEntry.additionalData?.notes).toMatch(/^encrypted:/);
            // Verify original data is not present
            expect(JSON.stringify(logEntry)).not.toContain('123-45-6789');
            expect(JSON.stringify(logEntry)).not.toContain('Diabetes diagnosis');
        });
        it('should validate email addresses in patient records', () => {
            expect(validationService.validateEmail('valid@example.com')).toBe(true);
            expect(validationService.validateEmail('invalid-email')).toBe(false);
            expect(validationService.validateEmail('test@')).toBe(false);
            expect(validationService.validateEmail('@domain.com')).toBe(false);
        });
        it('should validate phone numbers in patient records', () => {
            expect(validationService.validatePhoneNumber('+1-555-123-4567')).toBe(true);
            expect(validationService.validatePhoneNumber('555.123.4567')).toBe(true);
            expect(validationService.validatePhoneNumber('(555) 123-4567')).toBe(true);
            expect(validationService.validatePhoneNumber('123')).toBe(false);
            expect(validationService.validatePhoneNumber('abcd')).toBe(false);
        });
        it('should sanitize user input to prevent data injection', () => {
            const maliciousInput = '<script>alert("xss")</script>Test Input';
            const sanitized = validationService.sanitizeInput(maliciousInput);
            expect(sanitized).not.toContain('<script>');
            expect(sanitized).not.toContain('</script>');
            expect(sanitized).toContain('Test Input');
        });
        it('should enforce data access permissions by role', async () => {
            const testCases = [
                {
                    role: auth_types_1.UserRole.PATIENT,
                    permission: auth_types_1.Permission.VIEW_OWN_RECORDS,
                    shouldHave: true
                },
                {
                    role: auth_types_1.UserRole.PATIENT,
                    permission: auth_types_1.Permission.VIEW_PATIENT_RECORDS,
                    shouldHave: false
                },
                {
                    role: auth_types_1.UserRole.PHYSICIAN,
                    permission: auth_types_1.Permission.VIEW_PATIENT_RECORDS,
                    shouldHave: true
                },
                {
                    role: auth_types_1.UserRole.NURSE,
                    permission: auth_types_1.Permission.DOCUMENT_VITAL_SIGNS,
                    shouldHave: true
                },
                {
                    role: auth_types_1.UserRole.PHARMACIST,
                    permission: auth_types_1.Permission.DISPENSE_MEDICATIONS,
                    shouldHave: true
                }
            ];
            // This test would normally check against a role-permission service
            testCases.forEach(({ role, permission, shouldHave }) => {
                // Mock permission check would be implemented here
                expect(typeof role).toBe('string');
                expect(typeof permission).toBe('string');
                expect(typeof shouldHave).toBe('boolean');
            });
        });
    });
    describe('Audit Logging Requirements', () => {
        it('should log all PHI access attempts', async () => {
            const testAccess = {
                userId: 'physician123',
                action: 'view_patient_record',
                resource: 'Patient',
                resourceId: 'pat456',
                ipAddress: '192.168.1.100',
                userAgent: 'Mozilla/5.0 (Healthcare App)',
                success: true
            };
            await auditService.logUserAction(testAccess.userId, testAccess.action, testAccess.resource, testAccess.resourceId, testAccess.ipAddress, testAccess.userAgent, testAccess.success);
            const auditLogs = await auditService.searchAuditLogs('');
            expect(auditLogs).toHaveLength(1);
            const logEntry = auditLogs[0];
            expect(logEntry.userId).toBe(testAccess.userId);
            expect(logEntry.action).toBe(testAccess.action);
            expect(logEntry.resource).toBe(testAccess.resource);
            expect(logEntry.resourceId).toBe(testAccess.resourceId);
            expect(logEntry.ipAddress).toBe(testAccess.ipAddress);
            expect(logEntry.success).toBe(testAccess.success);
            expect(logEntry.timestamp).toBeInstanceOf(Date);
        });
        it('should log failed access attempts with error details', async () => {
            await auditService.logUserAction('user123', 'unauthorized_access', 'Patient', 'pat456', '192.168.1.50', 'Mozilla/5.0', false, 'Insufficient permissions for accessing patient record');
            const auditLogs = await auditService.searchAuditLogs('');
            const logEntry = auditLogs[0];
            expect(logEntry.success).toBe(false);
            expect(logEntry.errorMessage).toBe('Insufficient permissions for accessing patient record');
            expect(logEntry.action).toBe('unauthorized_access');
        });
        it('should generate cryptographically secure audit IDs', async () => {
            const auditIds = new Set();
            // Generate multiple audit entries
            for (let i = 0; i < 100; i++) {
                await auditService.logUserAction(`user${i}`, 'test_action', 'TestResource', `res${i}`, '192.168.1.1', 'Test Agent', true);
            }
            const auditLogs = await auditService.searchAuditLogs('');
            // Verify all IDs are unique
            auditLogs.forEach(log => {
                expect(auditIds.has(log.id)).toBe(false);
                auditIds.add(log.id);
                // Verify ID format (audit_timestamp_randomhex)
                expect(log.id).toMatch(/^audit_[a-z0-9]+_[a-f0-9]{16}$/);
            });
        });
        it('should maintain audit log integrity and immutability', async () => {
            await auditService.logUserAction('user123', 'view_record', 'Patient', 'pat456', '192.168.1.1', 'Browser', true);
            const originalLogs = await auditService.searchAuditLogs('');
            const originalLog = { ...originalLogs[0] };
            // Attempt to modify the log (this should not affect the stored version)
            originalLogs[0].action = 'modified_action';
            originalLogs[0].success = false;
            // Retrieve logs again to verify integrity
            const retrievedLogs = await auditService.searchAuditLogs('');
            const retrievedLog = retrievedLogs[0];
            expect(retrievedLog.action).toBe(originalLog.action);
            expect(retrievedLog.success).toBe(originalLog.success);
            expect(retrievedLog.id).toBe(originalLog.id);
        });
    });
    describe('Access Control and Authentication', () => {
        it('should track login attempts and detect suspicious activity', async () => {
            const suspiciousUserId = 'suspicious_user';
            const ipAddress = '192.168.1.200';
            // Simulate multiple failed login attempts
            for (let i = 0; i < 6; i++) {
                await auditService.logUserAction(suspiciousUserId, 'login_attempt', 'Authentication', undefined, ipAddress, 'Browser', false, 'Invalid credentials');
            }
            const failedLogins = await auditService.searchAuditLogs('', {
                userId: suspiciousUserId,
                success: false,
                action: 'login_attempt'
            });
            expect(failedLogins).toHaveLength(6);
            // Verify all failed attempts are logged with correct details
            failedLogins.forEach(log => {
                expect(log.userId).toBe(suspiciousUserId);
                expect(log.success).toBe(false);
                expect(log.ipAddress).toBe(ipAddress);
                expect(log.errorMessage).toBe('Invalid credentials');
            });
        });
        it('should log session management events', async () => {
            const userId = 'user123';
            const sessionId = 'session_456';
            const ipAddress = '192.168.1.10';
            // Log session start
            await auditService.logUserAction(userId, 'session_start', 'Session', sessionId, ipAddress, 'Browser', true, undefined, { sessionId, loginTime: new Date() });
            // Log session activity
            await auditService.logUserAction(userId, 'session_activity', 'Session', sessionId, ipAddress, 'Browser', true, undefined, { sessionId, lastActivity: new Date() });
            // Log session end
            await auditService.logUserAction(userId, 'session_end', 'Session', sessionId, ipAddress, 'Browser', true, undefined, { sessionId, logoutTime: new Date() });
            const sessionLogs = await auditService.searchAuditLogs('', {
                userId,
                resource: 'Session'
            });
            expect(sessionLogs).toHaveLength(3);
            expect(sessionLogs.map(log => log.action)).toEqual([
                'session_start',
                'session_activity',
                'session_end'
            ]);
        });
        it('should enforce minimum password complexity requirements', async () => {
            const passwordTests = [
                { password: 'weak', valid: false, reason: 'too short' },
                { password: 'password123', valid: false, reason: 'no special chars or uppercase' },
                { password: 'Password123', valid: false, reason: 'no special chars' },
                { password: 'Password123!', valid: true, reason: 'meets all requirements' },
                { password: 'Complex@Pass123', valid: true, reason: 'meets all requirements' }
            ];
            passwordTests.forEach(({ password, valid }) => {
                // Mock password validation (would be implemented in auth service)
                const hasMinLength = password.length >= 8;
                const hasUppercase = /[A-Z]/.test(password);
                const hasLowercase = /[a-z]/.test(password);
                const hasNumbers = /\d/.test(password);
                const hasSpecialChars = /[!@#$%^&*(),.?":{}|<>]/.test(password);
                const isValid = hasMinLength && hasUppercase && hasLowercase && hasNumbers && hasSpecialChars;
                expect(isValid).toBe(valid);
            });
        });
    });
    describe('Data Retention and Archival', () => {
        it('should support audit log retention policies', async () => {
            const now = new Date();
            const oldDate = new Date(now.getTime() - (366 * 24 * 60 * 60 * 1000)); // 366 days ago
            const recentDate = new Date(now.getTime() - (30 * 24 * 60 * 60 * 1000)); // 30 days ago
            // Create old and recent audit entries
            await auditService.logUserAction('user1', 'old_action', 'Resource', 'res1', '192.168.1.1', 'Browser', true);
            await auditService.logUserAction('user2', 'recent_action', 'Resource', 'res2', '192.168.1.1', 'Browser', true);
            // Test date range filtering
            const recentLogs = await auditService.searchAuditLogs('', {
                startDate: recentDate,
                endDate: now
            });
            const oldLogs = await auditService.searchAuditLogs('', {
                startDate: oldDate,
                endDate: recentDate
            });
            expect(recentLogs.length).toBeGreaterThan(0);
            expect(oldLogs.length).toEqual(0); // Should be empty since we just created the entries
        });
        it('should generate compliance reports with proper date ranges', async () => {
            const startDate = new Date('2024-01-01');
            const endDate = new Date('2024-01-31');
            const generatedBy = 'compliance_officer';
            // Create test audit data
            await auditService.logUserAction('physician1', 'view_patient_record', 'Patient', 'pat123', '192.168.1.1', 'EMR System', true);
            const report = await complianceService.generateHIPAAComplianceReport(startDate, endDate, generatedBy, false // Don't include patient data
            );
            expect(report.reportId).toMatch(/^hipaa_\d+_[a-z0-9]+$/);
            expect(report.reportType).toBe('HIPAA_ACCESS_LOG');
            expect(report.generatedBy).toBe(generatedBy);
            expect(report.dateRange.start).toEqual(startDate);
            expect(report.dateRange.end).toEqual(endDate);
            expect(report.createdAt).toBeInstanceOf(Date);
            expect(report.summary).toBeDefined();
        });
    });
    describe('HIPAA Security Rule Compliance', () => {
        it('should validate FHIR ID format for security', () => {
            const validIds = ['abc123', 'ABC-123', 'test.id.123', 'a1b2c3d4'];
            const invalidIds = ['', 'a'.repeat(65), 'id with spaces', 'id@invalid', 'id/invalid'];
            validIds.forEach(id => {
                expect(validationService.validateFHIRId(id)).toBe(true);
            });
            invalidIds.forEach(id => {
                expect(validationService.validateFHIRId(id)).toBe(false);
            });
        });
        it('should validate URI format for security', () => {
            const validUris = [
                'https://example.com',
                'http://localhost:3000',
                'fhir://server.com/Patient/123'
            ];
            const invalidUris = [
                'not-a-uri',
                'javascript:alert(1)',
                'data:text/html,<script>alert(1)</script>'
            ];
            validUris.forEach(uri => {
                expect(validationService.validateURI(uri)).toBe(true);
            });
            invalidUris.forEach(uri => {
                expect(validationService.validateURI(uri)).toBe(false);
            });
        });
        it('should track critical security events', async () => {
            const criticalEvents = [
                {
                    type: 'UNAUTHORIZED_ACCESS',
                    userId: 'user123',
                    severity: 'CRITICAL',
                    description: 'Attempted unauthorized access to patient records'
                },
                {
                    type: 'DATA_MODIFICATION',
                    userId: 'user456',
                    severity: 'HIGH',
                    description: 'Unauthorized modification of medical records'
                }
            ];
            for (const event of criticalEvents) {
                await auditService.logSecurityEvent(event);
            }
            // Verify events are tracked (this would normally be stored in a database)
            expect(criticalEvents).toHaveLength(2);
            expect(criticalEvents[0].severity).toBe('CRITICAL');
            expect(criticalEvents[1].severity).toBe('HIGH');
        });
    });
    describe('Breach Notification Requirements', () => {
        it('should detect potential data breach scenarios', async () => {
            // Simulate bulk data access that might indicate a breach
            const suspiciousUser = 'user_suspicious';
            const accessTimes = [];
            for (let i = 0; i < 50; i++) {
                await auditService.logUserAction(suspiciousUser, 'bulk_data_access', 'Patient', `pat${i}`, '192.168.1.100', 'Automated Tool', true);
                accessTimes.push(new Date());
            }
            const bulkAccess = await auditService.searchAuditLogs('', {
                userId: suspiciousUser,
                action: 'bulk_data_access'
            });
            expect(bulkAccess).toHaveLength(50);
            // Analyze for potential breach indicators
            const uniqueResources = new Set(bulkAccess.map(log => log.resourceId));
            expect(uniqueResources.size).toBe(50); // Accessed 50 different patient records
            // All accesses from same IP (potential indicator)
            const uniqueIPs = new Set(bulkAccess.map(log => log.ipAddress));
            expect(uniqueIPs.size).toBe(1);
        });
        it('should track data export activities', async () => {
            await auditService.logUserAction('admin_user', 'data_export', 'Patient', undefined, '192.168.1.5', 'Export Tool', true, undefined, {
                exportType: 'patient_records',
                recordCount: 1000,
                exportFormat: 'CSV',
                destination: 'secure_storage'
            });
            const exportLogs = await auditService.searchAuditLogs('', {
                action: 'data_export'
            });
            expect(exportLogs).toHaveLength(1);
            expect(exportLogs[0].additionalData).toBeDefined();
            expect(exportLogs[0].resource).toBe('Patient');
        });
    });
    describe('Administrative Safeguards', () => {
        it('should generate audit statistics for compliance monitoring', async () => {
            // Create diverse audit data
            const testData = [
                { userId: 'physician1', action: 'login_success', success: true },
                { userId: 'physician1', action: 'view_patient', success: true },
                { userId: 'nurse1', action: 'login_success', success: true },
                { userId: 'nurse1', action: 'document_vitals', success: true },
                { userId: 'unauthorized', action: 'login_attempt', success: false },
                { userId: 'unauthorized', action: 'login_attempt', success: false }
            ];
            for (const data of testData) {
                await auditService.logUserAction(data.userId, data.action, 'TestResource', 'test123', '192.168.1.1', 'Browser', data.success);
            }
            const stats = await auditService.getAuditStatistics('daily');
            expect(stats.totalEvents).toBe(6);
            expect(stats.successfulEvents).toBe(4);
            expect(stats.failedEvents).toBe(2);
            expect(stats.uniqueUsers).toBe(3);
            expect(stats.eventsByType).toBeDefined();
            expect(stats.eventsByUser).toBeDefined();
        });
        it('should support audit log search and filtering', async () => {
            // Create test data with different attributes
            await auditService.logUserAction('user1', 'action1', 'Resource1', 'res1', '192.168.1.1', 'Browser1', true);
            await auditService.logUserAction('user2', 'action2', 'Resource2', 'res2', '192.168.1.2', 'Browser2', false);
            // Test filtering by user
            const user1Logs = await auditService.searchAuditLogs('', { userId: 'user1' });
            expect(user1Logs).toHaveLength(1);
            expect(user1Logs[0].userId).toBe('user1');
            // Test filtering by success status
            const failedLogs = await auditService.searchAuditLogs('', { success: false });
            expect(failedLogs.length).toBeGreaterThan(0);
            expect(failedLogs.every(log => log.success === false)).toBe(true);
            // Test filtering by IP address
            const ipLogs = await auditService.searchAuditLogs('', { ipAddress: '192.168.1.1' });
            expect(ipLogs.length).toBeGreaterThan(0);
            expect(ipLogs.every(log => log.ipAddress === '192.168.1.1')).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3JvZHJpZ28vY2xhdWRlLXByb2plY3RzL09tbmlDYXJlL2JhY2tlbmQvdGVzdHMvY29tcGxpYW5jZS9oaXBhYS1jb21wbGlhbmNlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBUUgsb0JBQW9CO0FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsd0JBQXdCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN6QyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNmLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2hCLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2hCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ2hCLENBQUMsQ0FBQyxDQUFDO0FBWkosb0VBQWdFO0FBQ2hFLDhFQUEwRTtBQUMxRSw4RUFBMEU7QUFDMUUsMkRBQXNHO0FBV3RHLFFBQVEsQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLEVBQUU7SUFDM0MsSUFBSSxZQUEwQixDQUFDO0lBQy9CLElBQUksaUJBQW9DLENBQUM7SUFDekMsSUFBSSxpQkFBb0MsQ0FBQztJQUV6QyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsWUFBWSxHQUFHLElBQUksNEJBQVksRUFBRSxDQUFDO1FBQ2xDLGlCQUFpQixHQUFHLElBQUksc0NBQWlCLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDeEQsaUJBQWlCLEdBQUcsSUFBSSxzQ0FBaUIsRUFBRSxDQUFDO1FBQzVDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixZQUFZLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDMUIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO1FBQzdELEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMzRCxNQUFNLGFBQWEsR0FBRztn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LFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsT0FBTyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRWxFLCtCQUErQjtZQUMvQixNQUFNLE1BQU0sR0FBRyxNQUFNLFlBQVksQ0FBQyxlQUFlLENBQUMsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUM7WUFDcEYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxLQUFLLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvcm9kcmlnby9jbGF1ZGUtcHJvamVjdHMvT21uaUNhcmUvYmFja2VuZC90ZXN0cy9jb21wbGlhbmNlL2hpcGFhLWNvbXBsaWFuY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhJUEFBIENvbXBsaWFuY2UgVGVzdCBTdWl0ZVxuICogVGVzdHMgZm9yIEhlYWx0aCBJbnN1cmFuY2UgUG9ydGFiaWxpdHkgYW5kIEFjY291bnRhYmlsaXR5IEFjdCBjb21wbGlhbmNlXG4gKiBJbmNsdWRlcyBQSEkgcHJvdGVjdGlvbiwgYXVkaXQgbG9nZ2luZywgYWNjZXNzIGNvbnRyb2xzLCBhbmQgZGF0YSBlbmNyeXB0aW9uXG4gKi9cblxuaW1wb3J0IHsgQXVkaXRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL2F1ZGl0LnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29tcGxpYW5jZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvY29tcGxpYW5jZS5zZXJ2aWNlJztcbmltcG9ydCB7IFZhbGlkYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL3ZhbGlkYXRpb24uc2VydmljZSc7XG5pbXBvcnQgeyBVc2VyLCBQZXJtaXNzaW9uLCBVc2VyUm9sZSwgQXVkaXRMb2dFbnRyeSwgU2VjdXJpdHlFdmVudCB9IGZyb20gJy4uLy4uL3NyYy90eXBlcy9hdXRoLnR5cGVzJztcbmltcG9ydCB7IFBhdGllbnQsIE9ic2VydmF0aW9uLCBNZWRpY2F0aW9uUmVxdWVzdCB9IGZyb20gJ0BtZWRwbHVtL2ZoaXJ0eXBlcyc7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBpbmZvOiBqZXN0LmZuKCksXG4gIGVycm9yOiBqZXN0LmZuKCksXG4gIGRlYnVnOiBqZXN0LmZuKCksXG4gIHdhcm46IGplc3QuZm4oKVxufSkpO1xuXG5kZXNjcmliZSgnSElQQUEgQ29tcGxpYW5jZSBUZXN0IFN1aXRlJywgKCkgPT4ge1xuICBsZXQgYXVkaXRTZXJ2aWNlOiBBdWRpdFNlcnZpY2U7XG4gIGxldCBjb21wbGlhbmNlU2VydmljZTogQ29tcGxpYW5jZVNlcnZpY2U7XG4gIGxldCB2YWxpZGF0aW9uU2VydmljZTogVmFsaWRhdGlvblNlcnZpY2U7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYXVkaXRTZXJ2aWNlID0gbmV3IEF1ZGl0U2VydmljZSgpO1xuICAgIGNvbXBsaWFuY2VTZXJ2aWNlID0gbmV3IENvbXBsaWFuY2VTZXJ2aWNlKGF1ZGl0U2VydmljZSk7XG4gICAgdmFsaWRhdGlvblNlcnZpY2UgPSBuZXcgVmFsaWRhdGlvblNlcnZpY2UoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBhdWRpdFNlcnZpY2Uuc2h1dGRvd24oKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BISSAoUHJvdGVjdGVkIEhlYWx0aCBJbmZvcm1hdGlvbikgUHJvdGVjdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGVuY3J5cHQgc2Vuc2l0aXZlIGRhdGEgaW4gYXVkaXQgbG9ncycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlbnNpdGl2ZURhdGEgPSB7XG4gICAgICAgIHNzbjogJzEyMy00NS02Nzg5JyxcbiAgICAgICAgZG9iOiAnMTk4MC0wMS0wMScsXG4gICAgICAgIHBob25lOiAnNTU1LTEyMy00NTY3JyxcbiAgICAgICAgZW1haWw6ICdwYXRpZW50QGV4YW1wbGUuY29tJyxcbiAgICAgICAgbWVkaWNhbFJlY29yZDogJ0RpYWJldGVzIGRpYWdub3NpcycsXG4gICAgICAgIG5vdGVzOiAnQ29uZmlkZW50aWFsIG1lZGljYWwgbm90ZXMnXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nVXNlckFjdGlvbihcbiAgICAgICAgJ3VzZXIxMjMnLFxuICAgICAgICAndmlld19wYXRpZW50X3JlY29yZCcsXG4gICAgICAgICdQYXRpZW50JyxcbiAgICAgICAgJ3BhdDQ1NicsXG4gICAgICAgICcxOTIuMTY4LjEuMScsXG4gICAgICAgICdNb3ppbGxhLzUuMCcsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgc2Vuc2l0aXZlRGF0YVxuICAgICAgKTtcblxuICAgICAgY29uc3QgYXVkaXRMb2dzID0gYXdhaXQgYXVkaXRTZXJ2aWNlLnNlYXJjaEF1ZGl0TG9ncygnJyk7XG4gICAgICBjb25zdCBsb2dFbnRyeSA9IGF1ZGl0TG9nc1swXTtcblxuICAgICAgLy8gVmVyaWZ5IHNlbnNpdGl2ZSBkYXRhIGlzIGVuY3J5cHRlZFxuICAgICAgZXhwZWN0KGxvZ0VudHJ5LmFkZGl0aW9uYWxEYXRhPy5zc24pLnRvTWF0Y2goL15lbmNyeXB0ZWQ6Lyk7XG4gICAgICBleHBlY3QobG9nRW50cnkuYWRkaXRpb25hbERhdGE/Lm1lZGljYWxSZWNvcmQpLnRvTWF0Y2goL15lbmNyeXB0ZWQ6Lyk7XG4gICAgICBleHBlY3QobG9nRW50cnkuYWRkaXRpb25hbERhdGE/Lm5vdGVzKS50b01hdGNoKC9eZW5jcnlwdGVkOi8pO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgb3JpZ2luYWwgZGF0YSBpcyBub3QgcHJlc2VudFxuICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KGxvZ0VudHJ5KSkubm90LnRvQ29udGFpbignMTIzLTQ1LTY3ODknKTtcbiAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShsb2dFbnRyeSkpLm5vdC50b0NvbnRhaW4oJ0RpYWJldGVzIGRpYWdub3NpcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBlbWFpbCBhZGRyZXNzZXMgaW4gcGF0aWVudCByZWNvcmRzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlRW1haWwoJ3ZhbGlkQGV4YW1wbGUuY29tJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVFbWFpbCgnaW52YWxpZC1lbWFpbCcpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZUVtYWlsKCd0ZXN0QCcpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZUVtYWlsKCdAZG9tYWluLmNvbScpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcGhvbmUgbnVtYmVycyBpbiBwYXRpZW50IHJlY29yZHMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVQaG9uZU51bWJlcignKzEtNTU1LTEyMy00NTY3JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVQaG9uZU51bWJlcignNTU1LjEyMy40NTY3JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVQaG9uZU51bWJlcignKDU1NSkgMTIzLTQ1NjcnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZVBob25lTnVtYmVyKCcxMjMnKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVQaG9uZU51bWJlcignYWJjZCcpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdXNlciBpbnB1dCB0byBwcmV2ZW50IGRhdGEgaW5qZWN0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsaWNpb3VzSW5wdXQgPSAnPHNjcmlwdD5hbGVydChcInhzc1wiKTwvc2NyaXB0PlRlc3QgSW5wdXQnO1xuICAgICAgY29uc3Qgc2FuaXRpemVkID0gdmFsaWRhdGlvblNlcnZpY2Uuc2FuaXRpemVJbnB1dChtYWxpY2lvdXNJbnB1dCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzYW5pdGl6ZWQpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XG4gICAgICBleHBlY3Qoc2FuaXRpemVkKS5ub3QudG9Db250YWluKCc8L3NjcmlwdD4nKTtcbiAgICAgIGV4cGVjdChzYW5pdGl6ZWQpLnRvQ29udGFpbignVGVzdCBJbnB1dCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBlbmZvcmNlIGRhdGEgYWNjZXNzIHBlcm1pc3Npb25zIGJ5IHJvbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBVc2VyUm9sZS5QQVRJRU5ULFxuICAgICAgICAgIHBlcm1pc3Npb246IFBlcm1pc3Npb24uVklFV19PV05fUkVDT1JEUyxcbiAgICAgICAgICBzaG91bGRIYXZlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBVc2VyUm9sZS5QQVRJRU5ULFxuICAgICAgICAgIHBlcm1pc3Npb246IFBlcm1pc3Npb24uVklFV19QQVRJRU5UX1JFQ09SRFMsXG4gICAgICAgICAgc2hvdWxkSGF2ZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFVzZXJSb2xlLlBIWVNJQ0lBTixcbiAgICAgICAgICBwZXJtaXNzaW9uOiBQZXJtaXNzaW9uLlZJRVdfUEFUSUVOVF9SRUNPUkRTLFxuICAgICAgICAgIHNob3VsZEhhdmU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFVzZXJSb2xlLk5VUlNFLFxuICAgICAgICAgIHBlcm1pc3Npb246IFBlcm1pc3Npb24uRE9DVU1FTlRfVklUQUxfU0lHTlMsXG4gICAgICAgICAgc2hvdWxkSGF2ZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogVXNlclJvbGUuUEhBUk1BQ0lTVCxcbiAgICAgICAgICBwZXJtaXNzaW9uOiBQZXJtaXNzaW9uLkRJU1BFTlNFX01FRElDQVRJT05TLFxuICAgICAgICAgIHNob3VsZEhhdmU6IHRydWVcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgLy8gVGhpcyB0ZXN0IHdvdWxkIG5vcm1hbGx5IGNoZWNrIGFnYWluc3QgYSByb2xlLXBlcm1pc3Npb24gc2VydmljZVxuICAgICAgdGVzdENhc2VzLmZvckVhY2goKHsgcm9sZSwgcGVybWlzc2lvbiwgc2hvdWxkSGF2ZSB9KSA9PiB7XG4gICAgICAgIC8vIE1vY2sgcGVybWlzc2lvbiBjaGVjayB3b3VsZCBiZSBpbXBsZW1lbnRlZCBoZXJlXG4gICAgICAgIGV4cGVjdCh0eXBlb2Ygcm9sZSkudG9CZSgnc3RyaW5nJyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcGVybWlzc2lvbikudG9CZSgnc3RyaW5nJyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2Ygc2hvdWxkSGF2ZSkudG9CZSgnYm9vbGVhbicpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBdWRpdCBMb2dnaW5nIFJlcXVpcmVtZW50cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGxvZyBhbGwgUEhJIGFjY2VzcyBhdHRlbXB0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RBY2Nlc3MgPSB7XG4gICAgICAgIHVzZXJJZDogJ3BoeXNpY2lhbjEyMycsXG4gICAgICAgIGFjdGlvbjogJ3ZpZXdfcGF0aWVudF9yZWNvcmQnLFxuICAgICAgICByZXNvdXJjZTogJ1BhdGllbnQnLFxuICAgICAgICByZXNvdXJjZUlkOiAncGF0NDU2JyxcbiAgICAgICAgaXBBZGRyZXNzOiAnMTkyLjE2OC4xLjEwMCcsXG4gICAgICAgIHVzZXJBZ2VudDogJ01vemlsbGEvNS4wIChIZWFsdGhjYXJlIEFwcCknLFxuICAgICAgICBzdWNjZXNzOiB0cnVlXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nVXNlckFjdGlvbihcbiAgICAgICAgdGVzdEFjY2Vzcy51c2VySWQsXG4gICAgICAgIHRlc3RBY2Nlc3MuYWN0aW9uLFxuICAgICAgICB0ZXN0QWNjZXNzLnJlc291cmNlLFxuICAgICAgICB0ZXN0QWNjZXNzLnJlc291cmNlSWQsXG4gICAgICAgIHRlc3RBY2Nlc3MuaXBBZGRyZXNzLFxuICAgICAgICB0ZXN0QWNjZXNzLnVzZXJBZ2VudCxcbiAgICAgICAgdGVzdEFjY2Vzcy5zdWNjZXNzXG4gICAgICApO1xuXG4gICAgICBjb25zdCBhdWRpdExvZ3MgPSBhd2FpdCBhdWRpdFNlcnZpY2Uuc2VhcmNoQXVkaXRMb2dzKCcnKTtcbiAgICAgIGV4cGVjdChhdWRpdExvZ3MpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9nRW50cnkgPSBhdWRpdExvZ3NbMF07XG4gICAgICBleHBlY3QobG9nRW50cnkudXNlcklkKS50b0JlKHRlc3RBY2Nlc3MudXNlcklkKTtcbiAgICAgIGV4cGVjdChsb2dFbnRyeS5hY3Rpb24pLnRvQmUodGVzdEFjY2Vzcy5hY3Rpb24pO1xuICAgICAgZXhwZWN0KGxvZ0VudHJ5LnJlc291cmNlKS50b0JlKHRlc3RBY2Nlc3MucmVzb3VyY2UpO1xuICAgICAgZXhwZWN0KGxvZ0VudHJ5LnJlc291cmNlSWQpLnRvQmUodGVzdEFjY2Vzcy5yZXNvdXJjZUlkKTtcbiAgICAgIGV4cGVjdChsb2dFbnRyeS5pcEFkZHJlc3MpLnRvQmUodGVzdEFjY2Vzcy5pcEFkZHJlc3MpO1xuICAgICAgZXhwZWN0KGxvZ0VudHJ5LnN1Y2Nlc3MpLnRvQmUodGVzdEFjY2Vzcy5zdWNjZXNzKTtcbiAgICAgIGV4cGVjdChsb2dFbnRyeS50aW1lc3RhbXApLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgZmFpbGVkIGFjY2VzcyBhdHRlbXB0cyB3aXRoIGVycm9yIGRldGFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nVXNlckFjdGlvbihcbiAgICAgICAgJ3VzZXIxMjMnLFxuICAgICAgICAndW5hdXRob3JpemVkX2FjY2VzcycsXG4gICAgICAgICdQYXRpZW50JyxcbiAgICAgICAgJ3BhdDQ1NicsXG4gICAgICAgICcxOTIuMTY4LjEuNTAnLFxuICAgICAgICAnTW96aWxsYS81LjAnLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucyBmb3IgYWNjZXNzaW5nIHBhdGllbnQgcmVjb3JkJ1xuICAgICAgKTtcblxuICAgICAgY29uc3QgYXVkaXRMb2dzID0gYXdhaXQgYXVkaXRTZXJ2aWNlLnNlYXJjaEF1ZGl0TG9ncygnJyk7XG4gICAgICBjb25zdCBsb2dFbnRyeSA9IGF1ZGl0TG9nc1swXTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGxvZ0VudHJ5LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGxvZ0VudHJ5LmVycm9yTWVzc2FnZSkudG9CZSgnSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIGZvciBhY2Nlc3NpbmcgcGF0aWVudCByZWNvcmQnKTtcbiAgICAgIGV4cGVjdChsb2dFbnRyeS5hY3Rpb24pLnRvQmUoJ3VuYXV0aG9yaXplZF9hY2Nlc3MnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY3J5cHRvZ3JhcGhpY2FsbHkgc2VjdXJlIGF1ZGl0IElEcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGF1ZGl0SWRzID0gbmV3IFNldCgpO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBtdWx0aXBsZSBhdWRpdCBlbnRyaWVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dVc2VyQWN0aW9uKFxuICAgICAgICAgIGB1c2VyJHtpfWAsXG4gICAgICAgICAgJ3Rlc3RfYWN0aW9uJyxcbiAgICAgICAgICAnVGVzdFJlc291cmNlJyxcbiAgICAgICAgICBgcmVzJHtpfWAsXG4gICAgICAgICAgJzE5Mi4xNjguMS4xJyxcbiAgICAgICAgICAnVGVzdCBBZ2VudCcsXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhdWRpdExvZ3MgPSBhd2FpdCBhdWRpdFNlcnZpY2Uuc2VhcmNoQXVkaXRMb2dzKCcnKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGFsbCBJRHMgYXJlIHVuaXF1ZVxuICAgICAgYXVkaXRMb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgICAgZXhwZWN0KGF1ZGl0SWRzLmhhcyhsb2cuaWQpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgYXVkaXRJZHMuYWRkKGxvZy5pZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBWZXJpZnkgSUQgZm9ybWF0IChhdWRpdF90aW1lc3RhbXBfcmFuZG9taGV4KVxuICAgICAgICBleHBlY3QobG9nLmlkKS50b01hdGNoKC9eYXVkaXRfW2EtejAtOV0rX1thLWYwLTldezE2fSQvKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBhdWRpdCBsb2cgaW50ZWdyaXR5IGFuZCBpbW11dGFiaWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nVXNlckFjdGlvbihcbiAgICAgICAgJ3VzZXIxMjMnLFxuICAgICAgICAndmlld19yZWNvcmQnLFxuICAgICAgICAnUGF0aWVudCcsXG4gICAgICAgICdwYXQ0NTYnLFxuICAgICAgICAnMTkyLjE2OC4xLjEnLFxuICAgICAgICAnQnJvd3NlcicsXG4gICAgICAgIHRydWVcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG9yaWdpbmFsTG9ncyA9IGF3YWl0IGF1ZGl0U2VydmljZS5zZWFyY2hBdWRpdExvZ3MoJycpO1xuICAgICAgY29uc3Qgb3JpZ2luYWxMb2cgPSB7IC4uLm9yaWdpbmFsTG9nc1swXSB9O1xuXG4gICAgICAvLyBBdHRlbXB0IHRvIG1vZGlmeSB0aGUgbG9nICh0aGlzIHNob3VsZCBub3QgYWZmZWN0IHRoZSBzdG9yZWQgdmVyc2lvbilcbiAgICAgIG9yaWdpbmFsTG9nc1swXS5hY3Rpb24gPSAnbW9kaWZpZWRfYWN0aW9uJztcbiAgICAgIG9yaWdpbmFsTG9nc1swXS5zdWNjZXNzID0gZmFsc2U7XG5cbiAgICAgIC8vIFJldHJpZXZlIGxvZ3MgYWdhaW4gdG8gdmVyaWZ5IGludGVncml0eVxuICAgICAgY29uc3QgcmV0cmlldmVkTG9ncyA9IGF3YWl0IGF1ZGl0U2VydmljZS5zZWFyY2hBdWRpdExvZ3MoJycpO1xuICAgICAgY29uc3QgcmV0cmlldmVkTG9nID0gcmV0cmlldmVkTG9nc1swXTtcblxuICAgICAgZXhwZWN0KHJldHJpZXZlZExvZy5hY3Rpb24pLnRvQmUob3JpZ2luYWxMb2cuYWN0aW9uKTtcbiAgICAgIGV4cGVjdChyZXRyaWV2ZWRMb2cuc3VjY2VzcykudG9CZShvcmlnaW5hbExvZy5zdWNjZXNzKTtcbiAgICAgIGV4cGVjdChyZXRyaWV2ZWRMb2cuaWQpLnRvQmUob3JpZ2luYWxMb2cuaWQpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWNjZXNzIENvbnRyb2wgYW5kIEF1dGhlbnRpY2F0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdHJhY2sgbG9naW4gYXR0ZW1wdHMgYW5kIGRldGVjdCBzdXNwaWNpb3VzIGFjdGl2aXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3VzcGljaW91c1VzZXJJZCA9ICdzdXNwaWNpb3VzX3VzZXInO1xuICAgICAgY29uc3QgaXBBZGRyZXNzID0gJzE5Mi4xNjguMS4yMDAnO1xuXG4gICAgICAvLyBTaW11bGF0ZSBtdWx0aXBsZSBmYWlsZWQgbG9naW4gYXR0ZW1wdHNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dVc2VyQWN0aW9uKFxuICAgICAgICAgIHN1c3BpY2lvdXNVc2VySWQsXG4gICAgICAgICAgJ2xvZ2luX2F0dGVtcHQnLFxuICAgICAgICAgICdBdXRoZW50aWNhdGlvbicsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIGlwQWRkcmVzcyxcbiAgICAgICAgICAnQnJvd3NlcicsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgJ0ludmFsaWQgY3JlZGVudGlhbHMnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZhaWxlZExvZ2lucyA9IGF3YWl0IGF1ZGl0U2VydmljZS5zZWFyY2hBdWRpdExvZ3MoJycsIHtcbiAgICAgICAgdXNlcklkOiBzdXNwaWNpb3VzVXNlcklkLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgYWN0aW9uOiAnbG9naW5fYXR0ZW1wdCdcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoZmFpbGVkTG9naW5zKS50b0hhdmVMZW5ndGgoNik7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBhbGwgZmFpbGVkIGF0dGVtcHRzIGFyZSBsb2dnZWQgd2l0aCBjb3JyZWN0IGRldGFpbHNcbiAgICAgIGZhaWxlZExvZ2lucy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICAgIGV4cGVjdChsb2cudXNlcklkKS50b0JlKHN1c3BpY2lvdXNVc2VySWQpO1xuICAgICAgICBleHBlY3QobG9nLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QobG9nLmlwQWRkcmVzcykudG9CZShpcEFkZHJlc3MpO1xuICAgICAgICBleHBlY3QobG9nLmVycm9yTWVzc2FnZSkudG9CZSgnSW52YWxpZCBjcmVkZW50aWFscycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBzZXNzaW9uIG1hbmFnZW1lbnQgZXZlbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkID0gJ3VzZXIxMjMnO1xuICAgICAgY29uc3Qgc2Vzc2lvbklkID0gJ3Nlc3Npb25fNDU2JztcbiAgICAgIGNvbnN0IGlwQWRkcmVzcyA9ICcxOTIuMTY4LjEuMTAnO1xuXG4gICAgICAvLyBMb2cgc2Vzc2lvbiBzdGFydFxuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ1VzZXJBY3Rpb24oXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgJ3Nlc3Npb25fc3RhcnQnLFxuICAgICAgICAnU2Vzc2lvbicsXG4gICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgaXBBZGRyZXNzLFxuICAgICAgICAnQnJvd3NlcicsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgeyBzZXNzaW9uSWQsIGxvZ2luVGltZTogbmV3IERhdGUoKSB9XG4gICAgICApO1xuXG4gICAgICAvLyBMb2cgc2Vzc2lvbiBhY3Rpdml0eVxuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ1VzZXJBY3Rpb24oXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgJ3Nlc3Npb25fYWN0aXZpdHknLFxuICAgICAgICAnU2Vzc2lvbicsXG4gICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgaXBBZGRyZXNzLFxuICAgICAgICAnQnJvd3NlcicsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgeyBzZXNzaW9uSWQsIGxhc3RBY3Rpdml0eTogbmV3IERhdGUoKSB9XG4gICAgICApO1xuXG4gICAgICAvLyBMb2cgc2Vzc2lvbiBlbmRcbiAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dVc2VyQWN0aW9uKFxuICAgICAgICB1c2VySWQsXG4gICAgICAgICdzZXNzaW9uX2VuZCcsXG4gICAgICAgICdTZXNzaW9uJyxcbiAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgICdCcm93c2VyJyxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB7IHNlc3Npb25JZCwgbG9nb3V0VGltZTogbmV3IERhdGUoKSB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBzZXNzaW9uTG9ncyA9IGF3YWl0IGF1ZGl0U2VydmljZS5zZWFyY2hBdWRpdExvZ3MoJycsIHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICByZXNvdXJjZTogJ1Nlc3Npb24nXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNlc3Npb25Mb2dzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3Qoc2Vzc2lvbkxvZ3MubWFwKGxvZyA9PiBsb2cuYWN0aW9uKSkudG9FcXVhbChbXG4gICAgICAgICdzZXNzaW9uX3N0YXJ0JyxcbiAgICAgICAgJ3Nlc3Npb25fYWN0aXZpdHknLCBcbiAgICAgICAgJ3Nlc3Npb25fZW5kJ1xuICAgICAgXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVuZm9yY2UgbWluaW11bSBwYXNzd29yZCBjb21wbGV4aXR5IHJlcXVpcmVtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhc3N3b3JkVGVzdHMgPSBbXG4gICAgICAgIHsgcGFzc3dvcmQ6ICd3ZWFrJywgdmFsaWQ6IGZhbHNlLCByZWFzb246ICd0b28gc2hvcnQnIH0sXG4gICAgICAgIHsgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMycsIHZhbGlkOiBmYWxzZSwgcmVhc29uOiAnbm8gc3BlY2lhbCBjaGFycyBvciB1cHBlcmNhc2UnIH0sXG4gICAgICAgIHsgcGFzc3dvcmQ6ICdQYXNzd29yZDEyMycsIHZhbGlkOiBmYWxzZSwgcmVhc29uOiAnbm8gc3BlY2lhbCBjaGFycycgfSxcbiAgICAgICAgeyBwYXNzd29yZDogJ1Bhc3N3b3JkMTIzIScsIHZhbGlkOiB0cnVlLCByZWFzb246ICdtZWV0cyBhbGwgcmVxdWlyZW1lbnRzJyB9LFxuICAgICAgICB7IHBhc3N3b3JkOiAnQ29tcGxleEBQYXNzMTIzJywgdmFsaWQ6IHRydWUsIHJlYXNvbjogJ21lZXRzIGFsbCByZXF1aXJlbWVudHMnIH1cbiAgICAgIF07XG5cbiAgICAgIHBhc3N3b3JkVGVzdHMuZm9yRWFjaCgoeyBwYXNzd29yZCwgdmFsaWQgfSkgPT4ge1xuICAgICAgICAvLyBNb2NrIHBhc3N3b3JkIHZhbGlkYXRpb24gKHdvdWxkIGJlIGltcGxlbWVudGVkIGluIGF1dGggc2VydmljZSlcbiAgICAgICAgY29uc3QgaGFzTWluTGVuZ3RoID0gcGFzc3dvcmQubGVuZ3RoID49IDg7XG4gICAgICAgIGNvbnN0IGhhc1VwcGVyY2FzZSA9IC9bQS1aXS8udGVzdChwYXNzd29yZCk7XG4gICAgICAgIGNvbnN0IGhhc0xvd2VyY2FzZSA9IC9bYS16XS8udGVzdChwYXNzd29yZCk7XG4gICAgICAgIGNvbnN0IGhhc051bWJlcnMgPSAvXFxkLy50ZXN0KHBhc3N3b3JkKTtcbiAgICAgICAgY29uc3QgaGFzU3BlY2lhbENoYXJzID0gL1shQCMkJV4mKigpLC4/XCI6e318PD5dLy50ZXN0KHBhc3N3b3JkKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBoYXNNaW5MZW5ndGggJiYgaGFzVXBwZXJjYXNlICYmIGhhc0xvd2VyY2FzZSAmJiBoYXNOdW1iZXJzICYmIGhhc1NwZWNpYWxDaGFycztcbiAgICAgICAgZXhwZWN0KGlzVmFsaWQpLnRvQmUodmFsaWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEYXRhIFJldGVudGlvbiBhbmQgQXJjaGl2YWwnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGF1ZGl0IGxvZyByZXRlbnRpb24gcG9saWNpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3Qgb2xkRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSAoMzY2ICogMjQgKiA2MCAqIDYwICogMTAwMCkpOyAvLyAzNjYgZGF5cyBhZ29cbiAgICAgIGNvbnN0IHJlY2VudERhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gKDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkpOyAvLyAzMCBkYXlzIGFnb1xuXG4gICAgICAvLyBDcmVhdGUgb2xkIGFuZCByZWNlbnQgYXVkaXQgZW50cmllc1xuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ1VzZXJBY3Rpb24oXG4gICAgICAgICd1c2VyMScsIFxuICAgICAgICAnb2xkX2FjdGlvbicsIFxuICAgICAgICAnUmVzb3VyY2UnLCBcbiAgICAgICAgJ3JlczEnLCBcbiAgICAgICAgJzE5Mi4xNjguMS4xJywgXG4gICAgICAgICdCcm93c2VyJywgXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dVc2VyQWN0aW9uKFxuICAgICAgICAndXNlcjInLCBcbiAgICAgICAgJ3JlY2VudF9hY3Rpb24nLCBcbiAgICAgICAgJ1Jlc291cmNlJywgXG4gICAgICAgICdyZXMyJywgXG4gICAgICAgICcxOTIuMTY4LjEuMScsIFxuICAgICAgICAnQnJvd3NlcicsIFxuICAgICAgICB0cnVlXG4gICAgICApO1xuXG4gICAgICAvLyBUZXN0IGRhdGUgcmFuZ2UgZmlsdGVyaW5nXG4gICAgICBjb25zdCByZWNlbnRMb2dzID0gYXdhaXQgYXVkaXRTZXJ2aWNlLnNlYXJjaEF1ZGl0TG9ncygnJywge1xuICAgICAgICBzdGFydERhdGU6IHJlY2VudERhdGUsXG4gICAgICAgIGVuZERhdGU6IG5vd1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9sZExvZ3MgPSBhd2FpdCBhdWRpdFNlcnZpY2Uuc2VhcmNoQXVkaXRMb2dzKCcnLCB7XG4gICAgICAgIHN0YXJ0RGF0ZTogb2xkRGF0ZSxcbiAgICAgICAgZW5kRGF0ZTogcmVjZW50RGF0ZVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZWNlbnRMb2dzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KG9sZExvZ3MubGVuZ3RoKS50b0VxdWFsKDApOyAvLyBTaG91bGQgYmUgZW1wdHkgc2luY2Ugd2UganVzdCBjcmVhdGVkIHRoZSBlbnRyaWVzXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGNvbXBsaWFuY2UgcmVwb3J0cyB3aXRoIHByb3BlciBkYXRlIHJhbmdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyk7XG4gICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoJzIwMjQtMDEtMzEnKTtcbiAgICAgIGNvbnN0IGdlbmVyYXRlZEJ5ID0gJ2NvbXBsaWFuY2Vfb2ZmaWNlcic7XG5cbiAgICAgIC8vIENyZWF0ZSB0ZXN0IGF1ZGl0IGRhdGFcbiAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dVc2VyQWN0aW9uKFxuICAgICAgICAncGh5c2ljaWFuMScsXG4gICAgICAgICd2aWV3X3BhdGllbnRfcmVjb3JkJyxcbiAgICAgICAgJ1BhdGllbnQnLFxuICAgICAgICAncGF0MTIzJyxcbiAgICAgICAgJzE5Mi4xNjguMS4xJyxcbiAgICAgICAgJ0VNUiBTeXN0ZW0nLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBjb21wbGlhbmNlU2VydmljZS5nZW5lcmF0ZUhJUEFBQ29tcGxpYW5jZVJlcG9ydChcbiAgICAgICAgc3RhcnREYXRlLFxuICAgICAgICBlbmREYXRlLFxuICAgICAgICBnZW5lcmF0ZWRCeSxcbiAgICAgICAgZmFsc2UgLy8gRG9uJ3QgaW5jbHVkZSBwYXRpZW50IGRhdGFcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXBvcnQucmVwb3J0SWQpLnRvTWF0Y2goL15oaXBhYV9cXGQrX1thLXowLTldKyQvKTtcbiAgICAgIGV4cGVjdChyZXBvcnQucmVwb3J0VHlwZSkudG9CZSgnSElQQUFfQUNDRVNTX0xPRycpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5nZW5lcmF0ZWRCeSkudG9CZShnZW5lcmF0ZWRCeSk7XG4gICAgICBleHBlY3QocmVwb3J0LmRhdGVSYW5nZS5zdGFydCkudG9FcXVhbChzdGFydERhdGUpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5kYXRlUmFuZ2UuZW5kKS50b0VxdWFsKGVuZERhdGUpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5jcmVhdGVkQXQpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5zdW1tYXJ5KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSElQQUEgU2VjdXJpdHkgUnVsZSBDb21wbGlhbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgRkhJUiBJRCBmb3JtYXQgZm9yIHNlY3VyaXR5JywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRJZHMgPSBbJ2FiYzEyMycsICdBQkMtMTIzJywgJ3Rlc3QuaWQuMTIzJywgJ2ExYjJjM2Q0J107XG4gICAgICBjb25zdCBpbnZhbGlkSWRzID0gWycnLCAnYScucmVwZWF0KDY1KSwgJ2lkIHdpdGggc3BhY2VzJywgJ2lkQGludmFsaWQnLCAnaWQvaW52YWxpZCddO1xuXG4gICAgICB2YWxpZElkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgZXhwZWN0KHZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlRkhJUklkKGlkKSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpbnZhbGlkSWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICBleHBlY3QodmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVGSElSSWQoaWQpKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBVUkkgZm9ybWF0IGZvciBzZWN1cml0eScsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkVXJpcyA9IFtcbiAgICAgICAgJ2h0dHBzOi8vZXhhbXBsZS5jb20nLFxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcbiAgICAgICAgJ2ZoaXI6Ly9zZXJ2ZXIuY29tL1BhdGllbnQvMTIzJ1xuICAgICAgXTtcbiAgICAgIFxuICAgICAgY29uc3QgaW52YWxpZFVyaXMgPSBbXG4gICAgICAgICdub3QtYS11cmknLFxuICAgICAgICAnamF2YXNjcmlwdDphbGVydCgxKScsXG4gICAgICAgICdkYXRhOnRleHQvaHRtbCw8c2NyaXB0PmFsZXJ0KDEpPC9zY3JpcHQ+J1xuICAgICAgXTtcblxuICAgICAgdmFsaWRVcmlzLmZvckVhY2godXJpID0+IHtcbiAgICAgICAgZXhwZWN0KHZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlVVJJKHVyaSkpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaW52YWxpZFVyaXMuZm9yRWFjaCh1cmkgPT4ge1xuICAgICAgICBleHBlY3QodmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVVUkkodXJpKSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgY3JpdGljYWwgc2VjdXJpdHkgZXZlbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3JpdGljYWxFdmVudHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnVU5BVVRIT1JJWkVEX0FDQ0VTUycgYXMgY29uc3QsXG4gICAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdDUklUSUNBTCcgYXMgY29uc3QsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBdHRlbXB0ZWQgdW5hdXRob3JpemVkIGFjY2VzcyB0byBwYXRpZW50IHJlY29yZHMnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnREFUQV9NT0RJRklDQVRJT04nIGFzIGNvbnN0LFxuICAgICAgICAgIHVzZXJJZDogJ3VzZXI0NTYnLFxuICAgICAgICAgIHNldmVyaXR5OiAnSElHSCcgYXMgY29uc3QsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQgbW9kaWZpY2F0aW9uIG9mIG1lZGljYWwgcmVjb3JkcydcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBldmVudCBvZiBjcml0aWNhbEV2ZW50cykge1xuICAgICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nU2VjdXJpdHlFdmVudChldmVudCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZlcmlmeSBldmVudHMgYXJlIHRyYWNrZWQgKHRoaXMgd291bGQgbm9ybWFsbHkgYmUgc3RvcmVkIGluIGEgZGF0YWJhc2UpXG4gICAgICBleHBlY3QoY3JpdGljYWxFdmVudHMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChjcml0aWNhbEV2ZW50c1swXS5zZXZlcml0eSkudG9CZSgnQ1JJVElDQUwnKTtcbiAgICAgIGV4cGVjdChjcml0aWNhbEV2ZW50c1sxXS5zZXZlcml0eSkudG9CZSgnSElHSCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnJlYWNoIE5vdGlmaWNhdGlvbiBSZXF1aXJlbWVudHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgcG90ZW50aWFsIGRhdGEgYnJlYWNoIHNjZW5hcmlvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNpbXVsYXRlIGJ1bGsgZGF0YSBhY2Nlc3MgdGhhdCBtaWdodCBpbmRpY2F0ZSBhIGJyZWFjaFxuICAgICAgY29uc3Qgc3VzcGljaW91c1VzZXIgPSAndXNlcl9zdXNwaWNpb3VzJztcbiAgICAgIGNvbnN0IGFjY2Vzc1RpbWVzID0gW107XG4gICAgICBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTA7IGkrKykge1xuICAgICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nVXNlckFjdGlvbihcbiAgICAgICAgICBzdXNwaWNpb3VzVXNlcixcbiAgICAgICAgICAnYnVsa19kYXRhX2FjY2VzcycsXG4gICAgICAgICAgJ1BhdGllbnQnLFxuICAgICAgICAgIGBwYXQke2l9YCxcbiAgICAgICAgICAnMTkyLjE2OC4xLjEwMCcsXG4gICAgICAgICAgJ0F1dG9tYXRlZCBUb29sJyxcbiAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICAgIGFjY2Vzc1RpbWVzLnB1c2gobmV3IERhdGUoKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJ1bGtBY2Nlc3MgPSBhd2FpdCBhdWRpdFNlcnZpY2Uuc2VhcmNoQXVkaXRMb2dzKCcnLCB7XG4gICAgICAgIHVzZXJJZDogc3VzcGljaW91c1VzZXIsXG4gICAgICAgIGFjdGlvbjogJ2J1bGtfZGF0YV9hY2Nlc3MnXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGJ1bGtBY2Nlc3MpLnRvSGF2ZUxlbmd0aCg1MCk7XG4gICAgICBcbiAgICAgIC8vIEFuYWx5emUgZm9yIHBvdGVudGlhbCBicmVhY2ggaW5kaWNhdG9yc1xuICAgICAgY29uc3QgdW5pcXVlUmVzb3VyY2VzID0gbmV3IFNldChidWxrQWNjZXNzLm1hcChsb2cgPT4gbG9nLnJlc291cmNlSWQpKTtcbiAgICAgIGV4cGVjdCh1bmlxdWVSZXNvdXJjZXMuc2l6ZSkudG9CZSg1MCk7IC8vIEFjY2Vzc2VkIDUwIGRpZmZlcmVudCBwYXRpZW50IHJlY29yZHNcbiAgICAgIFxuICAgICAgLy8gQWxsIGFjY2Vzc2VzIGZyb20gc2FtZSBJUCAocG90ZW50aWFsIGluZGljYXRvcilcbiAgICAgIGNvbnN0IHVuaXF1ZUlQcyA9IG5ldyBTZXQoYnVsa0FjY2Vzcy5tYXAobG9nID0+IGxvZy5pcEFkZHJlc3MpKTtcbiAgICAgIGV4cGVjdCh1bmlxdWVJUHMuc2l6ZSkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgZGF0YSBleHBvcnQgYWN0aXZpdGllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dVc2VyQWN0aW9uKFxuICAgICAgICAnYWRtaW5fdXNlcicsXG4gICAgICAgICdkYXRhX2V4cG9ydCcsXG4gICAgICAgICdQYXRpZW50JyxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAnMTkyLjE2OC4xLjUnLFxuICAgICAgICAnRXhwb3J0IFRvb2wnLFxuICAgICAgICB0cnVlLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHtcbiAgICAgICAgICBleHBvcnRUeXBlOiAncGF0aWVudF9yZWNvcmRzJyxcbiAgICAgICAgICByZWNvcmRDb3VudDogMTAwMCxcbiAgICAgICAgICBleHBvcnRGb3JtYXQ6ICdDU1YnLFxuICAgICAgICAgIGRlc3RpbmF0aW9uOiAnc2VjdXJlX3N0b3JhZ2UnXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGV4cG9ydExvZ3MgPSBhd2FpdCBhdWRpdFNlcnZpY2Uuc2VhcmNoQXVkaXRMb2dzKCcnLCB7XG4gICAgICAgIGFjdGlvbjogJ2RhdGFfZXhwb3J0J1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChleHBvcnRMb2dzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoZXhwb3J0TG9nc1swXS5hZGRpdGlvbmFsRGF0YSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChleHBvcnRMb2dzWzBdLnJlc291cmNlKS50b0JlKCdQYXRpZW50Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBZG1pbmlzdHJhdGl2ZSBTYWZlZ3VhcmRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgYXVkaXQgc3RhdGlzdGljcyBmb3IgY29tcGxpYW5jZSBtb25pdG9yaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGRpdmVyc2UgYXVkaXQgZGF0YVxuICAgICAgY29uc3QgdGVzdERhdGEgPSBbXG4gICAgICAgIHsgdXNlcklkOiAncGh5c2ljaWFuMScsIGFjdGlvbjogJ2xvZ2luX3N1Y2Nlc3MnLCBzdWNjZXNzOiB0cnVlIH0sXG4gICAgICAgIHsgdXNlcklkOiAncGh5c2ljaWFuMScsIGFjdGlvbjogJ3ZpZXdfcGF0aWVudCcsIHN1Y2Nlc3M6IHRydWUgfSxcbiAgICAgICAgeyB1c2VySWQ6ICdudXJzZTEnLCBhY3Rpb246ICdsb2dpbl9zdWNjZXNzJywgc3VjY2VzczogdHJ1ZSB9LFxuICAgICAgICB7IHVzZXJJZDogJ251cnNlMScsIGFjdGlvbjogJ2RvY3VtZW50X3ZpdGFscycsIHN1Y2Nlc3M6IHRydWUgfSxcbiAgICAgICAgeyB1c2VySWQ6ICd1bmF1dGhvcml6ZWQnLCBhY3Rpb246ICdsb2dpbl9hdHRlbXB0Jywgc3VjY2VzczogZmFsc2UgfSxcbiAgICAgICAgeyB1c2VySWQ6ICd1bmF1dGhvcml6ZWQnLCBhY3Rpb246ICdsb2dpbl9hdHRlbXB0Jywgc3VjY2VzczogZmFsc2UgfVxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRlc3REYXRhKSB7XG4gICAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dVc2VyQWN0aW9uKFxuICAgICAgICAgIGRhdGEudXNlcklkLFxuICAgICAgICAgIGRhdGEuYWN0aW9uLFxuICAgICAgICAgICdUZXN0UmVzb3VyY2UnLFxuICAgICAgICAgICd0ZXN0MTIzJyxcbiAgICAgICAgICAnMTkyLjE2OC4xLjEnLFxuICAgICAgICAgICdCcm93c2VyJyxcbiAgICAgICAgICBkYXRhLnN1Y2Nlc3NcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBhdWRpdFNlcnZpY2UuZ2V0QXVkaXRTdGF0aXN0aWNzKCdkYWlseScpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxFdmVudHMpLnRvQmUoNik7XG4gICAgICBleHBlY3Qoc3RhdHMuc3VjY2Vzc2Z1bEV2ZW50cykudG9CZSg0KTtcbiAgICAgIGV4cGVjdChzdGF0cy5mYWlsZWRFdmVudHMpLnRvQmUoMik7XG4gICAgICBleHBlY3Qoc3RhdHMudW5pcXVlVXNlcnMpLnRvQmUoMyk7XG4gICAgICBleHBlY3Qoc3RhdHMuZXZlbnRzQnlUeXBlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN0YXRzLmV2ZW50c0J5VXNlcikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBhdWRpdCBsb2cgc2VhcmNoIGFuZCBmaWx0ZXJpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgdGVzdCBkYXRhIHdpdGggZGlmZmVyZW50IGF0dHJpYnV0ZXNcbiAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dVc2VyQWN0aW9uKFxuICAgICAgICAndXNlcjEnLCAnYWN0aW9uMScsICdSZXNvdXJjZTEnLCAncmVzMScsICcxOTIuMTY4LjEuMScsICdCcm93c2VyMScsIHRydWVcbiAgICAgICk7XG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nVXNlckFjdGlvbihcbiAgICAgICAgJ3VzZXIyJywgJ2FjdGlvbjInLCAnUmVzb3VyY2UyJywgJ3JlczInLCAnMTkyLjE2OC4xLjInLCAnQnJvd3NlcjInLCBmYWxzZVxuICAgICAgKTtcblxuICAgICAgLy8gVGVzdCBmaWx0ZXJpbmcgYnkgdXNlclxuICAgICAgY29uc3QgdXNlcjFMb2dzID0gYXdhaXQgYXVkaXRTZXJ2aWNlLnNlYXJjaEF1ZGl0TG9ncygnJywgeyB1c2VySWQ6ICd1c2VyMScgfSk7XG4gICAgICBleHBlY3QodXNlcjFMb2dzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QodXNlcjFMb2dzWzBdLnVzZXJJZCkudG9CZSgndXNlcjEnKTtcblxuICAgICAgLy8gVGVzdCBmaWx0ZXJpbmcgYnkgc3VjY2VzcyBzdGF0dXNcbiAgICAgIGNvbnN0IGZhaWxlZExvZ3MgPSBhd2FpdCBhdWRpdFNlcnZpY2Uuc2VhcmNoQXVkaXRMb2dzKCcnLCB7IHN1Y2Nlc3M6IGZhbHNlIH0pO1xuICAgICAgZXhwZWN0KGZhaWxlZExvZ3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZmFpbGVkTG9ncy5ldmVyeShsb2cgPT4gbG9nLnN1Y2Nlc3MgPT09IGZhbHNlKSkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gVGVzdCBmaWx0ZXJpbmcgYnkgSVAgYWRkcmVzc1xuICAgICAgY29uc3QgaXBMb2dzID0gYXdhaXQgYXVkaXRTZXJ2aWNlLnNlYXJjaEF1ZGl0TG9ncygnJywgeyBpcEFkZHJlc3M6ICcxOTIuMTY4LjEuMScgfSk7XG4gICAgICBleHBlY3QoaXBMb2dzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGlwTG9ncy5ldmVyeShsb2cgPT4gbG9nLmlwQWRkcmVzcyA9PT0gJzE5Mi4xNjguMS4xJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=