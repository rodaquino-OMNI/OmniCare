{"file":"/Users/rodrigo/claude-projects/OmniCare/backend/src/models/patient.model.ts","mappings":"","names":[],"sources":["/Users/rodrigo/claude-projects/OmniCare/backend/src/models/patient.model.ts"],"sourcesContent":["import { Patient as FHIRPatient } from '@medplum/fhirtypes';\n\nimport { \n  FHIRResource, \n  Identifier, \n  HumanName, \n  Address, \n  ContactPoint, \n  Reference, \n  CodeableConcept,\n  Attachment\n} from './base.model';\n\n/**\n * Extended Patient Model for OmniCare EMR\n * Combines FHIR R4 Patient resource with OmniCare-specific extensions\n */\nexport interface OmniCarePatient extends FHIRResource {\n  resourceType: 'Patient';\n  \n  // Core FHIR Patient fields\n  identifier?: Identifier[];\n  active?: boolean;\n  name?: HumanName[];\n  telecom?: ContactPoint[];\n  gender?: 'male' | 'female' | 'other' | 'unknown';\n  birthDate?: string;\n  deceasedBoolean?: boolean;\n  deceasedDateTime?: string;\n  address?: Address[];\n  maritalStatus?: CodeableConcept;\n  multipleBirthBoolean?: boolean;\n  multipleBirthInteger?: number;\n  photo?: Attachment[];\n  contact?: PatientContact[];\n  communication?: PatientCommunication[];\n  generalPractitioner?: Reference[];\n  managingOrganization?: Reference;\n  link?: PatientLink[];\n\n  // OmniCare-specific extensions\n  omnicarePatientId?: string;\n  registrationDate?: string;\n  preferredLanguage?: string;\n  emergencyContact?: PatientEmergencyContact[];\n  insurance?: InsuranceInformation[];\n  demographics?: PatientDemographics;\n  preferences?: PatientPreferences;\n  accessibilityNeeds?: AccessibilityNeeds;\n  socialHistory?: SocialHistory;\n  familyHistory?: FamilyHistoryRecord[];\n  alerts?: PatientAlert[];\n}\n\nexport interface PatientContact {\n  relationship?: CodeableConcept[];\n  name?: HumanName;\n  telecom?: ContactPoint[];\n  address?: Address;\n  gender?: 'male' | 'female' | 'other' | 'unknown';\n  organization?: Reference;\n  period?: {\n    start?: string;\n    end?: string;\n  };\n}\n\nexport interface PatientCommunication {\n  language: CodeableConcept;\n  preferred?: boolean;\n}\n\nexport interface PatientLink {\n  other: Reference;\n  type: 'replaced-by' | 'replaces' | 'refer' | 'seealso';\n}\n\nexport interface PatientEmergencyContact {\n  id?: string;\n  relationship: string;\n  name: HumanName;\n  telecom: ContactPoint[];\n  address?: Address;\n  priority: number;\n  active: boolean;\n}\n\nexport interface InsuranceInformation {\n  id?: string;\n  subscriberId: string;\n  payorName: string;\n  payorId?: string;\n  planName?: string;\n  groupNumber?: string;\n  policyNumber?: string;\n  relationshipToSubscriber: 'self' | 'spouse' | 'child' | 'other';\n  effectiveDate: string;\n  terminationDate?: string;\n  copayAmount?: number;\n  deductibleAmount?: number;\n  active: boolean;\n  priority: number; // 1 = primary, 2 = secondary, etc.\n}\n\nexport interface PatientDemographics {\n  race?: CodeableConcept[];\n  ethnicity?: CodeableConcept[];\n  religion?: CodeableConcept;\n  nationality?: string;\n  birthPlace?: Address;\n  occupation?: string;\n  educationLevel?: CodeableConcept;\n  disability?: CodeableConcept[];\n}\n\nexport interface PatientPreferences {\n  communicationPreferences?: {\n    preferredLanguage?: string;\n    interpreterRequired?: boolean;\n    communicationMethod?: 'phone' | 'email' | 'sms' | 'portal' | 'mail';\n    appointmentReminders?: boolean;\n    labResultsDelivery?: 'phone' | 'email' | 'portal' | 'mail';\n  };\n  treatmentPreferences?: {\n    advanceDirectives?: Reference[];\n    organDonor?: boolean;\n    resuscitationStatus?: 'full-code' | 'dnr' | 'dnar' | 'comfort-care';\n    emergencyTreatmentConsent?: boolean;\n  };\n  privacyPreferences?: {\n    shareWithFamily?: boolean;\n    shareWithEmergencyContact?: boolean;\n    marketingOptOut?: boolean;\n    researchParticipation?: boolean;\n  };\n}\n\nexport interface AccessibilityNeeds {\n  physicalDisability?: string[];\n  cognitiveNeeds?: string[];\n  sensoryImpairments?: string[];\n  assistiveDevices?: string[];\n  accommodationRequests?: string[];\n  transportationNeeds?: string;\n}\n\nexport interface SocialHistory {\n  smokingStatus?: CodeableConcept;\n  alcoholUse?: {\n    status: CodeableConcept;\n    frequency?: string;\n    quantity?: string;\n  };\n  substanceUse?: {\n    substance: CodeableConcept;\n    status: CodeableConcept;\n    frequency?: string;\n  }[];\n  sexualHistory?: {\n    sexuallyActive?: boolean;\n    partners?: number;\n    orientation?: CodeableConcept;\n  };\n  dietaryRestrictions?: CodeableConcept[];\n  exerciseHabits?: {\n    frequency?: string;\n    type?: string[];\n    intensity?: 'low' | 'moderate' | 'high';\n  };\n  livingArrangement?: {\n    type: CodeableConcept;\n    supportSystem?: string[];\n    livingAlone?: boolean;\n  };\n  employmentStatus?: CodeableConcept;\n  veteranStatus?: boolean;\n}\n\nexport interface FamilyHistoryRecord {\n  id?: string;\n  relationship: CodeableConcept;\n  name?: string;\n  gender?: 'male' | 'female' | 'other' | 'unknown';\n  bornDate?: string;\n  ageAtDeath?: number;\n  causeOfDeath?: CodeableConcept;\n  conditions?: FamilyCondition[];\n  deceased?: boolean;\n}\n\nexport interface FamilyCondition {\n  condition: CodeableConcept;\n  onset?: {\n    ageAtOnset?: number;\n    onsetDateTime?: string;\n  };\n  note?: string;\n}\n\nexport interface PatientAlert {\n  id?: string;\n  type: 'allergy' | 'medical' | 'behavioral' | 'infection-control' | 'safety' | 'other';\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  title: string;\n  description: string;\n  effectiveDate: string;\n  expirationDate?: string;\n  active: boolean;\n  createdBy: Reference;\n  lastUpdatedBy: Reference;\n}\n\n/**\n * Patient Search Parameters\n */\nexport interface PatientSearchParams {\n  _id?: string;\n  active?: boolean;\n  address?: string;\n  'address-city'?: string;\n  'address-country'?: string;\n  'address-postalcode'?: string;\n  'address-state'?: string;\n  'address-use'?: string;\n  birthdate?: string;\n  death_date?: string;\n  deceased?: boolean;\n  email?: string;\n  family?: string;\n  gender?: string;\n  given?: string;\n  identifier?: string;\n  language?: string;\n  name?: string;\n  phone?: string;\n  phonetic?: string;\n  telecom?: string;\n  \n  // OmniCare-specific search parameters\n  'omnicare-id'?: string;\n  'registration-date'?: string;\n  'insurance-id'?: string;\n  'emergency-contact'?: string;\n  'primary-care-provider'?: string;\n  \n  // Common search modifiers\n  _count?: number;\n  _offset?: number;\n  _sort?: string;\n  _include?: string[];\n  _revinclude?: string[];\n}\n\n/**\n * Patient Statistics\n */\nexport interface PatientStatistics {\n  totalPatients: number;\n  activePatients: number;\n  newPatientsThisMonth: number;\n  averageAge: number;\n  genderDistribution: {\n    male: number;\n    female: number;\n    other: number;\n    unknown: number;\n  };\n  topInsuranceProviders: Array<{\n    name: string;\n    count: number;\n  }>;\n  demographicBreakdown: {\n    ageGroups: Array<{\n      range: string;\n      count: number;\n    }>;\n    locationDistribution: Array<{\n      city: string;\n      state: string;\n      count: number;\n    }>;\n  };\n}\n\n/**\n * Patient Registration Request\n */\nexport interface PatientRegistrationRequest {\n  demographicInfo: {\n    name: HumanName[];\n    gender?: 'male' | 'female' | 'other' | 'unknown';\n    birthDate: string;\n    address: Address[];\n    telecom: ContactPoint[];\n    maritalStatus?: CodeableConcept;\n  };\n  identifiers?: Identifier[];\n  emergencyContacts?: PatientEmergencyContact[];\n  insurance?: InsuranceInformation[];\n  preferences?: PatientPreferences;\n  primaryCareProvider?: Reference;\n  referringProvider?: Reference;\n  consentForms?: {\n    treatmentConsent: boolean;\n    privacyNoticeAcknowledged: boolean;\n    communicationConsent: boolean;\n    researchConsent?: boolean;\n  };\n}\n\n/**\n * Patient Update Request\n */\nexport interface PatientUpdateRequest {\n  demographicInfo?: Partial<{\n    name: HumanName[];\n    address: Address[];\n    telecom: ContactPoint[];\n    maritalStatus: CodeableConcept;\n  }>;\n  emergencyContacts?: PatientEmergencyContact[];\n  insurance?: InsuranceInformation[];\n  preferences?: Partial<PatientPreferences>;\n  accessibilityNeeds?: Partial<AccessibilityNeeds>;\n  alerts?: PatientAlert[];\n}"],"version":3}